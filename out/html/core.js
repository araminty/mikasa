window.game={compiled:'{"scenes":{"prevScene":{"id":"prevScene","content":{"content":"","type":"paragraph"}},"prevTopScene":{"id":"prevTopScene","content":{"content":"","type":"paragraph"}},"jumpScene":{"id":"jumpScene","content":{"content":"","type":"paragraph"}},"backSpecialScene":{"id":"backSpecialScene","content":{"content":"","type":"paragraph"}},"returnScene":{"id":"returnScene","content":{"content":"","type":"paragraph"}},"cancel_advisor_action":{"id":"cancel_advisor_action","type":"scene","title":"Cancel action.","viewIf":{"$code":"return (((Q[\'last_advisor_action\'] || 0)===1) || ((Q[\'last_cabinet_action\'] || 0)===1));"},"goTo":[{"id":"root"}],"onArrival":[{"$code":"if (Q.month_actions > 0) {\\n    Q.month_actions -= 1;\\n}\\nif (Q.last_advisor_action) {\\n    Q.advisor_action_timer = 0;\\n    Q.last_advisor_action = 0;\\n}\\nif (Q.last_cabinet_action) {\\n    Q.last_cabinet_action = 0;\\n}\\n// reset the timer...\\nvar card = this.game.scenes[this.state.prevTopSceneId];\\nif (Q[card.id + \\"_timer\\"]) {\\n    Q[card.id + \\"_timer\\"] = 0;\\n}\\n// reduce visit count\\nif (this.state.visits[card.id]) {\\n    this.state.visits[card.id] -= 1;\\n}"}],"content":{"content":"","type":"paragraph"}},"easy_discard":{"id":"easy_discard","type":"scene","title":"Return card to hand.","viewIf":{"$code":"return ((((Q[\'difficulty\'] || 0) <= 0) && ((Q[\'last_advisor_action\'] || 0)===0)) && ((Q[\'last_cabinet_action\'] || 0)===0));"},"goTo":[{"id":"root"}],"onArrival":[{"$code":"if (Q.month_actions > 0) {\\n    Q.month_actions -= 1;\\n}\\n// return card to hand\\nvar card = this.state.lastPlayedCard;\\ncard.image = card.cardImage;\\nif (Q.difficulty >= 0) {\\n    this.state.currentHands[\'main\'].push(card);\\n} else {\\n    this.state.currentHands[\'main.main_easy\'].push(card);\\n}\\n// reset the timer...\\nif (Q[card.id + \\"_timer\\"]) {\\n    Q[card.id + \\"_timer\\"] = 0;\\n}\\n// reduce visit count\\nif (this.state.visits[card.id]) {\\n    this.state.visits[card.id] -= 1;\\n}"}],"content":{"content":"","type":"paragraph"}},"election_simulation.2300":{"id":"election_simulation.2300","onArrival":[{"$code":"Q.classes = [\'first_wave\', \'second_wave\', \'drones\', \'otherworlder\', \'deepers\', \'clans\', \'shareholders\'];\\nQ.classes2 = [\'first_wave\', \'second_wave\', \'otherworlder\', \'deepers\', \'clans\', \'shareholders\'];\\nQ.parties = [\'SDF\', \'DCA\', \'GOP\', \'SRZP\', \'LDPR\', \'NPP\', \'FTU\', \'BPA\'];\\nQ.corp_parties = [\'NPP\', \'FTU\', \'BPA\'];\\nQ.non_corp_parties = [\'SDF\', \'DCA\', \'GOP\', \'SRZP\', \'LDPR\'];\\n\\n\\n// Democrats: Social Democratic Forum (SDF)\\n// Deeper-Democrats: Deeper Community Association (DCA)\\n// Syndicates\\n// Five Families: Grand Old Party (GOP)\\n// Bleeding Edges: Sozial Republik Zentrum Partie (SRZP)\\n// Sharkskins: Liberal Democratic Party Registry (LDPR)\\n// Corporate United Front\\n// Soylent: New People\'s Party (NPP)\\n// Magrail: Mikasa Federation of Trade Unions (FTU)\\n// Brazos: Business and Professionals Alliance for Mikasa (BPA)\\n\\n// In hundred thousands\\nQ.first_wave = 19;\\nQ.second_wave = 22;\\nQ.drones = 17;\\nQ.otherworlder = 1;\\nQ.deepers = 5;\\nQ.clans = 3;\\nQ.shareholders = 0.2;\\n\\n// Idea is to have three kinds of constituancies.  Committee are basically static and go to the corporations, \\"functional\\" are professional qualification based with small populations and high turnouts and mixed, \\"geographical\\" are location based and mostly favor the syndicates in low turnout areas without heavy drone levels\\n\\nQ.first_wave_guild = 10;\\nQ.second_wave_guild = 3;\\nQ.otherworlder_guild = 1;\\nQ.drones_guild = 10;\\nQ.deepers_guild = 20;\\nQ.clans_guild = 3;\\nQ.shareholders_guild = .1;\\n\\nQ.executive_seats = 40;\\nQ.functional_seats = 30;\\nQ.geographic_seats = 20;\\n\\nQ.SDF_executive_seats = 1;\\nQ.SDF_functional_seats = 1;\\nQ.SDF_geographic_seats = 1;\\nQ.SDF_total_seats = -3;\\n\\nQ.SDF_support_first_wave = 10;\\nQ.SDF_support_second_wave = 15;\\nQ.SDF_support_drones = 5;\\nQ.SDF_support_otherworlder = 50;\\nQ.SDF_support_deepers = 10;\\nQ.SDF_support_clans = 10;\\nQ.SDF_support_shareholders = 1;\\n\\nQ.DCA_support_first_wave = 1;\\nQ.DCA_support_second_wave = 1;\\nQ.DCA_support_drones = 1;\\nQ.DCA_support_otherworlder = 1;\\nQ.DCA_support_deepers = 50;\\nQ.DCA_support_clans = 50;\\nQ.DCA_support_shareholders = 1;\\n\\nQ.GOP_support_first_wave = 10;\\nQ.GOP_support_second_wave = 25;\\nQ.GOP_support_drones = 5;\\nQ.GOP_support_otherworlder = 1;\\nQ.GOP_support_deepers = 1;\\nQ.GOP_support_clans = 1;\\nQ.GOP_support_shareholders = 1;\\n\\nQ.SRZP_support_first_wave = 20;\\nQ.SRZP_support_second_wave = 15;\\nQ.SRZP_support_drones = 5;\\nQ.SRZP_support_otherworlder = 1;\\nQ.SRZP_support_deepers = 10;\\nQ.SRZP_support_clans = 10;\\nQ.SRZP_support_shareholders = 1;\\n\\nQ.LDPR_support_first_wave = 20;\\nQ.LDPR_support_second_wave = 20;\\nQ.LDPR_support_drones = 5;\\nQ.LDPR_support_otherworlder = 1;\\nQ.LDPR_support_deepers = 1;\\nQ.LDPR_support_clans = 1;\\nQ.LDPR_support_shareholders = 1;\\n\\nQ.NPP_support_first_wave = 20;\\nQ.NPP_support_second_wave = 2;\\nQ.NPP_support_drones = 25;\\nQ.NPP_support_otherworlder = 1;\\nQ.NPP_support_deepers = 1;\\nQ.NPP_support_clans = 1;\\nQ.NPP_support_shareholders = 30;\\n\\nQ.FTU_support_first_wave = 10;\\nQ.FTU_support_second_wave = 20;\\nQ.FTU_support_drones = 25;\\nQ.FTU_support_otherworlder = 1;\\nQ.FTU_support_deepers = 1;\\nQ.FTU_support_clans = 1;\\nQ.FTU_support_shareholders = 35;\\n\\nQ.BPA_support_first_wave = 10;\\nQ.BPA_support_second_wave = 10;\\nQ.BPA_support_drones = 30;\\nQ.BPA_support_otherworlder = 2;\\nQ.BPA_support_deepers = 1;\\nQ.BPA_support_clans = 1;\\nQ.BPA_support_shareholders = 25;"}],"goTo":[{"id":"election_calculations"}],"setJump":"election_simulation.post_election","content":{"content":"","type":"paragraph"}},"election_calculations":{"id":"election_calculations","type":"scene","title":"Election","onArrival":[{"$code":"function logistic_convert(x, u, s) {\\n    // logistic cdf function\\n    return 1 / (1 + Math.exp((u - x) / s));\\n}\\n\\n\\npiecewise_mult = (a, b) => a.map((x, i) => (a[i] || 0) * (b[i] || 0))\\npiecewise_add = (a, b) => a.map((x, i) => (a[i] || 0) + (b[i] || 0))\\npiecewise_sub = (a, b) => a.map((x, i) => a[i] - b[i])\\nsum_list = (numbers) => numbers.reduce((sum, num) => (sum || 0) + (num || 0));\\n\\nfunction piecewise_sum(...lists_to_sum) {\\n    total = lists_to_sum[0]\\n    for (var i = 1; i < lists_to_sum.length; i++) {\\n        next_list = lists_to_sum[i] ?? [0] * total.length;\\n        total = piecewise_add(total, next_list);\\n    }\\n    return total\\n}\\n\\n\\n\\nfunction motivation_percentages(interest_strength, ideology_strength, demo_adjust) {\\n\\n    if (demo_adjust >= 0) {\\n        interest_percent = 1 - (1 - interest_strength / 100) * .9 ** demo_adjust;\\n    } else {\\n        interest_percent = (interest_strength / 100) * .9 ** (-demo_adjust);\\n    }\\n\\n    ideology_percent = (1 - interest_percent) * ideology_strength / 100\\n\\n    if (interest_percent + ideology_percent > 1) {\\n        interest_percent = interest_percent / (interest_percent + ideology_percent)\\n        ideology_percent = ideology_percent / (interest_percent + ideology_percent)\\n    }\\n    apathy_percent = 1 - interest_percent - ideology_percent;\\n\\n    return [interest_percent, ideology_percent, apathy_percent]\\n}\\n\\nfunction ideology_strengths() {\\n    // how strong each ideology is in the current political scene\\n    return [\\n        Q.progress_meme_strength, Q.patriot_meme_strength,\\n        Q.trade_meme_strength, Q.autark_meme_strength,\\n        Q.rebel_meme_strength, Q.stake_meme_strength, Q.vigil_meme_strength\\n    ]\\n}\\n\\n\\n\\n\\nfunction cdf_normalize(strengths) {\\n    sum = 0;\\n    u = Q.u ?? 5;// the value that gives 50% on the logistic cdf\\n    s = Q.s ?? 3;// the standard deviation on the logistic cdf\\n\\n    adjusted = []\\n    total = 0;\\n    for (var i=0; i<strengths.length; i++) {\\n        converted = logistic_convert(strengths[i],u,s)\\n        adjusted.push(converted)\\n        total += converted;\\n    }\\n\\n    return adjusted.map(i => i/total)\\n}\\n\\n\\n\\nfunction assign_percentages (raw_votes, n_seats) {\\n\\n    total_votes = sum_list(raw_votes);\\n    votes_per_seat = total_votes/n_seats;\\n\\n    remainders = raw_votes.map(i => i % votes_per_seat)\\n    whole_seats = piecewise_sub(raw_votes, remainders).map(i => i/votes_per_seat)\\n\\n    unassigned = n_seats - sum_list(whole_seats)\\n\\n    for (var i=0; i<unassigned; i++){\\n        var idx = remainders.reduce((iMax, x, i, arr) => x > arr[iMax] ? i : iMax, 0);\\n        whole_seats[idx]+=1;\\n        remainders[idx]=0;\\n    }\\n    return whole_seats.map(i => Math.round(i));\\n}\\n\\nfunction generic_vote(electorate = Q.electorates[8], district = 0, nseats = 100) {\\n    // Q.fudge_factor\\n    // 1. get interest + ideology strengths by demographic\\n    // 2. get size of interest group\\n    // 3. get size of ideologies\\n    if (typeof electorate === \'number\') {\\n        electorate = Q.electorates[electorate];\\n    }\\n\\n    demo_groups = electorate.slice(0, Q.demo_names.length);\\n    votes_in_interest_groups = electorate.slice(Q.demo_names.length, electorate.length - 1);\\n    votes_in_ideologies = [ 0,0,0,0,0,0,0,0,0 ] ;\\n    total_apathy_votes = 0;\\n    party_votes = [ 0,0,0,0,0 ];\\n\\n    if (electorate[electorate.length] = \\"p\\") {\\n        if (district != 0){demo_groups = Q.dvar_list[district-1];\\n        } else {demo_groups =piecewise_sum(Q.dvar_list)}\\n    }\\n\\n\\n    // 1. get interest + ideology strengths by demographic\\n\\n    interest_strength = Q.interest_strength ?? 20; // baseline strength of interest groups, shouldn\'t change too much but might\\n    meme_strengths = ideology_strengths();\\n    meme_total_strength = sum_list(meme_strengths) ?? 0;\\n\\n    // first we assign all the demographic vote into interest groups or ideologies\\n    for (var i = 0; i < demo_groups.length; i++) {\\n        electorate_size = demo_groups[i];\\n        if (electorate_size > 0) {\\n            interest_adjustment = Q.interest_adjustments[i] // how much interest group drives the demo\\n            // TODO: replace this with a prosperity adjusted guild affinities\\n            interest_group_memberships = Q.interest_group_memberships[i];\\n            strengths = motivation_percentages(interest_strength, meme_total_strength, interest_adjustment);\\n\\n            demo_all_interest_votes = strengths[0] * electorate_size;\\n            demo_all_ideology_votes = strengths[1] * electorate_size;\\n            demo_all_apathy_votes = strengths[2] * electorate_size;\\n\\n            // assign to different interest groups\\n            new_interest_votes = interest_group_memberships.map(i => i * demo_all_interest_votes);\\n            // assign to different ideology types\\n            new_ideology_votes = meme_strengths.map(i => i * demo_all_ideology_votes);\\n\\n            votes_in_interest_groups = piecewise_add(votes_in_interest_groups, new_interest_votes);\\n            votes_in_ideologies = piecewise_add(votes_in_ideologies, new_ideology_votes);\\n            total_apathy_votes = total_apathy_votes + demo_all_apathy_votes;\\n        }\\n    }\\n\\n    // then we go through each interest group and each ideology and assign them to the five different parties\\n\\n    for (var i = 0; i < Q.interest_group_voting_habits.length; i++) {\\n        habits = Q.interest_group_voting_habits[i]\\n        group_votes = votes_in_interest_groups[i]\\n\\n        if (group_votes>0) {\\n        ideology_percentages = cdf_normalize(habits);\\n        new_votes = ideology_percentages.map( i => i * group_votes)\\n        party_votes = piecewise_add(party_votes, new_votes)\\n\\n        // interest_name = Q.interest_names[i];\\n        // console.log(interest_name, habits, group_votes)\\n        // console.log(interest_name, new_votes)\\n\\n        }\\n    }\\n\\n    for (var i = 0; i < Q.meme_names.length; i++) {\\n        habits = Q.ideology_voting_habits[i]\\n        group_votes = votes_in_ideologies[i]\\n\\n        if (group_votes>0) {\\n        ideology_percentages = cdf_normalize(habits);\\n        new_votes = ideology_percentages.map( i => i * group_votes)\\n        party_votes = piecewise_add(party_votes, new_votes)\\n\\n        // ideology_name = Q.meme_names[i];\\n        // console.log(ideology_name, habits, group_votes)\\n        // console.log(ideology_name, new_votes)\\n        }\\n    }\\n\\n    seats = assign_percentages(party_votes, nseats);\\n\\n    return [seats, party_votes, votes_in_interest_groups, votes_in_ideologies]\\n\\n\\n}\\n\\nfunction update_projections(){\\n\\n    // executive seats\\n    executive_seats = Q.executive_seats ?? 140;\\n    result = generic_vote(electorate=8, district=0, nseats=executive_seats);\\n    Q.projections.executive = result[0];\\n\\n    //guild seats\\n    for (var i = 0; i < 8; i++){\\n        color = Q.guild_colors[i];\\n        result = generic_vote(electorate=i, district=0, nseats=Q.guild_seats[i]);\\n        Q.projections[\'guild_\'+color]=result[0];\\n    }\\n\\n    //geographic seats\\n    for (var i = 1; i < 8; i++){\\n        result = generic_vote(electorate=9, district=i, nseats=20);\\n        Q.projections[\'district_\'+i]=result[0];\\n    }\\n}\\n\\nupdate_projections();\\n\\nQ.foobar = Q.projections.executive;\\nQ.C_exec = Q.projections.executive[0];\\nQ.G_exec = Q.projections.executive[1];\\nQ.D_exec = Q.projections.executive[2];\\nQ.H_exec = Q.projections.executive[3];\\nQ.I_exec = Q.projections.executive[4];"}],"content":{"content":[{"type":"heading","content":"Seat Projections:"},{"type":"paragraph","content":"Executive:"},{"type":"paragraph","content":[{"type":"magic","content":"<span style=\\"color: #44b88f;\\">Corporate Proxies</span>"},": ",{"type":"insert","insert":0},""]},{"type":"paragraph","content":[{"type":"magic","content":"<span style=\\"color: #cf6e19;\\">Criminal Proxies</span>"},": ",{"type":"insert","insert":1},""]},{"type":"paragraph","content":[{"type":"magic","content":"<span style=\\"color: #1100cc;\\">Democrats</span>"},": ",{"type":"insert","insert":2},""]},{"type":"paragraph","content":[{"type":"magic","content":"<span style=\\"color: #c00000;\\">Hate Groups</span>"},": ",{"type":"insert","insert":3},""]},{"type":"paragraph","content":[{"type":"magic","content":"<span style=\\"color: #404040;\\">Independents</span>"},": ",{"type":"insert","insert":4},""]}],"stateDependencies":[{"type":"insert","fn":{"$code":"return (Q[\'C_exec\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'G_exec\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'D_exec\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'H_exec\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'I_exec\'] || 0);"}}]}},"library.menu":{"id":"library.menu","options":[{"id":"@backSpecialScene","title":"Exit library."}],"content":{"content":"","type":"paragraph"}},"library":{"id":"library","type":"scene","title":"library","newPage":true,"isSpecial":true,"goTo":[{"id":"library.menu"}],"content":[{"type":"heading","content":"The Library"},{"type":"paragraph","content":"Demographics of Mikasa in 2300:"},{"type":"paragraph","content":"First Wave: Communities that formed around the cliques of original settlers from Japan, the EU and USA. The most prosperous non corporate group. Approximately 1.9 million people"},{"type":"paragraph","content":"Second Wave: Communities that emerged during the refugee waves of the 23rd centuries. Predominantly from East Africa and South East Asia. Generally poorer then any group but Otherworlders. Approximately 2.2 million people"},{"type":"paragraph","content":"Corporate Citizens, aka \\"Drones\\": employees of the international corporations, primarily the \\"Big Three\\" of Community Soylent Incorperated, Combined Magrail Trust and the Brazos Zaibatsu. They have traded away most of their freedom for a higher standard of living. Approximately 1.7 million people."},{"type":"paragraph","content":"Deepers: The inhabitants of a secondary colony that formed away from the main city-state located at the base of the orbital tether-port. The main colony subsequently expanded out to border \\"the Deep\\" which lead to annexation 25 years ago. Approximately 1.7 million people."},{"type":"paragraph","content":"Clans of the Mother: Isolationist groups that live disconnected from the city infrastructure in primarily small independent habitats hidden within the asteroid. Approximately 0.5 million people, few of them inside the districts. A consecrated group named \\"Comptrollers\\" are the only clan members who are allowed to touch money and handle most interactions with the outside world."},{"type":"paragraph","content":"Otherworlders: People who came from the Otherworld through portals or other magical means of transport. The largest groups are Humans, Fae and Orcs. Many members of this group are ill equipped to navigate a modern society and literacy rates let alone computer literacy rates are very low. However this group does have by far the largest proportion of those trained in the magical arts. Approximately 100 thousand people"},{"type":"paragraph","content":"Shareholders: Literally those holding shares in the big three but used as a catch all term to describe anyone of significant wealth. Besides the permanent residents who are members of the ownership class, there is a constant churn of wealthy travellers on the space liners that stop at Mikasa and the other four way stations on the way between the inner and outer solar system. Approximately 50,000 permanent residents, 150,000 off world stakeholders with voting rights in absentia and a fluctuating visiting population around 50,000 people."}]},"game_over.eg_menu":{"id":"game_over.eg_menu","options":[{"id":"#endings"},{"id":"@game_over.end_game","title":"End game."}],"content":{"content":"","type":"paragraph"}},"credits":{"id":"credits","type":"scene","title":"Credits","options":[{"id":"@root","title":"Back"}],"content":[{"type":"paragraph","content":"Autumn Chen: for making the original"},{"type":"paragraph","content":"Parker Williamson: lead technical expert on scrying"},{"type":"paragraph","content":"Catsy Morgan: Haruspicy assistance"},{"type":"paragraph","content":"Cassandra Elizabeth Morgan: author of The Autobiography of Stacy Primogen"},{"type":"paragraph","content":"Marie Anne Williamson: translator of the Manifest of Righteous Operating, commentary on the clans of the Mother."},{"type":"paragraph","content":"images"},{"type":"paragraph","content":"https://commons.wikimedia.org/wiki/File:Building_collapse_in_S%C3%A3o_Paulo_2018_067.jpg"},{"type":"paragraph","content":"https://commons.wikimedia.org/wiki/File:PSYCHE_(Asteroid).jpg"},{"type":"paragraph","content":"https://commons.wikimedia.org/wiki/File:Ballotbox325CSCVL.png"},{"type":"paragraph","content":"https://commons.wikimedia.org/wiki/File:LegCoChambers2025.jpg (image trimmed)"},{"type":"paragraph","content":"https://commons.wikimedia.org/wiki/File:WorldWide_Telescope_(WWT)_-_Solar_system.png (image trimmed)"},{"type":"paragraph","content":"https://commons.wikimedia.org/wiki/File:BigComboTrailer.jpg (image trimmed)"}]},"main.main_easy":{"id":"main.main_easy","setBg":"img/solar_system.jpg","isHand":true,"maxCards":4,"options":[{"id":"@main.party"},{"id":"@main.govt"},{"id":"@shuffle_leadership_pinned"},{"id":"@advance"},{"id":"#advisor"}],"content":{"content":"","type":"paragraph"}},"mod_loader":{"id":"mod_loader","type":"scene","title":"Mods","isSpecial":true,"onDisplay":[{"$code":"var mods_list = document.getElementById(\'mods_list\');\\n// load mods from url\\nvar mods_url = \'https://aucchen.github.io/social_democracy_mods/mod_list.tsv\';\\nvar table = document.createElement(\'table\');\\ntable.style.border = \'1px solid\';\\ntable.style[\'border-collapse\'] = \'collapse\';\\ntable.style[\'font-size\'] = \'0.8em\';\\nQ.mods_table = {};\\nfetch(mods_url)\\n.then(response => response.text())\\n.then(text => {\\n    // split text\\n    var lines = text.split(\'\\\\n\');\\n    for (var i = 0; i < lines.length; i++) {\\n        var line_data = lines[i].split(\'\\\\t\');\\n        if (line_data.length < 5) {\\n            continue;\\n        }\\n        var tr = document.createElement(\'tr\');\\n        for (var j = 0; j < 4; j++) {\\n            var td = document.createElement(\'td\');\\n            if (i == 0) {\\n                td = document.createElement(\'th\');\\n            }\\n            td.style.border = \'1px solid\';\\n            td.style.padding = \'0.5em\';\\n            td.textContent = line_data[j];\\n\\n            tr.appendChild(td);\\n        }\\n        if (i > 0) {\\n            Q.mods_table[line_data[2]] = {\\n                name: line_data[0],\\n                author: line_data[1],\\n                description: line_data[3],\\n            };\\n\\n        }\\n        table.appendChild(tr);\\n    }\\n    mods_list.appendChild(table);\\n})\\n.catch(err => console.log(err));\\n\\nvar submit = document.getElementById(\'submit\');\\nsubmit.onclick = function() {\\n    var mod_url = document.getElementById(\'mod_url\').value;\\n    // if it\'s a known mod, set the game\'s titlebar and author.\\n    if (Q.mods_table[mod_url]) {\\n        var mod_data = Q.mods_table[mod_url];\\n        var title = document.getElementById(\'game-title\');\\n        title.textContent = mod_data.name;\\n        var author = document.getElementById(\'game-author\');\\n        author.textContent = mod_data.author;\\n    }\\n    window.loadMod(mod_url);\\n};"}],"options":[{"id":"@backSpecialScene","title":"Back"}],"content":[{"type":"paragraph","content":"Curated mods:"},{"type":"paragraph","content":[{"type":"magic","content":"<div id=\\"mods_list\\"></div>"},""]},{"type":"paragraph","content":"Enter a mod\'s URL:"},{"type":"paragraph","content":[{"type":"magic","content":"<input type=\\"text\\" size=\\"25\\" id=\\"mod_url\\" name=\\"mod_url\\"/> <button id=\\"submit\\">Submit</button>"},""]}]},"post_event.events_choice":{"id":"post_event.events_choice","options":[{"id":"#event"}],"content":{"content":"","type":"paragraph"}},"post_event":{"id":"post_event","type":"scene","title":"Post Event","newPage":true,"onArrival":[{"$code":"function logistic_convert(x, u, s) {\\n    // logistic cdf function\\n    return 1 / (1 + Math.exp((u - x) / s));\\n}\\n\\npiecewise_mult = (a, b) => a.map((x, i) => (a[i] || 0) * (b[i] || 0))\\npiecewise_add = (a, b) => a.map((x, i) => (a[i] || 0) + (b[i] || 0))\\npiecewise_sub = (a, b) => a.map((x, i) => a[i] - b[i])\\n\\nsum_list = (numbers) => numbers.reduce((sum, num) => (sum || 0) + (num || 0));\\n\\n\\nfunction piecewise_sum(...lists_to_sum) {\\n    total = lists_to_sum[0]\\n    for (var i = 1; i < lists_to_sum.length; i++) {\\n        next_list = lists_to_sum[i] ?? [0] * total.length;\\n        total = piecewise_add(total, next_list);\\n    }\\n    return total\\n}\\n\\nfunction motivation_percentages(interest_strength, ideology_strength, demo_adjust) {\\n\\n    if (demo_adjust >= 0) {\\n        interest_percent = 1 - (1 - interest_strength / 100) * .9 ** demo_adjust;\\n    } else {\\n        interest_percent = (interest_strength / 100) * .9 ** (-demo_adjust);\\n    }\\n\\n    ideology_percent = (1 - interest_percent) * ideology_strength / 100\\n\\n    if (interest_percent + ideology_percent > 1) {\\n        interest_percent = interest_percent / (interest_percent + ideology_percent)\\n        ideology_percent = ideology_percent / (interest_percent + ideology_percent)\\n    }\\n    apathy_percent = 1 - interest_percent - ideology_percent;\\n\\n    return [interest_percent, ideology_percent, apathy_percent]\\n}\\n\\nfunction ideology_strengths() {\\n    // how strong each ideology is in the current political scene\\n    return [\\n        Q.progress_meme_strength, Q.patriot_meme_strength,\\n        Q.trade_meme_strength, Q.autark_meme_strength,\\n        Q.rebel_meme_strength, Q.stake_meme_strength, Q.vigil_meme_strength\\n    ]\\n}\\n\\n\\nfunction cdf_normalize(strengths) {\\n    sum = 0;\\n    u = Q.u ?? 5;// the value that gives 50% on the logistic cdf\\n    s = Q.s ?? 3;// the standard deviation on the logistic cdf\\n\\n    adjusted = []\\n    total = 0;\\n    for (var i=0; i<strengths.length; i++) {\\n        converted = logistic_convert(strengths[i],u,s)\\n        adjusted.push(converted)\\n        total += converted;\\n    }\\n\\n    return adjusted.map(i => i/total)\\n}\\n\\n\\n\\nfunction assign_percentages (raw_votes, n_seats) {\\n\\n    total_votes = sum_list(raw_votes);\\n    votes_per_seat = total_votes/n_seats;\\n\\n    remainders = raw_votes.map(i => i % votes_per_seat)\\n    whole_seats = piecewise_sub(raw_votes, remainders).map(i => i/votes_per_seat)\\n\\n    unassigned = n_seats - sum_list(whole_seats)\\n\\n    for (var i=0; i<unassigned; i++){\\n        var idx = remainders.reduce((iMax, x, i, arr) => x > arr[iMax] ? i : iMax, 0);\\n        whole_seats[idx]+=1;\\n        remainders[idx]=0;\\n    }\\n    return whole_seats.map(i => Math.round(i));\\n}\\n\\nfunction generic_vote(electorate = Q.electorates[8], district = 0, nseats = 100) {\\n    // Q.fudge_factor\\n    // 1. get interest + ideology strengths by demographic\\n    // 2. get size of interest group\\n    // 3. get size of ideologies\\n    if (typeof electorate === \'number\') {\\n        electorate = Q.electorates[electorate];\\n    }\\n\\n    demo_groups = electorate.slice(0, Q.demo_names.length);\\n    votes_in_interest_groups = electorate.slice(Q.demo_names.length, electorate.length - 1);\\n    votes_in_ideologies = [ 0,0,0,0,0,0,0,0,0 ] ;\\n    total_apathy_votes = 0;\\n    party_votes = [ 0,0,0,0,0 ];\\n\\n    if (electorate[electorate.length] = \\"p\\") {\\n        if (district != 0){demo_groups = Q.dvar_list[district-1];\\n        } else {demo_groups =piecewise_sum(Q.dvar_list)}\\n    }\\n\\n\\n    // 1. get interest + ideology strengths by demographic\\n\\n    interest_strength = Q.interest_strength ?? 20; // baseline strength of interest groups, shouldn\'t change too much but might\\n    meme_strengths = ideology_strengths();\\n    meme_total_strength = sum_list(meme_strengths) ?? 0;\\n\\n    // first we assign all the demographic vote into interest groups or ideologies\\n    for (var i = 0; i < demo_groups.length; i++) {\\n        electorate_size = demo_groups[i];\\n        if (electorate_size > 0) {\\n            interest_adjustment = Q.interest_adjustments[i] // how much interest group drives the demo\\n            // TODO: replace this with a prosperity adjusted guild affinities\\n            interest_group_memberships = Q.interest_group_memberships[i];\\n            strengths = motivation_percentages(interest_strength, meme_total_strength, interest_adjustment);\\n\\n            demo_all_interest_votes = strengths[0] * electorate_size;\\n            demo_all_ideology_votes = strengths[1] * electorate_size;\\n            demo_all_apathy_votes = strengths[2] * electorate_size;\\n\\n            // assign to different interest groups\\n            new_interest_votes = interest_group_memberships.map(i => i * demo_all_interest_votes);\\n            // assign to different ideology types\\n            new_ideology_votes = meme_strengths.map(i => i * demo_all_ideology_votes);\\n\\n            votes_in_interest_groups = piecewise_add(votes_in_interest_groups, new_interest_votes);\\n            votes_in_ideologies = piecewise_add(votes_in_ideologies, new_ideology_votes);\\n            total_apathy_votes = total_apathy_votes + demo_all_apathy_votes;\\n        }\\n    }\\n\\n    // then we go through each interest group and each ideology and assign them to the five different parties\\n\\n    for (var i = 0; i < Q.interest_group_voting_habits.length; i++) {\\n        habits = Q.interest_group_voting_habits[i]\\n        group_votes = votes_in_interest_groups[i]\\n\\n        if (group_votes>0) {\\n        ideology_percentages = cdf_normalize(habits);\\n        new_votes = ideology_percentages.map( i => i * group_votes)\\n        party_votes = piecewise_add(party_votes, new_votes)\\n\\n        // interest_name = Q.interest_names[i];\\n        // console.log(interest_name, habits, group_votes)\\n        // console.log(interest_name, new_votes)\\n\\n        }\\n    }\\n\\n    for (var i = 0; i < Q.meme_names.length; i++) {\\n        habits = Q.ideology_voting_habits[i]\\n        group_votes = votes_in_ideologies[i]\\n\\n        if (group_votes>0) {\\n        ideology_percentages = cdf_normalize(habits);\\n        new_votes = ideology_percentages.map( i => i * group_votes)\\n        party_votes = piecewise_add(party_votes, new_votes)\\n\\n        // ideology_name = Q.meme_names[i];\\n        // console.log(ideology_name, habits, group_votes)\\n        // console.log(ideology_name, new_votes)\\n        }\\n    }\\n\\n    seats = assign_percentages(party_votes, nseats);\\n\\n    return [seats, party_votes, votes_in_interest_groups, votes_in_ideologies]\\n\\n\\n}\\n\\nfunction update_projections(){\\n\\n    // executive seats\\n    executive_seats = Q.executive_seats ?? 140;\\n    result = generic_vote(electorate=8, district=0, nseats=executive_seats);\\n    Q.projections.executive = result[0];\\n\\n    //guild seats\\n    for (var i = 0; i < 8; i++){\\n        color = Q.guild_colors[i];\\n        result = generic_vote(electorate=i, district=0, nseats=Q.guild_seats[i]);\\n        Q.projections[\'guild_\'+color]=result[0];\\n    }\\n\\n    //geographic seats\\n    for (var i = 1; i < 8; i++){\\n        result = generic_vote(electorate=9, district=i, nseats=20);\\n        Q.projections[\'district_\'+i]=result[0];\\n    }\\n}\\n\\nupdate_projections();\\n\\n\\nQ.has_event = 0;\\n// check if there are any cards in #event, and then go to main if not.\\nvar scene = this.game.scenes[\'post_event.events_choice\'];\\nvar choices = this._compileChoices(scene);\\nif (choices && choices[0].title != \\"Continue...\\") {\\n    Q.has_event = 1;\\n} else {\\n    has_event = 0;\\n}\\n// pre-load all of the event images\\nif (this.ui && this.ui.show_portraits) {\\n    for (var choice of choices) {\\n        var cc = this.game.scenes[choice.id];\\n        if (cc.faceImage) {\\n            var im = new Image();\\n            im.url = cc.faceImage;\\n        }\\n    }\\n}\\n\\nif (typeof window !== \\"undefined\\" && window.generateBar) {\\n}"}],"goTo":[{"id":"post_event.events_choice","predicate":{"$code":"return ((Q[\'has_event\'] || 0)===1);"}},{"id":"main","predicate":{"$code":"return (((Q[\'has_event\'] || 0)===0) && ((Q[\'difficulty\'] || 0) >= 0));"}},{"id":"main.main_easy","predicate":{"$code":"return (((Q[\'has_event\'] || 0)===0) && ((Q[\'difficulty\'] || 0) < 0));"}}],"content":{"content":{"type":"heading","content":["",{"type":"insert","insert":0}," ",{"type":"insert","insert":1},""]},"stateDependencies":[{"type":"insert","fn":{"$code":"return (Q[\'month\'] || 0);"},"qdisplay":"month"},{"type":"insert","fn":{"$code":"return (Q[\'year\'] || 0);"}}]}},"return":{"id":"return","type":"scene","title":"Back to main","goTo":[{"id":"root"}],"onArrival":[{"$code":"if (((Q[\'difficulty\'] || 0) < 0) ) { Q[\'month_actions\'] = (Q[\'month_actions\'] || 0) - 1; }"}],"content":{"content":"","type":"paragraph"}},"set_next_election_time":{"id":"set_next_election_time","type":"scene","title":"next election time","onArrival":[{"$code":"if (((Q[\'next_election_time\'] || 0) >= ((Q[\'time\'] || 0) + (Q[\'time_to_election\'] || 0))) ) { Q[\'next_election_time\'] = ((Q[\'time\'] || 0) + (Q[\'time_to_election\'] || 0)); } \\n if (((Q[\'next_election_time\'] || 0) >= ((Q[\'time\'] || 0) + (Q[\'time_to_election\'] || 0))) ) { Q[\'next_election_month\'] = ((Q[\'month\'] || 0) + 3); } \\n if (((Q[\'next_election_time\'] || 0) >= ((Q[\'time\'] || 0) + (Q[\'time_to_election\'] || 0))) ) { Q[\'next_election_year\'] = (Q[\'year\'] || 0); } \\n if (((Q[\'next_election_month\'] || 0) > 12) ) { Q[\'next_election_year\'] = (Q[\'next_election_year\'] || 0) + 1; } \\n if (((Q[\'next_election_month\'] || 0) > 12) ) { Q[\'next_election_month\'] = (Q[\'next_election_month\'] || 0) - 12; }"}],"content":{"content":"","type":"paragraph"}},"root.start_menu":{"id":"root.start_menu","newPage":true,"goTo":[{"id":"root.start_menu_2"}],"content":{"type":"heading","content":"Mikasa Democracy: A Future History"}},"xenophobia":{"id":"xenophobia","type":"scene","content":[{"type":"paragraph","content":"(..0.06) Welcome"},{"type":"paragraph","content":"(0.06..0.19) Acceptance"},{"type":"paragraph","content":"(0.19..0.31) Tolerance"},{"type":"paragraph","content":"(0.31..0.41) Apathy"},{"type":"paragraph","content":"(0.41..0.54) Suspicion"},{"type":"paragraph","content":"(0.54..0.71) Shunning"},{"type":"paragraph","content":"(0.71..0.95) Hatred"},{"type":"paragraph","content":"(0.95..) Violence"}]},"violence":{"id":"violence","type":"scene","content":[{"type":"paragraph","content":"(1) A car bomb attack"},{"type":"paragraph","content":"(2) A public assassination with collaterol damage"},{"type":"paragraph","content":"(3) A violent facility raid"}]},"jacobs.jacobs_renovate":{"id":"jacobs.jacobs_renovate","title":"Streamline infrastructure","subtitle":"More with less.","onArrival":[{"$code":"Q[\'district1_infra\'] = (Q[\'district1_infra\'] || 0) + 0.1;\\nQ[\'district2_infra\'] = (Q[\'district2_infra\'] || 0) + 0.1;\\nQ[\'district3_infra\'] = (Q[\'district3_infra\'] || 0) + 0.1;\\nQ[\'district4_infra\'] = (Q[\'district4_infra\'] || 0) + 0.1;\\nQ[\'district5_infra\'] = (Q[\'district5_infra\'] || 0) + 0.1;\\nQ[\'district6_infra\'] = (Q[\'district6_infra\'] || 0) + 0.1;\\nQ[\'district7_infra\'] = (Q[\'district7_infra\'] || 0) + 0.1;"}],"content":{"content":"Jacobs helps streamline our infrastructure maintenance keeping up with the demands of a rising population","type":"paragraph"}},"jacobs":{"id":"jacobs","type":"scene","title":"Jason Jacobs","isPinnedCard":true,"tags":["advisor","nerds"],"cardImage":"img/asteroid.jpg","newPage":true,"viewIf":{"$code":"return ((Q[\'jacobs_advisor\'] || 0) > 0);"},"options":[{"id":"@jacobs.jacobs_renovate"}],"content":{"content":[{"type":"heading","content":"Jason Jacobs"},{"type":"paragraph","content":[{"type":"insert","insert":0}," actions"]}],"stateDependencies":[{"type":"insert","fn":{"$code":"return (Q[\'jacobs_advisor\'] || 0);"}}]}},"stacy.stacy_raid_corpos":{"id":"stacy.stacy_raid_corpos","title":"Raid Corporations","subtitle":"Stacy could disrupt corporate operations","chooseIf":{"$code":"return ((Q[\'hidden_funds\'] || 0) > 0);"},"unavailableSubtitle":"We lack the funds","onArrival":[{"$code":"Q[\'corpo_anger\'] = (Q[\'corpo_anger\'] || 0) + 1;\\nQ[\'corpo_strength\'] = (Q[\'corpo_strength\'] || 0) - 1;\\nQ[\'hidden_funds\'] = (Q[\'hidden_funds\'] || 0) - 1;\\nQ[\'stacy_advisor\'] = (Q[\'stacy_advisor\'] || 0) - 1;"}],"content":{"content":"Stacy launches a choatic raid on the corpos","type":"paragraph"}},"callista.callista_smuggle":{"id":"callista.callista_smuggle","title":"Smuggling","subtitle":"Callista lets us hire the clans to move supplies without the offworlders knowing","chooseIf":{"$code":"return ((Q[\'hidden_funds\'] || 0) > 0);"},"unavailableSubtitle":"We lack the funds","onArrival":[{"$code":"Q[\'rebel_militancy\'] = (Q[\'rebel_militancy\'] || 0) + 0.05;\\nQ[\'callista_advisor\'] = (Q[\'callista_advisor\'] || 0) - 1;"}],"content":{"content":"We are gathering supplies","type":"paragraph"}},"corp_conflict":{"id":"corp_conflict","type":"scene","title":"Corporate Violence","newPage":false,"onArrival":[{"$code":"if (soylent_magrail_rel < 0) {\\n    district3_infra += soylent_magrail_rel/10;\\n    district4_infra += soylent_magrail_rel/10;\\n}\\n\\nif (soylent_brazos_rel < 0) {\\n    district3_infra += soylent_magrail_rel/10;\\n    district6_infra += soylent_magrail_rel/10;\\n}\\n\\nif (magrail_brazos_rel < 0) {\\n    district4_infra += soylent_magrail_rel/10;\\n    district6_infra += soylent_magrail_rel/10;\\n}"}],"content":{"content":"","type":"paragraph"}},"corporate_infighting":{"id":"corporate_infighting","type":"scene","title":"Corporate violence","subtitle":"Corporate Infighting Flares up","onArrival":[{"$code":"Q.drone_dissent -= 1"}],"tags":["event"],"viewIf":{"$code":"return (((Q[\'year\'] || 0)===2300) && ((Q[\'month\'] || 0)===1));"},"priority":1,"maxVisits":1,"content":{"content":"The corporations are fighting each other but it\'s mostly innocent bystanders getting hurt","type":"paragraph"},"countVisitsMax":1},"new_year":{"id":"new_year","type":"scene","title":"New Year","subtitle":{"content":["The year ",{"type":"insert","insert":0}],"stateDependencies":[{"type":"insert","fn":{"$code":"return (Q[\'year\'] || 0);"}}]},"onArrival":[{"$code":"// see post_event.scene.dry for changes.\\n\\nQ.hidden_funds += 1"}],"tags":["event"],"viewIf":{"$code":"return ((Q[\'month\'] || 0)===1);"},"priority":1,"maxVisits":1,"content":{"content":[{"type":"paragraph","content":["The year ",{"type":"insert","insert":0}," starts. The corporations and gangs are at each other\'s throats. Perhaps they will distract each other enough that the government could break free of their domination."]},{"type":"paragraph","content":"go-to: election_simulation"}],"stateDependencies":[{"type":"insert","fn":{"$code":"return (Q[\'year\'] || 0);"}}]},"countVisitsMax":1},"syndicate_infighting":{"id":"syndicate_infighting","type":"scene","title":"Syndicate violence","subtitle":"Gang wars cause mayhem","onArrival":[{"$code":"Q.second_wave_prosperity -= 1;"}],"tags":["event"],"viewIf":{"$code":"return ((((Q[\'month\'] || 0) == 6)) && (((Q[\'year\'] || 0) == 2300)));"},"priority":1,"maxVisits":1,"content":{"content":"Gang violence has flared up, in particular hitting the second wave refugee communities hard.","type":"paragraph"},"countVisitsMax":1},"2300_election":{"id":"2300_election","type":"scene","title":"2300 election","subtitle":"An opportunity?","priority":-1,"maxVisits":1,"tags":["event"],"viewIf":{"$code":"return (((Q[\'Fmonth\'] || 0)===12) && ((Q[\'year\'] || 0)===2300));"},"goTo":[{"id":"election_simulation"}],"content":{"content":"","type":"paragraph"},"countVisitsMax":1},"september_convention.explain":{"id":"september_convention.explain","options":[{"id":"@september_convention.ban","title":"I dont know what the hell these people are doing but it can\'t be good"},{"id":"@september_convention.permit","title":"Allow it! Dont falsely accuse this autodictat of autodictatism!"}],"content":{"type":"paragraph","content":[{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(243, 105, 229);\\" title=\\"A autodidact polymath who is a leading expert in non-binary Aretical structures. She is also the heir to the senior branch of the ancient Lunar family (distinct from the neo-Novo-Luno branch), leading shareholders of the March Corporation.\\">September Novo-Luna</span>"}," is trying to organize a convention on the 10th to discuss the ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(105, 173, 78);\\" title=\\"An academic theory that Jovian culture became averse to cultural elements that they believed were related to earth but in fact orginated within the moons of Jupiter. This was first proposed by MIT scholar Dr. Atticus Siloh at the Aretical conference of Terrestrial studies held at Shiloh University.\\">Jovian autodictation hypothesis</span>"},". This timing would be just before ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(62, 34, 203);\\" title=\\"The 17 year old great-granddaughter and sole surviving scion of Reginald Young. This makes her the sole surviving member of the junior (\'distaff\') branch of the Older Order, those descended from 21st century author Malka Older who wrote speculative fiction describing a hypothetical 23rd century society.\\">Regina Old</span>"},"\'s eulogy at the penultimate day of observance for ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(137, 137, 48);\\" title=\\"A deceased late night news host who is the great-grandson of Malka Older, a 21st century speculative fiction author. He served as President of the Juvenal Older an office primarily concerned with giving a satirical eulogy before the Biannual Reception held every year in honor of Sayyed Biannual.\\">Reginald Young</span>"},". The Young cremation is scheduled three days after the ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(82, 241, 255);\\" title=\\"a ritual sheering of a sheep, inspired by purification rituals from antiquity.\\">lustrum</span>"}," of the ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(123, 243, 105);\\" title=\\"A philanthropic organization formed around the recreation of festivals from early human history, named after the traditional practice of the Lustrum which tradition used to anachronistically believe was held on the first day of the Severian Calender every five years but which is now typically practiced around midwinter of every four synods of a modern lunar calender of Shackleton City.\\">March Corporation</span>"},". This confluence of academic events would mean that if ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(243, 105, 229);\\" title=\\"A autodidact polymath who is a leading expert in non-binary Aretical structures. She is also the heir to the senior branch of the ancient Lunar family (distinct from the neo-Novo-Luno branch), leading shareholders of the March Corporation.\\">September Novo-Luna</span>"},"\'s convention was organized this would likely be the largest gathering of ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(255, 63, 63);\\" title=\\"The martian academic movement to study the way that native born residents of the Jovian moons attributed greater significance to cultural touchstones believed to come from earth compared to relatively low importance that first generation immigrants from earth gave those cultural touchstones.\\">Terrestrial</span>"}," academics since the settling of Mikasa ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(28, 72, 32);\\" title=\\"Swahili word meaning tragedy in English.\\">Mikasa</span>"}," and the largest academic conference since the ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(28, 72, 32);\\" title=\\" A corporation that mysterious stopped all operations a decade ago. It\'s reclusive owners were all made persona non gratia in Mikasa.\\">Aurora Bank</span>"}," went defunct. The ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(65, 92, 67);\\" title=\\"Those with the wealth to qualify for full corporate citizenship in Mikasa, originally refering to those owning shares in Aurora Bank.\\">shareholders</span>"}," are worried about this gathering, claiming it is too many potential ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(98, 0, 0);\\" title=\\"An anticorporate movement in the mid 22nd century, often referred to as an anticorporate bogeyman.\\">stakeholders</span>"}," in one place. The ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(243, 105, 229);\\" title=\\"Title for the spokesperson of the March Corporation.\\">November</span>"}," has made a statement saying that ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(243, 105, 229);\\" title=\\"A autodidact polymath who is a leading expert in non-binary Aretical structures. She is also the heir to the senior branch of the Luno family, leading shareholders of the March Corporation.\\">September Novo-Luna</span>"},"\'s convention will not permit any discussion of ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(112, 0, 0);\\" title=\\"The practice of non compliance with corporations, named after an early 22nd century homeschooling movement that was a precursor to the shareholders.\\">autodidactism</span>"}," at the convention. They say such fears are ironically just an example of the very autodictation they study and shows the need to expand dialogue with the ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(47, 167, 248);\\" title=\\"A society of acedemics whose name is a tongue in cheek reference to a printing error in the early posters from the Guianease organization first advertizing to Hisphanophone students from Quebec when forming their first chapters at the College of New Caledonia in the USNW reconstruction zone (formerly British Columbia). They study the influence of ancient (21st century) speculative fiction depicting future (now contemporary) settlement of extraterrestrial worlds.\\">Juvenal Older</span>"}," in order to further ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(51, 180, 255);\\" title=\\"The martian academic movement to study the way that native born residents of the Jovian moons attributed greater significance to cultural touchstones believed to come from Earth compared to relatively low importance that first generation immigrants from Earth gave those cultural touchstones.\\">Terrestrial</span>"}," studies for the benefit of the ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(225, 117, 209);\\" title=\\"Concerned with the coevolution of non-terrestrial culture as distinct from their coevolution with Earth.\\">non-binary academic community</span>"}," of ",{"type":"magic","content":"<span class=\\"tooltip-text\\" style=\\"color:rgb(0, 147, 12);\\" title=\\"Japanese word meaning beauty in English.\\">Mikasa</span>"},"."]}},"mss_dundalk_affair.justice_reform":{"id":"mss_dundalk_affair.justice_reform","title":"Purge corruption from our legal system","onArrival":[{"$code":"Q[\'budget\'] = (Q[\'budget\'] || 0) + 2;\\nQ[\'excitement\'] = (Q[\'excitement\'] || 0) + 1;"}],"goTo":[{"id":"mss_dundalk_affair.after_message"}],"content":[{"type":"paragraph","content":"Attacking the corrupt judiciary is a safe course of action right now. The guilty parties resign and their replacements swiftly move to impound the Dundalk. At the impromptu celebrations afterwards people wonder if this might be the start of something more."},{"type":"paragraph","content":"We dont stir up any trouble but some wonder if we should have been more daring."}]},"shuffle_cabinet.shuffle":{"id":"shuffle_cabinet.shuffle","onArrival":[{"$code":"Q[\'coalition_dissent\'] = (Q[\'coalition_dissent\'] || 0) + 1;\\nQ[\'month_actions\'] = (Q[\'month_actions\'] || 0) + 1;"}],"goTo":[{"id":"main"}],"content":{"content":"","type":"paragraph"}},"shuffle_cabinet":{"id":"shuffle_cabinet","type":"scene","title":"Shuffle Cabinet","newPage":true,"isCard":true,"tags":["govt_affairs","cabinet"],"onArrival":[{"$code":"Q[\'shuffle_cabinet_timer\'] = 6;"}],"viewIf":{"$code":"return (((((((Q[\'spd_in_government\'] || 0) == 1) && ((Q[\'shuffle_cabinet_timer\'] || 0) == 0)) && (Q[\'chancellor_party\'] == \\"SPD\\")) && (!(((Q[\'in_spd_majority\'] || 0)) !== 0))) && (!(((Q[\'in_emergency_government\'] || 0)) !== 0))) && (!(((Q[\'in_left_front\'] || 0)) !== 0)));"},"cardImage":"img/muller_cabinet.jpg","options":[{"id":"@shuffle_cabinet.shuffle","title":"Yes, do it."},{"id":"@root","title":"No, there is no need."},{"id":"@easy_discard"},{"id":"@cancel_advisor_action"}],"content":{"content":[{"type":"paragraph","content":"Do we wish to shuffle our cabinet? This might upset our current coalition."},{"type":"paragraph","content":"Current cabinet:"},{"type":"paragraph","content":["Labor: ",{"type":"insert","insert":0},""]},{"type":"paragraph","content":["Interior: ",{"type":"insert","insert":1},""]},{"type":"paragraph","content":["Finance: ",{"type":"insert","insert":2},""]},{"type":"paragraph","content":["Economic: ",{"type":"insert","insert":3},""]},{"type":"paragraph","content":["Justice: ",{"type":"insert","insert":4},""]},{"type":"paragraph","content":["Foreign: ",{"type":"insert","insert":5},""]},{"type":"paragraph","content":["Reichswehr: ",{"type":"insert","insert":6},""]},{"type":"paragraph","content":["Agriculture: ",{"type":"insert","insert":7},""]}],"stateDependencies":[{"type":"insert","fn":{"$code":"return (Q[\'labor_minister_party\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'interior_minister_party\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'finance_minister_party\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'economic_minister_party\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'justice_minister_party\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'foreign_minister_party\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'reichswehr_minister_party\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'agriculture_minister_party\'] || 0);"}}]}},"advance":{"id":"advance","type":"scene","title":"Advance a month","newPage":true,"isCard":true,"isPinnedCard":true,"cardImage":"img/solar_system.png","onArrival":[{"$code":"Q.month += 1; if (Q.month>12){ Q.year += 1; Q.month -=12;}"}],"goTo":[{"id":"post_event.events_choice"}],"content":{"content":"","type":"paragraph"}},"shuffle_leadership.stop":{"id":"shuffle_leadership.stop","title":"Stop changing advisors.","goTo":[{"id":"root"}],"tags":["remove_advisor"],"content":{"content":"","type":"paragraph"}},"shuffle_leadership_pinned":{"id":"shuffle_leadership_pinned","type":"scene","title":"Shuffle Leadership","newPage":true,"isCard":true,"isPinnedCard":true,"onArrival":[{"$code":"Q[\'month_activities\'] = (Q[\'month_activities\'] || 0) + 1;\\nQ[\'shuffle_leadership_timer\'] = 6;"}],"cardImage":"img/film_noir.jpg","goTo":[{"id":"shuffle_leadership"}],"content":{"content":"","type":"paragraph"}},"community_outreach.first_wave_community":{"id":"community_outreach.first_wave_community","title":"Calm the first wave settlers","subtitle":"Japanese, European, American","onArrival":[{"$code":"Q[\'first_wave_dissent\'] = (Q[\'first_wave_dissent\'] || 0) - 10;\\nQ[\'first_wave_strength\'] = (Q[\'first_wave_strength\'] || 0) + 1;"}],"content":[{"type":"paragraph","content":"The first settlers were Japanese, whose numbers were joined by European and American colonists. They are some of the best established and most prosperous people of Mikasa but the rivalries created by the chaos on earth leads to resentments in space, both between each other and towards the more recent arrivals."},{"type":"paragraph","content":"By mediating and addressing private disputes and small conflicts, we have reduced unrest in this community."}]},"ward_infrastructure.repair_docks":{"id":"ward_infrastructure.repair_docks","title":"The wealthy surface areas around the Docks","subtitle":"This could molify the corporations about other spending","chooseIf":{"$code":"return ((((Q[\'budget\'] || 0) > 0)) && (((Q[\'docks_selected\'] || 0) == 0)));"},"onArrival":[{"$code":"Q[\'docks_selected\'] = (Q[\'docks_selected\'] || 0) + 1;\\nQ[\'budget\'] = (Q[\'budget\'] || 0) - 1;\\nQ[\'district1_infra\'] = (Q[\'district1_infra\'] || 0) + 1;"}],"goTo":[{"id":"ward_infrastructure"}],"content":{"content":"","type":"paragraph"}},"status":{"id":"status","type":"scene","title":"Status","newPage":true,"isSpecial":true,"onArrival":[{"$code":"C_exec = Q.projections.executive[0];\\nG_exec = Q.projections.executive[1];\\nD_exec = Q.projections.executive[2];\\nH_exec = Q.projections.executive[3];\\nI_exec = Q.projections.executive[4];"}],"content":{"content":[{"type":"heading","content":"Status"},{"type":"paragraph","content":[{"type":"insert","insert":0}," ",{"type":"insert","insert":1},""]},{"type":"heading","content":"Seat Projections:"},{"type":"paragraph","content":"Executive"},{"type":"paragraph","content":[{"type":"magic","content":"<span style=\\"color: #44b88f;\\">corp</span>"},": ",{"type":"insert","insert":2},""]},{"type":"paragraph","content":[{"type":"magic","content":"<span style=\\"color: #cf6e19;\\">Gang</span>"},": ",{"type":"insert","insert":3},""]},{"type":"paragraph","content":[{"type":"magic","content":"<span style=\\"color: #1100cc;\\">Democrat</span>"},": ",{"type":"insert","insert":4},""]},{"type":"paragraph","content":[{"type":"magic","content":"<span style=\\"color: #c00000;\\">Hate</span>"},": ",{"type":"insert","insert":5},""]},{"type":"paragraph","content":[{"type":"magic","content":"<span style=\\"color: #404040;\\">Ind</span>"},": ",{"type":"insert","insert":6},""]}],"stateDependencies":[{"type":"insert","fn":{"$code":"return (Q[\'month\'] || 0);"},"qdisplay":"month"},{"type":"insert","fn":{"$code":"return (Q[\'year\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'C_exec\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'G_exec\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'D_exec\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'H_exec\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'I_exec\'] || 0);"}}]}},"election_simulation.post_election":{"id":"election_simulation.post_election","content":{"content":[{"type":"paragraph","content":"The results are based on executive (oligarchic), functional (professional) and geographic (democratic) constituencies"},{"type":"paragraph","content":[{"type":"emphasis-2","content":"Election results:"},""]},{"type":"paragraph","content":"total"},{"type":"paragraph","content":["SDF: ",{"type":"insert","insert":0}," seats"]},{"type":"paragraph","content":["DCA: ",{"type":"insert","insert":1}," seats"]},{"type":"paragraph","content":["GOP: ",{"type":"insert","insert":2}," seats"]},{"type":"paragraph","content":["SRZP: ",{"type":"insert","insert":3}," seats"]},{"type":"paragraph","content":["LDPR: ",{"type":"insert","insert":4}," seats"]},{"type":"paragraph","content":["NPP: ",{"type":"insert","insert":5}," seats"]},{"type":"paragraph","content":["FTU: ",{"type":"insert","insert":6}," seats"]},{"type":"paragraph","content":["BPA: ",{"type":"insert","insert":7}," seats"]},{"type":"paragraph","content":"executive"},{"type":"paragraph","content":["SDF: ",{"type":"insert","insert":8}," seats"]},{"type":"paragraph","content":["DCA: ",{"type":"insert","insert":9}," seats"]},{"type":"paragraph","content":["GOP: ",{"type":"insert","insert":10}," seats"]},{"type":"paragraph","content":["SRZP: ",{"type":"insert","insert":11}," seats"]},{"type":"paragraph","content":["LDPR: ",{"type":"insert","insert":12}," seats"]},{"type":"paragraph","content":["NPP: ",{"type":"insert","insert":13}," seats"]},{"type":"paragraph","content":["FTU: ",{"type":"insert","insert":14}," seats"]},{"type":"paragraph","content":["BPA: ",{"type":"insert","insert":15}," seats"]},{"type":"paragraph","content":"functional"},{"type":"paragraph","content":["SDF: ",{"type":"insert","insert":16}," seats"]},{"type":"paragraph","content":["DCA: ",{"type":"insert","insert":17}," seats"]},{"type":"paragraph","content":["GOP: ",{"type":"insert","insert":18}," seats"]},{"type":"paragraph","content":["SRZP: ",{"type":"insert","insert":19}," seats"]},{"type":"paragraph","content":["LDPR: ",{"type":"insert","insert":20}," seats"]},{"type":"paragraph","content":["NPP: ",{"type":"insert","insert":21}," seats"]},{"type":"paragraph","content":["FTU: ",{"type":"insert","insert":22}," seats"]},{"type":"paragraph","content":["BPA: ",{"type":"insert","insert":23}," seats"]},{"type":"paragraph","content":"geographic"},{"type":"paragraph","content":["SDF: ",{"type":"insert","insert":24}," seats"]},{"type":"paragraph","content":["DCA: ",{"type":"insert","insert":25}," seats"]},{"type":"paragraph","content":["GOP: ",{"type":"insert","insert":26}," seats"]},{"type":"paragraph","content":["SRZP: ",{"type":"insert","insert":27}," seats"]},{"type":"paragraph","content":["LDPR: ",{"type":"insert","insert":28}," seats"]},{"type":"paragraph","content":["NPP: ",{"type":"insert","insert":29}," seats"]},{"type":"paragraph","content":["FTU: ",{"type":"insert","insert":30}," seats"]},{"type":"paragraph","content":["BPA: ",{"type":"insert","insert":31}," seats"]},{"type":"paragraph","content":["Corporate employee absention rate: ",{"type":"insert","insert":32},""]},{"type":"paragraph","content":"Party descriptions:"},{"type":"paragraph","content":"Democratic:"},{"type":"paragraph","content":"Social Democratic Forum (SDF)"},{"type":"paragraph","content":"Deeper-Democrats:"},{"type":"paragraph","content":"Deeper Community Association (DCA)"},{"type":"paragraph","content":"Links to Criminal Syndicates:"},{"type":"paragraph","content":"Five Families: Grand Old Party (GOP)"},{"type":"paragraph","content":"Bleeding Edges: Sozial Republik Zentrum Partie (SRZP)"},{"type":"paragraph","content":"Sharkskins: Liberal Democratic Party Registry (LDPR)"},{"type":"paragraph","content":"Corporate \\"United\\" Front"},{"type":"paragraph","content":"Community Soylent Incorperated: New People\'s Party of Mikasa (NPP)"},{"type":"paragraph","content":"Combined Magrail Trust: Mikasa Federation of Trade Unions (FTU)"},{"type":"paragraph","content":"Brazos Zaibatsu: Business and Professionals Alliance for Mikasa (BPA)"}],"stateDependencies":[{"type":"insert","fn":{"$code":"return (Q[\'SDF_total_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'DCA_total_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'GOP_total_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'SRZP_total_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'LDPR_total_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'NPP_total_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'FTU_total_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'BPA_total_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'SDF_executive_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'DCA_executive_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'GOP_executive_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'SRZP_executive_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'LDPR_executive_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'NPP_executive_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'FTU_executive_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'BPA_executive_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'SDF_functional_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'DCA_functional_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'GOP_functional_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'SRZP_functional_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'LDPR_functional_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'NPP_functional_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'FTU_functional_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'BPA_functional_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'SDF_geographic_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'DCA_geographic_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'GOP_geographic_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'SRZP_geographic_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'LDPR_geographic_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'NPP_geographic_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'FTU_geographic_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'BPA_geographic_seats\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'absention\'] || 0);"}}]}},"election_simulation":{"id":"election_simulation","type":"scene","title":"Election Simulation","setJump":"election_simulation.post_election","options":[{"id":"@election_simulation.2300","title":"2300"}],"content":{"content":"","type":"paragraph"}},"game_over.hitler_wins":{"id":"game_over.hitler_wins","viewIf":{"$code":"return ((((Q[\'chancellor\'] == \\"Hitler\\") || (Q[\'president\'] == \\"Hitler\\"))) && ((((Q[\'total_defeat\'] || 0) == 1) || ((Q[\'civil_war_seen\'] || 0) == 0))));"},"title":"Adolf Hitler is in undisputed control over Germany.","tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":[{"type":"paragraph","content":"Adolf Hitler is in undisputed control over Germany. The SPD, along with all of the democratic forces, have failed."},{"type":"paragraph","content":[{"type":"conditional","content":"At the very least, we fought back. Perhaps our resistance will be celebrated in an impossible-to-forsee future. ","predicate":0},""]}],"stateDependencies":[{"type":"predicate","fn":{"$code":"return ((Q[\'civil_war_seen\'] || 0) == 1);"}}]}},"main.party":{"id":"main.party","title":"Party Affairs","cardImage":"img/ballot.png","isDeck":true,"options":[{"id":"#party_affairs"}],"content":{"content":"","type":"paragraph"}},"root.start_menu_2":{"id":"root.start_menu_2","options":[{"id":"@root.start","title":"Start game"},{"id":"@election_simulation","title":"Election simulation"},{"id":"@credits","title":"Credits"},{"id":"@game_over.achievements"},{"id":"@root.test_function","title":"Test function"}],"content":{"content":"","type":"paragraph"}},"stacy.stacy_raid_syndicates":{"id":"stacy.stacy_raid_syndicates","title":"Raid Syndicates","subtitle":"Stacy could fight criminal organizations","chooseIf":{"$code":"return ((Q[\'hidden_funds\'] || 0) > 0);"},"unavailableSubtitle":"We lack the funds","onArrival":[{"$code":"syndicate_anger += 1; syndicate_strength -= 1; hidden_funds -= 1; stacy_advisor -= 1;\\nlet random_value = Math.random(1);\\nQ.text_value = 1+parseFlaot((random_value)).toFixed(1);"}],"content":{"content":{"type":"paragraph","content":["Stacy goes after the syndicates. ",{"type":"insert","insert":0}," ",{"type":"insert","insert":1},""]},"stateDependencies":[{"type":"insert","fn":{"$code":"return (Q[\'text_value\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'random_value\'] || 0);"}}]}},"callista.callista_demons":{"id":"callista.callista_demons","title":"Purge Demons","subtitle":"The clans of the mother describe their IT practices in a mystical fashion","chooseIf":{"$code":"return ((Q[\'hidden_funds\'] || 0) > 0);"},"unavailableSubtitle":"We lack the funds","onArrival":[{"$code":"Q[\'rebel_militancy\'] = (Q[\'rebel_militancy\'] || 0) + 0.05;\\nQ[\'callista_advisor\'] = (Q[\'callista_advisor\'] || 0) - 1;"}],"content":{"content":"The dead internet is now a little less dead","type":"paragraph"}},"callista":{"id":"callista","type":"scene","title":"Callista and Mei","isPinnedCard":true,"tags":["advisor","tunnel_clans"],"cardImage":"img/asteroid.jpg","newPage":true,"viewIf":{"$code":"return ((Q[\'callista_advisor\'] || 0) > 0);"},"options":[{"id":"@callista.callista_smuggle"}],"content":{"content":[{"type":"heading","content":"Callista and Mei"},{"type":"paragraph","content":"Callista is a rare member of the deep tunnel clans who travels among the \\"outsiders\\". She is an experienced roboticist and has \\"guardian spirit\\" AIs that have been adapting to her needs since soon after birth."},{"type":"paragraph","content":[{"type":"insert","insert":0}," actions"]}],"stateDependencies":[{"type":"insert","fn":{"$code":"return (Q[\'callista_advisor\'] || 0);"}}]}},"september_convention.ban":{"id":"september_convention.ban","content":{"content":"The academic are unhappy about academic freedom being curtailed. They blame both the megacorps and the city government.","type":"paragraph"}},"mss_dundalk_affair.anti_corp":{"id":"mss_dundalk_affair.anti_corp","title":"Careful and circumspect criticism of the megacorps","onArrival":[{"$code":"budget += 2;\\nexcitement += 1;\\nanti_corp += 2;\\nsoylent_anger +=0.10;\\nmagrail_anger += 0.10;\\nbrazos_anger += 0.10;\\nmartyrs.push(\\"Aisha Lee\\");"}],"goTo":[{"id":"mss_dundalk_affair.after_message"}],"content":[{"type":"paragraph","content":"Overtly criticizing the megacorps would be a swift path to a slander trial. But the proliferation of euphemisms leaves room for plausible deniability. A common talking point is how we can\'t return to harmony until the people get what they are owed. The people understand the oblique meaning and get whipped up into a frenzy. The courts imprison several scapegoats and impound the Dundalk. At the impromptu celebrations afterwards people wonder if this might be the start of something more."},{"type":"paragraph","content":"The corporations understand the double meaning as well. Several speakers suffer from street crime in the weeks after the rally. A particularly inflamatory speaker named Aisha Lee dies in what is called a suicide and becomes immortalized as a martyr."}]},"shuffle_leadership.hire_stacy":{"id":"shuffle_leadership.hire_stacy","title":"Hire Stacy Primogen","tags":["advisor"],"cardImage":"img/asteroid.jpg","onArrival":[{"$code":"Q[\'stacy_advisor\'] = (Q[\'stacy_advisor\'] || 0) + 1;"}],"content":{"content":"","type":"paragraph"}},"community_outreach.second_wave_community":{"id":"community_outreach.second_wave_community","title":"Stabilize second wave communities","subtitle":"Bantu, Middle Eastern, Southeastern Asian","onArrival":[{"$code":"Q[\'second_wave_prosperity\'] = (Q[\'second_wave_prosperity\'] || 0) + 1;\\nQ[\'second_wave_dissent\'] = (Q[\'second_wave_dissent\'] || 0) - 5;"}],"content":[{"type":"paragraph","content":"Mikasa and the other transsolar waystations became refugee destinations as the conflicts on Earth and the Jovian Moons worsened. Many of the refugees came from places that had no previous ties to Mikasa. The corporations were eager to have them come to serve as cheap labor but unconcerned with sustainable living conditions. Uprooted from their existing support networks they have struggled but over time new communities are emerging."},{"type":"paragraph","content":"Addressing shortfalls in Mikasa\'s infrastructure and making connections with local community leaders helps address the poor living conditions and conflicts among these groups."}]},"ward_infrastructure.repair_aurora":{"id":"ward_infrastructure.repair_aurora","title":"Aurora district and it\'s independent communities","chooseIf":{"$code":"return ((((Q[\'budget\'] || 0) > 0)) && (((Q[\'aurora_selected\'] || 0) == 0)));"},"subtitle":"Provide services to our base","onArrival":[{"$code":"Q[\'aurora_selected\'] = (Q[\'aurora_selected\'] || 0) + 1;\\nQ[\'budget\'] = (Q[\'budget\'] || 0) - 1;\\nQ[\'civilian_selected\'] = (Q[\'civilian_selected\'] || 0) + 1;\\nQ[\'district2_infra\'] = (Q[\'district2_infra\'] || 0) + 1;"}],"goTo":[{"id":"ward_infrastructure"}],"content":{"content":"","type":"paragraph"}},"game_over.war_against_hitler":{"id":"game_over.war_against_hitler","viewIf":{"$code":"return ((((Q[\'chancellor\'] == \\"Hitler\\") || (Q[\'president\'] == \\"Hitler\\"))) && (((Q[\'long_war\'] || 0) == 1)));"},"title":"Adolf Hitler is in power, but we are fighting to stop him.","tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"Adolf Hitler has taken power in Germany. However, we have rallied the democratic forces of the country against him, and are fighting back. The outcome of this war is uncertain.","type":"paragraph"}},"main.govt":{"id":"main.govt","title":"Government Affairs","cardImage":"img/chamber.jpg","isDeck":true,"options":[{"id":"#govt_affairs"}],"content":{"content":"","type":"paragraph"}},"root.test_function":{"id":"root.test_function","goTo":[{"id":"election_calculations"}],"content":{"content":"","type":"paragraph"}},"stacy.stacy_mob":{"id":"stacy.stacy_mob","title":"Create a mob","subtitle":"Stacy could get angry people on the streets","onArrival":[{"$code":"Q[\'hidden_funds\'] = (Q[\'hidden_funds\'] || 0) + 0;\\nQ[\'unrest\'] = (Q[\'unrest\'] || 0) + 1;\\nQ[\'stacy_advisor\'] = (Q[\'stacy_advisor\'] || 0) - 1;"}],"content":{"content":"Stacy creates a mob amped up on questionable energy drinks","type":"paragraph"}},"stacy":{"id":"stacy","type":"scene","title":"Stacy Primogen (Titan\'s Strongest Daughter)","isPinnedCard":true,"tags":["advisor","punk"],"cardImage":"img/asteroid.jpg","newPage":true,"viewIf":{"$code":"return ((Q[\'stacy_advisor\'] || 0) > 0);"},"options":[{"id":"@stacy.stacy_raid_corpos"},{"id":"@stacy.stacy_raid_syndicates"},{"id":"@stacy.stacy_mob"}],"content":{"content":[{"type":"heading","content":"Stacy Primogen"},{"type":"paragraph","content":"Stacy Primogen is a second generation offspring of the Jovian supersoldier project, incubated into a plutocratic Jovian family of arms dealers, she struck out on her own to become a mercenary and influencer."},{"type":"paragraph","content":[{"type":"insert","insert":0}," actions"]}],"stateDependencies":[{"type":"insert","fn":{"$code":"return (Q[\'stacy_advisor\'] || 0);"}}]}},"september_convention.permit":{"id":"september_convention.permit","content":{"content":"The academics steer clear of any anticorporate speech. The largest impact of their discussion is greater awareness of the non-binary movement in Mikasa. Nativist elements have been latching onto the non-binary academic tradition in recent years and are slightly encouraged by this convention even though most academics reject the nativist interpretations.","type":"paragraph"}},"september_convention":{"id":"september_convention","type":"scene","title":"September Convention","priority":1,"maxVisits":1,"tags":["event"],"newPage":true,"viewIf":{"$code":"return (((Q[\'month\'] || 0)===2) && ((Q[\'year\'] || 0)===2300));"},"options":[{"id":"@september_convention.explain","title":"Um... could I get an explanation?"},{"id":"@september_convention.ban","title":"Ban this conference. The Martians keep us out so turnabout is fair play."},{"id":"@september_convention.permit","title":"Allow it. Shareholders need to stop seeing stakeholders."}],"content":{"content":"A September Conference has been scheduled for February 10th, right after the largest March celebration of the year and just before the Old Young Older eulogy. The Shareholders suspect the autodidactat of being an Autodidact while the academic community insists they should be treated as stakeholders because they are not Stakeholders. The March November insists Lunar heritage is Jovian and fear of Autodidactism should not create Autodictation.","type":"paragraph"},"countVisitsMax":1},"mss_dundalk_affair.anti_crime":{"id":"mss_dundalk_affair.anti_crime","title":"Attack the criminal syndicates for eroding justice","onArrival":[{"$code":"budget += 2;\\nexcitement += 1;\\nanti_corp += 1;\\nanti_syndicate += 2;\\nmartyrs.push(\\"Platea Song\\");"}],"goTo":[{"id":"mss_dundalk_affair.after_message"}],"content":[{"type":"paragraph","content":"The speakers shout vitrol at the gangsters while many in the crowds mutter under their breath that the corporations are gangsters under a different name. The courts cave and impound the vessel. At the impromptu celebrations afterwards people wonder if this might be the start of something more."},{"type":"paragraph","content":"Syndicate hitmen attempt to publicly assassinate a particularly inflamatory speaker named Aisha Lee but are thwarted and lynched by members of the crowd. A young person named Platea Song dies stopping the assassination and becomes immortalized as a martyr."}]},"shuffle_leadership.hire_callista":{"id":"shuffle_leadership.hire_callista","title":"Hire Callista","tags":["advisor"],"cardImage":"img/asteroid.jpg","onArrival":[{"$code":"Q[\'callista_advisor\'] = (Q[\'callista_advisor\'] || 0) + 1;"}],"content":{"content":"","type":"paragraph"}},"shuffle_leadership":{"id":"shuffle_leadership","type":"scene","title":"Shuffle Leadership","newPage":true,"isCard":true,"tags":["party_affairs"],"viewIf":{"$code":"return (((Q[\'shuffle_leadership_timer\'] || 0)===0) && ((Q[\'difficulty\'] || 0) >= 0));"},"onArrival":[{"$code":"Q[\'month_activities\'] = (Q[\'month_activities\'] || 0) + 1;\\nQ[\'shuffle_leadership_timer\'] = 8;"}],"cardImage":"img/vorwarts_2.jpg","options":[{"id":"@shuffle_leadership.stop","title":"Done"},{"id":"@shuffle_leadership.hire_stacy","title":"hire stacy"},{"id":"@shuffle_leadership.hire_callista","title":"hire callista"},{"id":"@easy_discard"}],"content":[{"type":"paragraph","content":"Hire someone"},{"type":"paragraph","content":"Removing advisors will increase dissent from their faction of the party, while selecting advisors will increase a faction\'s strength."}]},"community_outreach.isolated_communities":{"id":"community_outreach.isolated_communities","title":"Outreach to isolated communities","subtitle":"Deepers and Tunnel Clans","onArrival":[{"$code":"Q[\'isolated_dissent\'] = (Q[\'isolated_dissent\'] || 0) - 5;"}],"content":{"content":"The deepers are a community that originally settled on a different site of the asteroid from the tether ground station. They intensely resent their annexation and desire a return to autonomy. The tunnel clans are communities that left the artificial gravity grid and hid themselves away deep in the embrace of the \\"mother\\". Their technical savviness could be an asset if we could overcome their isolation but this will be difficult as they can take care of their own and have little need for us.","type":"paragraph"}},"ward_infrastructure.repair_pits":{"id":"ward_infrastructure.repair_pits","title":"Repair the wartorn Pits district","chooseIf":{"$code":"return ((((Q[\'budget\'] || 0) > 0)) && (((Q[\'pits_selected\'] || 0) == 0)));"},"subtitle":"Provide services where the gang wars hit hardest","onArrival":[{"$code":"Q[\'pits_selected\'] = (Q[\'pits_selected\'] || 0) + 1;\\nQ[\'budget\'] = (Q[\'budget\'] || 0) - 1;\\nQ[\'civilian_selected\'] = (Q[\'civilian_selected\'] || 0) + 1;\\nQ[\'district5_infra\'] = (Q[\'district5_infra\'] || 0) + 1;"}],"goTo":[{"id":"ward_infrastructure"}],"content":{"content":"","type":"paragraph"}},"game_over.no_hitler":{"id":"game_over.no_hitler","viewIf":{"$code":"return ((((Q[\'chancellor\'] != \\"Hitler\\") && (Q[\'president\'] != \\"Hitler\\")) && (Q[\'president\'] != \\"Göring\\")) && (Q[\'chancellor_party\'] != \\"NSDAP\\"));"},"title":"Hitler does not yet control Germany...","tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":[{"type":"paragraph","content":["Hitler does not yet control Germany. ",{"type":"conditional","content":"However, Chancellor Papen\'s authoritarianism and far-right politics are paving the way for Hitler, or someone like him, to take power. ","predicate":0}," ",{"type":"conditional","content":"However, Chancellor Schleicher\'s authoritarianism and scheming is paving the way for Hitler, or someone like him, to take power. ","predicate":1},{"type":"conditional","content":"Given our defeat in the Prussian coup, the far-right appears to be ascendant. ","predicate":2},{"type":"conditional","content":"However, Chancellor Brüning\'s austerity policies and the continuation of the depression are paving the way for Hitler, or someone like him, to take power. ","predicate":3},""]},{"type":"paragraph","content":[{"type":"conditional","content":"We have deported Hitler back to Austria. Hopefully he will never return. ","predicate":4},""]}],"stateDependencies":[{"type":"predicate","fn":{"$code":"return (Q[\'chancellor\'] == \\"Papen\\");"}},{"type":"predicate","fn":{"$code":"return (Q[\'chancellor\'] == \\"Schleicher\\");"}},{"type":"predicate","fn":{"$code":"return (((((Q[\'resist_coup\'] || 0) == 1) && ((Q[\'republic_victory\'] || 0) == 0)) && ((Q[\'long_war\'] || 0) == 0)) && ((Q[\'coup_victory\'] || 0) == 0));"}},{"type":"predicate","fn":{"$code":"return (Q[\'chancellor\'] == \\"Brüning\\");"}},{"type":"predicate","fn":{"$code":"return ((Q[\'hitler_deported\'] || 0) == 1);"}}]}},"main.violence":{"id":"main.violence","title":"Corp/Syndicate Violence","cardImage":"img/collapse.jpg","isDeck":true,"options":[{"id":"#govt_affairs"}],"content":{"content":"","type":"paragraph"}},"main":{"id":"main","type":"scene","title":"Main","setBg":"img/solar_system.jpg","isHand":true,"maxCards":3,"options":[{"id":"@main.party"},{"id":"@main.govt"},{"id":"@shuffle_leadership_pinned"},{"id":"@advance"},{"id":"#advisor"}],"content":{"content":"","type":"paragraph"}},"root.start":{"id":"root.start","onArrival":[{"$code":"Q.started = 1;\\n// time elapsed (in months)\\nQ.time = 1;\\nQ.year = 2300;\\nQ.month = 1;\\n// how many actions have been taken this month?\\nQ.month_actions = 0;\\n\\n// 0 = normal difficulty, 1 = hard mode, 2 = hard mode no saves\\nQ.difficulty = 0;\\nQ.use_decimals = 0;\\n\\nQ.stacy_advisor = 1;\\n\\n// Intercorporate\\nQ.soylent_magrail_rel = -50\\nQ.soylent_brazos_rel = 10\\nQ.magrail_brazos_rel = 20\\n\\n// How much the corporations consider the government a problem\\nQ.soylent_anger = 0.05;\\nQ.magrail_anger = 0.05;\\nQ.brazos_anger = 0.05;\\n\\nQ.martyrs = [];\\n\\n// Syndicate policies\\nQ.government_families_rel = -75;\\nQ.government_edges_rel = 10;\\nQ.government_sharks_rel = 20;\\n\\nQ.soylent_families_rel = 20;\\nQ.soylent_edges_rel = 0;\\nQ.soylent_sharks_rel = 0;\\n\\nQ.magrail_families_rel = 10;\\nQ.magrail_edges_rel = 10;\\nQ.magrail_sharks_rel = 10;\\n\\nQ.brazos_families_rel = 10;\\nQ.brazos_edges_rel = -50;\\nQ.brazos_sharks_rel = 50;"}],"setBg":"img/solar_system.jpg","newPage":true,"options":[{"id":"@root.2300_main","title":"Begin (normal difficulty)"}],"content":[{"type":"quotation","content":["",{"type":"emphasis-1","content":"\\"They named it Mikasa, \'Beauty\'\\""},""]},{"type":"paragraph","content":"-Kenji Fukushima, JAXA engineer, 2115"},{"type":"paragraph","content":[{"type":"emphasis-1","content":"\\"They named it Mikasa, \'Tragedy\'\\""},""]},{"type":"paragraph","content":"-Asani Ubuntu, Earth refugee, 2282"},{"type":"paragraph","content":"This is a game of future history. While historical accuracy is a major concern, scrying is an inexact science so large amounts of guesswork and interpolation were required."}]},"mss_dundalk_affair.mikasa_first":{"id":"mss_dundalk_affair.mikasa_first","title":"Stir up anger at offworld exploitation","onArrival":[{"$code":"budget +=2;\\nexcitement += 2;\\nsoylent_anger -=0.10;\\nmagrail_anger -= 0.10;\\nbrazos_anger -= 0.10;\\nxenophobia += 2;"}],"goTo":[{"id":"mss_dundalk_affair.after_message"}],"content":{"content":"Stiring up anger about outsiders rallies the people behind the government in a way that the megacorps and syndicates can\'t object to. The courts imprison several scapegoats and impound the Dundalk. But attacking outsiders stokes the fires of xenophobia, clashes between communities is on the rise.","type":"paragraph"}},"community_outreach.drones_community":{"id":"community_outreach.drones_community","title":"Make inroads among the corporate employees","subtitle":"Hereditary worker caste","onArrival":[{"$code":"Q[\'drones_dissent\'] = (Q[\'drones_dissent\'] || 0) - 5;"}],"content":[{"type":"paragraph","content":"Most corporate employees on Mikasa work for the Big Three, Community Soylent, Magrail Combine and Brazos Universal. Corporate employeeship has become a hereditary caste that jealously guards their privledges and relative wealth over the underclass."},{"type":"paragraph","content":"Any efforts to reach out to this group will inevitably be called illegal labor organizing. Still there are more daring employees who have learned to keep things off the bosses radar."}]},"ward_infrastructure.repair_deeps":{"id":"ward_infrastructure.repair_deeps","title":"Repair the Deeps despite their isolation","chooseIf":{"$code":"return ((((Q[\'budget\'] || 0) > 0)) && (((Q[\'deeps_selected\'] || 0) == 0)));"},"subtitle":"Dont expect much gratitude","onArrival":[{"$code":"Q[\'deeps_selected\'] = (Q[\'deeps_selected\'] || 0) + 1;\\nQ[\'budget\'] = (Q[\'budget\'] || 0) - 1;\\nQ[\'civilian_selected\'] = (Q[\'civilian_selected\'] || 0) + 1;\\nQ[\'district7_infra\'] = (Q[\'district7_infra\'] || 0) + 1;"}],"goTo":[{"id":"ward_infrastructure"}],"content":{"content":"","type":"paragraph"}},"game_over.nsdap_win":{"id":"game_over.nsdap_win","viewIf":{"$code":"return ((Q[\'chancellor\'] == \\"Goebbels\\") || (Q[\'president\'] == \\"Göring\\"));"},"title":"Despite the deportation of Hitler, the Nazis have still taken power...","tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":{"type":"paragraph","content":["Despite the deportation of Hitler, the NSDAP has somehow still wormed its way into power. ",{"type":"conditional","content":"We are fighting them for control of Germany. ","predicate":0},""]},"stateDependencies":[{"type":"predicate","fn":{"$code":"return ((Q[\'long_war\'] || 0) == 1);"}}]}},"root.2300_main":{"id":"root.2300_main","newPage":true,"goTo":[{"id":"main","predicate":{"$code":"return ((Q[\'difficulty\'] || 0) >= 0);"}},{"id":"main.main_easy","predicate":{"$code":"return ((Q[\'difficulty\'] || 0) < 0);"}}],"content":[{"type":"heading","content":"2300"},{"type":"paragraph","content":"It is a dark time for humanity. Earth is mired in endless national conflicts while the off planet colonies are torn by violence between lawless corporations."},{"type":"paragraph","content":"As the corporations of the interplanetary waystation Mikasa become too distracted fighting each other, real power has started to fall into the hands of the city government for the first time in decades. Now our task is to somehow maintain this newfound autonomy while beating back corruption. Perhaps Mikasa might one day control the corporations instead of the other way around."}]},"root":{"id":"root","type":"scene","title":"Root Scene","newPage":true,"goTo":[{"id":"post_event","predicate":{"$code":"return ((Q[\'started\'] || 0)===1);"}},{"id":"root.start_menu","predicate":{"$code":"return ((Q[\'started\'] || 0)===0);"}}],"onArrival":[{"$code":"let empty = new Object;\\nQ.projections = empty\\n\\nfunction logistic_convert(x, u, s) {\\n    // logistic cdf function\\n    return 1 / (1 + Math.exp((u - x) / s));\\n}\\n\\n\\npiecewise_mult = (a, b) => a.map((x, i) => (a[i] || 0) * (b[i] || 0))\\npiecewise_add = (a, b) => a.map((x, i) => (a[i] || 0) + (b[i] || 0))\\npiecewise_sub = (a, b) => a.map((x, i) => a[i] - b[i])\\n\\nsum_list = (numbers) => numbers.reduce((sum, num) => (sum || 0) + (num || 0));\\n\\nfunction piecewise_sum(...lists_to_sum) {\\n    total = lists_to_sum[0]\\n    for (var i = 1; i < lists_to_sum.length; i++) {\\n        next_list = lists_to_sum[i] ?? [0] * total.length;\\n        total = piecewise_add(total, next_list);\\n    }\\n    return total\\n}\\n\\nfunction setup_demographics() {\\n\\n    Q.u = 5; // the value that gives 50% on the logistic cdf\\n    Q.s = 3; // the standard deviation on the logistic cdf\\n\\n    // in total 315 seats\\n    Q.executive_seats = 140;\\n    Q.guild_seats_total = 105;\\n    Q.geography_seats = 70;\\n\\n\\n    let interests = \\"share,moneyed,nerd,drone,coop,poor,gang,magic,faith\\".split(\\",\\");\\n    Q.interests = interests;\\n\\n    let memes = \\"progress,patriot,trade,autark,rebel,stake,vigil,reaction\\".split(\\",\\");\\n    Q.memes = memes;\\n\\n    districts = \\"docks,aurora,vats,railyard,the pits,limelight,the deeps,exurbs\\".split(\\",\\");\\n    Q.districts = districts;\\n\\n    let regional_parties = (\\"Academic Circle,Independents,Independents,Community Welfare,\\"\\n        + \\"Independents,Deeper Union,Clan Leaders\\").split(\\",\\");\\n\\n    // demos \'1st\',\'2nd\',\'drone\',\'deeper\',\'clan\',\'otherworld\',\'rich\'\\n    // the share of each demographic in each interest groups\\n    interest_group_memberships = [\\n        [0.01, 0, 0, 0.001, 0, 0, 50],//\\t\\tshare\\n        [0.01, 0, 0, 0.001, 0, 0, 25],//\\t\\tmoney\\n        [0, 0, 80, 0, 0, 0, 0],//\\t\\tdrone\\n        [10, 5, 1, 1, 90, 1, 1],//\\t\\tnerd\\n        [30, 15, 0, 30, 0, 1, 0],//\\t\\tcoop\\n        [15, 30, 0, 5, 0, 50,],//\\t\\tpoor\\n        [2, 5, 1, 1, 0, 10, 1],//\\t\\tgang\\n        [0.01, 0.01, 0.01, 0.01, 0.01, 10, 1],//\\t\\tmagic\\n        [10, 15, 5, 10, 0, 5, 5],//\\t\\tfaith\\n\\n    ]\\n    Q.interest_group_memberships = interest_group_memberships\\n\\n    electorate_names = [\'1st\', \'2nd\', \'drone\', \'deeper\', \'clan\', \'otherworld\', \'rich\', \'share\', \'money\', \'drone\', \'nerd\', \'coop\', \'poor\', \'gang\', \'magic\', \'faith\', \'weight_method\']\\n    electorates = [\\n        [20, 0, 0, 0, 0, 0, 50, 0, 0, 0, 20, 0, 0, 1, 1, 0, \\"s\\"],//\\t\\t\\tgold\\t,\\tfinance+legal\\n        [10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 20, 0, 0, 0, 1, 0, \\"s\\"],//\\t\\t\\tpink\\t,\\tmedical\\n        [5, 0, 0, 0, 0, 0, 15, 20, 0, 0, 0, 0, 0, 0, 0, 0, \\"s\\"],//\\t\\t\\tplatinum\\t,\\towners\\n        [10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 10, 0, 0, 0, 0, 0, \\"s\\"],//\\t\\t\\tblue\\t,\\tindustry work\\n        [5, 5, 90, 0, 0, 0, 0, 0, 0, 0, 10, 0, 0, 0, 0, 0, \\"s\\"],//\\t\\t\\twhite\\t,\\tcorp work\\n        [2, 2, 0, 2, 0, 0, 0, 0, 0, 0, 10, 5, 0, 0, 0, 0, \\"s\\"],//\\t\\t\\tgrey\\t,\\tfine craft\\n        [10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 0, 0, 0, \\"s\\"],//\\t\\t\\tgreen\\t,\\ttourism+retail\\n        [5, 5, 0, 0, 0, 0, 0, 0, 0, 0, 10, 0, 0, 0, 0, 0, \\"s\\"],//\\t\\t\\tbiege\\t,\\tgov\\n        [0, 0, 0, 0, 0, 0, 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, \\"s\\"],//\\t\\t\\tcomittee\\t,\\texecutive\\n        [1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, \\"p\\"],//\\t\\t\\tpublic\\t,\\tpublic\\n    ]\\n    Q.electorates = electorates\\n\\n    Q.guild_colors = [\'gold\', \'pink\', \'platinum\', \'blue\', \'white\', \'grey\', \'green\', \'biege\']\\n    Q.guild_seats = [ 15, 15, 10, 10, 15, 20, 10, 10]\\n\\n    // how each interest group is inclined to vote\\n    // corp,gang,demo,hate,ind tendencies (these get logcdf converted)\\n    Q.interest_group_voting_habits = [\\n        [20, -10, -1, 2, -10],//\\tshare\\n        [5, -5, 5, -5, -5],//\\tmoney\\n        [10, 0, 0, 1, -5],//\\tdrone\\n        [1, -5, 5, -5, -5],//\\tnerd\\n        [-10, -10, -10, 1, 10],//\\tcoop\\n        [-2, 1, -2, 1, -5],//\\tpoor\\n        [-10, 20, -10, -10, -10],//\\tgang\\n        [-2, 1, -2, -2, 2],//\\tmagic\\n        [0, 1, 0, 1, 2]//\\tfaith\\n    ]\\n    Q.interest_names = [\'share\', \'money\', \'drone\', \'nerd\', \'coop\', \'poor\', \'gang\', \'magic\', \'faith\'];\\n\\n    // how each ideology is inclined to vote\\n    // corp,gang,demo,hate,ind tendencies (these get logcdf converted)\\n    Q.ideology_voting_habits = [\\n        [-3,-5,-4,-5,1],//\\tprogress\\n        [2,2,2,2,10],//\\tpatriot\\n        [2,-10,0,-10,-10],//\\ttrade\\n        [-10,2,0,2,0],//\\tisolate\\n        [-20,-20,10,0,0],//\\trebel\\n        [-20,0,5,0,0],//\\tstakeholder\\n        [0,-20,5,0,0],//\\tvigil\\n        [10,5,-20,5,-10],//\\treactionary\\n\\n    ]\\n\\n\\n    demo_names = \\"1st,2nd,drone,deeper,coop,otherworld,rich\\".split(\\",\\")\\n    demo1=[42,13,10,1,1,1,17];\\n    demo2=[38,57,2,1,1,9,0];\\n    demo3=[28,71,2,1,1,0,0];\\n    demo4=[12,3,3,166,1,0,0];\\n    demo5=[28,19,48,1,1,0,1];\\n    demo6=[19,21,55,1,1,0,1];\\n    demo7=[24,17,52,1,1,0,1];\\n    demo_sums = piecewise_sum(demo1, demo2, demo3, demo4, demo5, demo6, demo7);\\n    dvar_list = [demo1, demo2, demo3, demo4, demo5, demo6, demo7];\\n\\n    Q.demo_sums = demo_sums;\\n    Q.demo_names = demo_names;\\n    Q.dvar_list = dvar_list;\\n\\n    // demo8=\\"0,0,0,50,0,0,0,0\\".split(\\",\\"); // clans of the mother aren\'t gonna be voting anyways\\n    // dvar_list = [demo1, demo2, demo3, demo4, demo5,demo6, demo7,demo8]\\n\\n\\n\\n    for (var district = 0; district < dvar_list.length; district++) {\\n        dname = \\"district_\\" + district + \\"_demographics\\";\\n        dvar = dvar_list[district];\\n        Q[dname] = Q[dname] ?? new Object;\\n\\n        for (var j = 0; j < 8; j++) {\\n            demo_name = demo_names[j];\\n            Q[dname][demo_name] = dvar[j];\\n        }\\n    }\\n\\n    // Q.demo_sums = demo1.map((v, i) => (v+demo2+demo3+demo4+demo5+demo6+demo7));\\n\\n    Q.shareholder_interest_adjustment = 5;\\n    Q.deeper_interest_adjustment = 3;\\n    Q.drones_interest_adjustment = -2;\\n\\n    // factor to make certain demographics be more or less motivated by interest groups\\n    // 1st,2nd,drone,deeper,coop,otherworld,rich\\n    interest_adjustments = [0, 0, -2, 3, 0, 0, 0, 0, 5];\\n    Q.interest_adjustments = interest_adjustments;\\n\\n    Q.interest_strength = 20 // 20%\\n    // Q.ideology_strength = 10 // 10%\\n\\n    // progress,patriot|trade,autark|rebel,stake,vigil\\n    Q.progress_meme_strength = 2;\\n    Q.patriot_meme_strength = 2;\\n    Q.trade_meme_strength = 1;\\n    Q.autark_meme_strength = 1;\\n    Q.rebel_meme_strength = .1;\\n    Q.stake_meme_strength = .1;\\n    Q.vigil_meme_strength = .1;\\n    Q.reactionary_meme_strength = 0;\\n\\n    Q.meme_names = [\'progress\',\'patriot\',\'trade\',\'isolate\',\'rebel\',\'stakeholder\',\'vigil\',\'reactionary\']\\n\\n}\\n\\n\\n\\nfunction logistic_convert(x, u, s) {\\n    // logistic cdf function\\n    return 1 / (1 + Math.exp((u - x) / s));\\n}\\n\\n\\npiecewise_mult = (a, b) => a.map((x, i) => (a[i] || 0) * (b[i] || 0))\\npiecewise_add = (a, b) => a.map((x, i) => (a[i] || 0) + (b[i] || 0))\\npiecewise_sub = (a, b) => a.map((x, i) => a[i] - b[i])\\n\\nsum_list = (numbers) => numbers.reduce((sum, num) => (sum || 0) + (num || 0));\\n\\nfunction motivation_percentages(interest_strength, ideology_strength, demo_adjust) {\\n\\n    if (demo_adjust >= 0) {\\n        interest_percent = 1 - (1 - interest_strength / 100) * .9 ** demo_adjust;\\n    } else {\\n        interest_percent = (interest_strength / 100) * .9 ** (-demo_adjust);\\n    }\\n\\n    ideology_percent = (1 - interest_percent) * ideology_strength / 100\\n\\n    if (interest_percent + ideology_percent > 1) {\\n        interest_percent = interest_percent / (interest_percent + ideology_percent)\\n        ideology_percent = ideology_percent / (interest_percent + ideology_percent)\\n    }\\n    apathy_percent = 1 - interest_percent - ideology_percent;\\n\\n    return [interest_percent, ideology_percent, apathy_percent]\\n}\\n\\nfunction ideology_strengths() {\\n    // how strong each ideology is in the current political scene\\n    return [\\n        Q.progress_meme_strength, Q.patriot_meme_strength,\\n        Q.trade_meme_strength, Q.autark_meme_strength,\\n        Q.rebel_meme_strength, Q.stake_meme_strength, Q.vigil_meme_strength\\n    ]\\n}\\n\\n\\n\\n\\nfunction cdf_normalize(strengths) {\\n    sum = 0;\\n    u = Q.u ?? 5;// the value that gives 50% on the logistic cdf\\n    s = Q.s ?? 3;// the standard deviation on the logistic cdf\\n\\n    adjusted = []\\n    total = 0;\\n    for (var i=0; i<strengths.length; i++) {\\n        converted = logistic_convert(strengths[i],u,s)\\n        adjusted.push(converted)\\n        total += converted;\\n    }\\n\\n    return adjusted.map(i => i/total)\\n}\\n\\n\\n\\nfunction assign_percentages (raw_votes, n_seats) {\\n\\n    total_votes = sum_list(raw_votes);\\n    votes_per_seat = total_votes/n_seats;\\n\\n    remainders = raw_votes.map(i => i % votes_per_seat)\\n    whole_seats = piecewise_sub(raw_votes, remainders).map(i => i/votes_per_seat)\\n\\n    unassigned = n_seats - sum_list(whole_seats)\\n\\n    for (var i=0; i<unassigned; i++){\\n        var idx = remainders.reduce((iMax, x, i, arr) => x > arr[iMax] ? i : iMax, 0);\\n        whole_seats[idx]+=1;\\n        remainders[idx]=0;\\n    }\\n    return whole_seats.map(i => Math.round(i));\\n}\\n\\nfunction generic_vote(electorate = Q.electorates[8], district = 0, nseats = 100) {\\n    // Q.fudge_factor\\n    // 1. get interest + ideology strengths by demographic\\n    // 2. get size of interest group\\n    // 3. get size of ideologies\\n    if (typeof electorate === \'number\') {\\n        electorate = Q.electorates[electorate];\\n    }\\n\\n    demo_groups = electorate.slice(0, Q.demo_names.length);\\n    votes_in_interest_groups = electorate.slice(Q.demo_names.length, electorate.length - 1);\\n    votes_in_ideologies = [ 0,0,0,0,0,0,0,0,0 ] ;\\n    total_apathy_votes = 0;\\n    party_votes = [ 0,0,0,0,0 ];\\n\\n    if (electorate[electorate.length] = \\"p\\") {\\n        if (district != 0){demo_groups = Q.dvar_list[district-1];\\n        } else {demo_groups =piecewise_sum(Q.dvar_list)}\\n    }\\n\\n\\n    // 1. get interest + ideology strengths by demographic\\n\\n    interest_strength = Q.interest_strength ?? 20; // baseline strength of interest groups, shouldn\'t change too much but might\\n    meme_strengths = ideology_strengths();\\n    meme_total_strength = sum_list(meme_strengths) ?? 0;\\n\\n    // first we assign all the demographic vote into interest groups or ideologies\\n    for (var i = 0; i < demo_groups.length; i++) {\\n        electorate_size = demo_groups[i];\\n        if (electorate_size > 0) {\\n            interest_adjustment = Q.interest_adjustments[i] // how much interest group drives the demo\\n            // TODO: replace this with a prosperity adjusted guild affinities\\n            interest_group_memberships = Q.interest_group_memberships[i];\\n            strengths = motivation_percentages(interest_strength, meme_total_strength, interest_adjustment);\\n\\n            demo_all_interest_votes = strengths[0] * electorate_size;\\n            demo_all_ideology_votes = strengths[1] * electorate_size;\\n            demo_all_apathy_votes = strengths[2] * electorate_size;\\n\\n            // assign to different interest groups\\n            new_interest_votes = interest_group_memberships.map(i => i * demo_all_interest_votes);\\n            // assign to different ideology types\\n            new_ideology_votes = meme_strengths.map(i => i * demo_all_ideology_votes);\\n\\n            votes_in_interest_groups = piecewise_add(votes_in_interest_groups, new_interest_votes);\\n            votes_in_ideologies = piecewise_add(votes_in_ideologies, new_ideology_votes);\\n            total_apathy_votes = total_apathy_votes + demo_all_apathy_votes;\\n        }\\n    }\\n\\n    // then we go through each interest group and each ideology and assign them to the five different parties\\n\\n    for (var i = 0; i < Q.interest_group_voting_habits.length; i++) {\\n        habits = Q.interest_group_voting_habits[i]\\n        group_votes = votes_in_interest_groups[i]\\n\\n        if (group_votes>0) {\\n        ideology_percentages = cdf_normalize(habits);\\n        new_votes = ideology_percentages.map( i => i * group_votes)\\n        party_votes = piecewise_add(party_votes, new_votes)\\n\\n        // interest_name = Q.interest_names[i];\\n        // console.log(interest_name, habits, group_votes)\\n        // console.log(interest_name, new_votes)\\n\\n        }\\n    }\\n\\n    for (var i = 0; i < Q.meme_names.length; i++) {\\n        habits = Q.ideology_voting_habits[i]\\n        group_votes = votes_in_ideologies[i]\\n\\n        if (group_votes>0) {\\n        ideology_percentages = cdf_normalize(habits);\\n        new_votes = ideology_percentages.map( i => i * group_votes)\\n        party_votes = piecewise_add(party_votes, new_votes)\\n\\n        // ideology_name = Q.meme_names[i];\\n        // console.log(ideology_name, habits, group_votes)\\n        // console.log(ideology_name, new_votes)\\n        }\\n    }\\n\\n    seats = assign_percentages(party_votes, nseats);\\n\\n    return [seats, party_votes, votes_in_interest_groups, votes_in_ideologies]\\n\\n\\n}\\n\\nfunction update_projections(){\\n\\n\\n    function logistic_convert(x, u, s) {\\n        // logistic cdf function\\n        return 1 / (1 + Math.exp((u - x) / s));\\n    }\\n\\n\\n    piecewise_mult = (a, b) => a.map((x, i) => (a[i] || 0) * (b[i] || 0))\\n    piecewise_add = (a, b) => a.map((x, i) => (a[i] || 0) + (b[i] || 0))\\n    piecewise_sub = (a, b) => a.map((x, i) => a[i] - b[i])\\n\\n    sum_list = (numbers) => numbers.reduce((sum, num) => (sum || 0) + (num || 0));\\n\\n    function piecewise_sum(...lists_to_sum) {\\n        total = lists_to_sum[0]\\n        for (var i = 1; i < lists_to_sum.length; i++) {\\n            next_list = lists_to_sum[i] ?? [0] * total.length;\\n            total = piecewise_add(total, next_list);\\n        }\\n        return total\\n    }\\n\\n    // executive seats\\n    executive_seats = Q.executive_seats ?? 140;\\n    result = generic_vote(electorate=8, district=0, nseats=executive_seats);\\n    Q.projections.executive = result[0];\\n\\n    //guild seats\\n    for (var i = 0; i < 8; i++){\\n        color = Q.guild_colors[i];\\n        result = generic_vote(electorate=i, district=0, nseats=Q.guild_seats[i]);\\n        Q.projections[\'guild_\'+color]=result[0];\\n    }\\n\\n    //geographic seats\\n    for (var i = 1; i < 8; i++){\\n        result = generic_vote(electorate=9, district=i, nseats=20);\\n        Q.projections[\'district_\'+i]=result[0];\\n    }\\n}\\n\\nsetup_demographics();\\nupdate_projections();"}],"content":{"content":"","type":"paragraph"}},"mss_dundalk_affair.after_message":{"id":"mss_dundalk_affair.after_message","goTo":[{"id":"post_event.events_choice"}],"content":{"content":"","type":"paragraph"}},"mss_dundalk_affair":{"id":"mss_dundalk_affair","type":"scene","title":"MSS Dundalk Affair","priority":1,"maxVisits":1,"tags":["event"],"viewIf":{"$code":"return (((Q[\'month\'] || 0)===3) && ((Q[\'year\'] || 0)===2300));"},"options":[{"id":"@mss_dundalk_affair.justice_reform"},{"id":"@mss_dundalk_affair.anti_corp"},{"id":"@mss_dundalk_affair.anti_crime"},{"id":"@mss_dundalk_affair.mikasa_first"}],"content":[{"type":"paragraph","content":"The stars have aligned for the fledgling democratic movement of Mikasa. An offworld corporation, Canterbary Logistics, has been caught red handed bribing the judiciary. Normally they would simply refuse to pay any fines but they are uniquely vulnerable because their space liner MSS Dundalk is trapped at Mikasa for repairs. For once a corporation could be held to account."},{"type":"paragraph","content":"Naturally Canterbary Logistics is trying to get the Dundalk out of port before the courts decide anything. But mass protests outside the drydock could obstruct the delivery of repair parts and keep the Dundalk trapped. The people are excited, the resident megacorps of Mikasa dont see the need to stop us. The first political protests in a century are being organized, what will the topics of our speeches be?"}],"countVisitsMax":1},"community_outreach.otherworlders_community":{"id":"community_outreach.otherworlders_community","title":"Assimilate arrivals from the otherworld","subtitle":"Ruukish (otherworld humans), Fae, Orcs","onArrival":[{"$code":"Q[\'otherworld_assimilation\'] = (Q[\'otherworld_assimilation\'] || 0) + 1;"}],"content":[{"type":"paragraph","content":"Although small in number, the refugees from the mystic otherworld have extreme culture shock. What\'s worse they have brought a bitter ethnic conflict with them, the Orci question. The orcs are often conflated with the orci, magical immitations of life while the fae are accused of ensnaring others in their magics. The otherworld humans who typically are at the bottom of the heirarchy in the otherworld resent both groups but have trouble adjusting to a technological existence when they rarely possess basic literacy."},{"type":"paragraph","content":"We can help educate the otherworlders in our ways, hopefullly learning from the times humanity has put aside it\'s conflicts instead of allowing them to fester. And in turn we might learn more of the magical arts of the otherworld. Even if few of the refugees were trained in the magical arts, they have seen far more magic then the vast majority of people from this world."}]},"community_outreach":{"id":"community_outreach","type":"scene","title":"Community Conflicts","newPage":true,"isCard":true,"cardImage":"img/asteroid.jpg","tags":["party_affairs"],"options":[{"id":"@community_outreach.first_wave_community"},{"id":"@community_outreach.second_wave_community"},{"id":"@community_outreach.isolated_communities"},{"id":"@community_outreach.drones_community"},{"id":"@community_outreach.otherworlders_community"}],"content":{"type":"heading","content":"Community Conflicts"}},"ward_infrastructure.repair_vats":{"id":"ward_infrastructure.repair_vats","title":"Repair the corporate Vats district","chooseIf":{"$code":"return ((((Q[\'budget\'] || 0) > 0)) && (((Q[\'vats_selected\'] || 0) == 0)));"},"subtitle":{"content":[{"type":"conditional","content":"Community Soylent feels slighted ","predicate":0},{"type":"conditional","content":"Community Soylent would be pleased","predicate":1}],"stateDependencies":[{"type":"predicate","fn":{"$code":"return (((Q[\'corporate_selected\'] || 0) > 0) && ((Q[\'vats_selected\'] || 0) == 0));"}},{"type":"predicate","fn":{"$code":"return ((Q[\'corporate_selected\'] || 0) == 0);"}}]},"onArrival":[{"$code":"Q[\'vats_selected\'] = (Q[\'vats_selected\'] || 0) + 1;\\nQ[\'budget\'] = (Q[\'budget\'] || 0) - 1;\\nQ[\'corporate_selected\'] = (Q[\'corporate_selected\'] || 0) + 1;\\nQ[\'district3_infra\'] = (Q[\'district3_infra\'] || 0) + 1;"}],"goTo":[{"id":"ward_infrastructure"}],"content":{"content":"","type":"paragraph"}},"game_over.civil_war_won":{"id":"game_over.civil_war_won","title":"We have won the civil war.","viewIf":{"$code":"return ((Q[\'republic_victory\'] || 0) == 1);"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"We have won the civil war against the reactionary forces. Germany will be changed forever, but it is too early to know how.","type":"paragraph"}},"ward_infrastructure.repair_limelight":{"id":"ward_infrastructure.repair_limelight","title":"Repair the corporate Lightlight district","chooseIf":{"$code":"return ((((Q[\'budget\'] || 0) > 0)) && (((Q[\'limelight_selected\'] || 0) == 0)));"},"subtitle":{"content":[{"type":"conditional","content":"Brazos Zaibatsu feels slighted ","predicate":0},{"type":"conditional","content":"Brazos Zaibatsu would be pleased","predicate":1}],"stateDependencies":[{"type":"predicate","fn":{"$code":"return (((Q[\'corporate_selected\'] || 0) > 0) && ((Q[\'limelight_selected\'] || 0) == 0));"}},{"type":"predicate","fn":{"$code":"return ((Q[\'corporate_selected\'] || 0) == 0);"}}]},"onArrival":[{"$code":"Q[\'limelight_selected\'] = (Q[\'limelight_selected\'] || 0) + 1;\\nQ[\'budget\'] = (Q[\'budget\'] || 0) - 1;\\nQ[\'corporate_selected\'] = (Q[\'corporate_selected\'] || 0) + 1;\\nQ[\'district6_infra\'] = (Q[\'district6_infra\'] || 0) + 1;"}],"goTo":[{"id":"ward_infrastructure"}],"content":{"content":"","type":"paragraph"}},"game_over.civil_war_lost":{"id":"game_over.civil_war_lost","title":"We lost the civil war.","viewIf":{"$code":"return ((Q[\'total_defeat\'] || 0) == 1);"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"We have lost the civil war. At least it was a quick coup, and ended before Germany could be plunged into total war.","type":"paragraph"}},"ward_infrastructure.repair_railyard":{"id":"ward_infrastructure.repair_railyard","title":"Repair the corporate Railyard district","chooseIf":{"$code":"return ((((Q[\'budget\'] || 0) > 0)) && (((Q[\'railyard_selected\'] || 0) == 0)));"},"subtitle":{"content":[{"type":"conditional","content":"Magrail Combine feels slighted ","predicate":0},{"type":"conditional","content":"Magrail Combine would be pleased","predicate":1}],"stateDependencies":[{"type":"predicate","fn":{"$code":"return (((Q[\'corporate_selected\'] || 0) > 0) && ((Q[\'railyard_selected\'] || 0) == 0));"}},{"type":"predicate","fn":{"$code":"return ((Q[\'corporate_selected\'] || 0) == 0);"}}]},"onArrival":[{"$code":"Q[\'railyard_selected\'] = (Q[\'railyard_selected\'] || 0) + 1;\\nQ[\'budget\'] = (Q[\'budget\'] || 0) - 1;\\nQ[\'corporate_selected\'] = (Q[\'corporate_selected\'] || 0) + 1;\\nQ[\'district4_infra\'] = (Q[\'district4_infra\'] || 0) + 1;"}],"goTo":[{"id":"ward_infrastructure"}],"content":{"content":"","type":"paragraph"}},"game_over.long_war":{"id":"game_over.long_war","title":"Germany is gripped by civil war.","viewIf":{"$code":"return ((Q[\'long_war\'] || 0) == 1);"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":[{"type":"paragraph","content":"Germany is currently in the grip of a civil war, a brutal affair that has no obvious end. Thousands of lives have already been extinguished, and it is likely that the war will not stop until Germany\'s cities are reduced to ruins."},{"type":"paragraph","content":[{"type":"conditional","content":"The current conditions are not favorable for us. ","predicate":0},{"type":"conditional","content":"Our cause is popular in the West, but their sclerotic governments are reluctant to send us aid. ","predicate":1},{"type":"conditional","content":"The Soviet Union has aided the Communists, but not the socialists and democrats, in an attempt to shape Germany\'s future government. ","predicate":2},{"type":"conditional","content":"Poland and Czechoslovakia have sent some assistance against the fascists. ","predicate":3},""]}],"stateDependencies":[{"type":"predicate","fn":{"$code":"return ((Q[\'is_favorable\'] || 0) == 0);"}},{"type":"predicate","fn":{"$code":"return ((Q[\'west_relation\'] || 0) >= 2);"}},{"type":"predicate","fn":{"$code":"return ((Q[\'soviet_aid\'] || 0) >= 1);"}},{"type":"predicate","fn":{"$code":"return ((Q[\'east_aid\'] || 0) >= 1);"}}]}},"ward_infrastructure.repair_done":{"id":"ward_infrastructure.repair_done","title":"That\'s all","onArrival":[{"$code":"if ( !vats_selected &&  corporate_selected > 0 ) soylent_relations -= 5;\\nif ( !vats_selected &&  !docks_selected  ) soylent_relations -= (civilian_selected+corporate_selected);\\nif ( vats_selected ) { soylent_relations += 5; }\\n\\nif ( !limelight_selected &&  corporate_selected > 0 ) magrail_relations -= 5;\\nif ( !limelight_selected &&  !docks_selected  ) magrail_relations -= (civilian_selected+corporate_selected);\\nif ( limelight_selected  ) { magrail_relations += 5; }\\n\\nif ( !railyard_selected &&  corporate_selected > 0 ) brazos_relations -= 5;\\nif ( !railyard_selected &&  !docks_selected ) brazos_relations -= (civilian_selected+corporate_selected);\\nif ( railyard_selected  ) brazos_relations += 5;\\n\\nif ( aurora_selected ) SDF_support_first_wave += 3;\\nif ( deeps_selected ) SDF_support_deepers += 1;\\nif ( deeps_selected ) SDF_support_second_wave += 3;\\n\\nvats_selected = 0;\\nrailyard_selected = 0;\\nlimelight_selected = 0;\\ndocks_selected = 0;\\naurora_selected = 0;\\npits_selected = 0;\\ndeeps_selected = 0;\\ncivilian_selected = 0;\\ncorporate_selected = 0;"}],"content":{"content":"","type":"paragraph"}},"ward_infrastructure":{"id":"ward_infrastructure","type":"scene","title":"Ward Infrastructure","newPage":true,"isCard":true,"tags":["govt_affairs","party_affairs"],"cardImage":"img/asteroid.jpg","options":[{"id":"@ward_infrastructure.repair_docks"},{"id":"@ward_infrastructure.repair_aurora"},{"id":"@ward_infrastructure.repair_pits"},{"id":"@ward_infrastructure.repair_deeps"},{"id":"@ward_infrastructure.repair_vats"},{"id":"@ward_infrastructure.repair_railyard"},{"id":"@ward_infrastructure.repair_limelight"},{"id":"@ward_infrastructure.repair_done"}],"content":{"content":[{"type":"paragraph","content":"The population of Mikasa has been growing, refilling the spaces that were abandoned after various corporate closures. This is putting growing demands on the power network, air circulation, data relays and other infrastructure, some of which still date back to the original colony. Can we afford to pay for infrastructure improvements? Can we afford not to?"},{"type":"paragraph","content":"Current Infastructure states:"},{"type":"paragraph","content":["1. The Docks |Demand: ",{"type":"insert","insert":0}," |Status: ",{"type":"insert","insert":1},""]},{"type":"paragraph","content":["2. Aurora |Demand: ",{"type":"insert","insert":2}," |Status: ",{"type":"insert","insert":3},""]},{"type":"paragraph","content":["3. Vats |Demand: ",{"type":"insert","insert":4}," |Status: ",{"type":"insert","insert":5},""]},{"type":"paragraph","content":["4. Railyard |Demand: ",{"type":"insert","insert":6}," |Status: ",{"type":"insert","insert":7},""]},{"type":"paragraph","content":["5. The Pits |Demand: ",{"type":"insert","insert":8}," |Status: ",{"type":"insert","insert":9},""]},{"type":"paragraph","content":["6. Limelight |Demand: ",{"type":"insert","insert":10}," |Status: ",{"type":"insert","insert":11},""]},{"type":"paragraph","content":["7. The Deeps |Demand: ",{"type":"insert","insert":12}," |Status: ",{"type":"insert","insert":13},""]}],"stateDependencies":[{"type":"insert","fn":{"$code":"return (Q[\'district1_pop\'] || 0);"},"qdisplay":"infrastructure"},{"type":"insert","fn":{"$code":"return (Q[\'district1_infra\'] || 0);"},"qdisplay":"infrastructure"},{"type":"insert","fn":{"$code":"return (Q[\'district2_pop\'] || 0);"},"qdisplay":"infrastructure"},{"type":"insert","fn":{"$code":"return (Q[\'district2_infra\'] || 0);"},"qdisplay":"infrastructure"},{"type":"insert","fn":{"$code":"return (Q[\'district3_pop\'] || 0);"},"qdisplay":"infrastructure"},{"type":"insert","fn":{"$code":"return (Q[\'district3_infra\'] || 0);"},"qdisplay":"infrastructure"},{"type":"insert","fn":{"$code":"return (Q[\'district4_pop\'] || 0);"},"qdisplay":"infrastructure"},{"type":"insert","fn":{"$code":"return (Q[\'district4_infra\'] || 0);"},"qdisplay":"infrastructure"},{"type":"insert","fn":{"$code":"return (Q[\'district5_pop\'] || 0);"},"qdisplay":"infrastructure"},{"type":"insert","fn":{"$code":"return (Q[\'district5_infra\'] || 0);"},"qdisplay":"infrastructure"},{"type":"insert","fn":{"$code":"return (Q[\'district6_pop\'] || 0);"},"qdisplay":"infrastructure"},{"type":"insert","fn":{"$code":"return (Q[\'district6_infra\'] || 0);"},"qdisplay":"infrastructure"},{"type":"insert","fn":{"$code":"return (Q[\'district7_pop\'] || 0);"},"qdisplay":"infrastructure"},{"type":"insert","fn":{"$code":"return (Q[\'district1_infra\'] || 0);"},"qdisplay":"infrastructure"}]}},"game_over.braun_victorious":{"id":"game_over.braun_victorious","title":"Otto Braun victorious","viewIf":{"$code":"return (Q[\'president\'] == \\"Braun\\");"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"Otto Braun has been elected as President of Germany. He had never desired to be the most powerful man in Germany, but now he is.","type":"paragraph"}},"game_over.president_schumacher":{"id":"game_over.president_schumacher","title":"Kurt Schumacher victorious","viewIf":{"$code":"return (Q[\'president\'] == \\"Schumacher\\");"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"Kurt Schumacher has been elected as President of Germany. As a young and ambitious SPD member, he will be shaping Germany for years to come.","type":"paragraph"}},"game_over.president_juchacz":{"id":"game_over.president_juchacz","title":"Marie Juchacz is President","viewIf":{"$code":"return (Q[\'president\'] == \\"Juchacz\\");"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"Marie Juchacz has been elected as President of Germany. She is the first woman to be elected as the head of state of any republic, and will contribute to shaping Germany for years to come.","type":"paragraph"}},"game_over.president_einstein":{"id":"game_over.president_einstein","title":"Albert Einstein is President","viewIf":{"$code":"return (Q[\'president\'] == \\"Einstein\\");"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"Albert Einstein, possibly the most famous scientist in the world, has been elected as President of Germany. As a German Jew and a pacifist, he is the repudiation of everything the Nazis stood for, and a symbol of a new German Republic that has moved beyond its checkered past.","type":"paragraph"}},"game_over.spd_victorious":{"id":"game_over.spd_victorious","title":"SPD still in government","viewIf":{"$code":"return (((((Q[\'spd_in_government\'] || 0) == 1) && (Q[\'chancellor_party\'] == \\"SPD\\")) && ((Q[\'total_defeat\'] || 0) == 0)) && ((Q[\'long_war\'] || 0) == 0));"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":{"type":"paragraph","content":["The SPD is still in government, under Chancellor ",{"type":"insert","insert":0},". Given the circumstances, this is a substantial accomplishment."]},"stateDependencies":[{"type":"insert","fn":{"$code":"return (Q[\'chancellor\'] || 0);"}}]}},"game_over.communist_victory":{"id":"game_over.communist_victory","title":"Communist victory","viewIf":{"$code":"return ((((Q[\'chancellor_party\'] == \\"KPD\\") || (Q[\'president\'] == \\"Thälmann\\")) && ((Q[\'total_defeat\'] || 0) == 0)) && ((Q[\'long_war\'] || 0) == 0));"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"The KPD has won power in Germany, with our assistance. They will try to remake Germany in the Soviet image. How much they succeed is yet to be determined.","type":"paragraph"}},"game_over.works_program":{"id":"game_over.works_program","title":"Works program enacted!","viewIf":{"$code":"return ((Q[\'works_program\'] || 0) > 0);"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"Our government has enacted a public works program!","type":"paragraph"}},"game_over.unemployment_reduced":{"id":"game_over.unemployment_reduced","title":"Unemployment has been reduced from its peak.","viewIf":{"$code":"return ((((Q[\'unemployed\'] || 0) <= 20) && ((Q[\'unemployed\'] || 0) >= 10)) && ((Q[\'year\'] || 0) >= 1930));"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"While still uncomfortably high, unemployment levels are nowhere near their peak. This is a success of our economic policy.","type":"paragraph"}},"game_over.unemployment_reduced_2":{"id":"game_over.unemployment_reduced_2","title":"Unemployment has been successfully reduced!","viewIf":{"$code":"return (((Q[\'unemployed\'] || 0) < 10) && ((Q[\'year\'] || 0) >= 1930));"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"Unemployment levels have fallen substantially! This is a success of our economic policy.","type":"paragraph"}},"game_over.unemployment_high":{"id":"game_over.unemployment_high","title":"Unemployment is still too high.","viewIf":{"$code":"return (((((Q[\'unemployed\'] || 0) >= 20) && (((Q[\'chancellor\'] != \\"Hitler\\") && (Q[\'president\'] != \\"Hitler\\")))) && (((Q[\'total_defeat\'] || 0) == 0))) && ((Q[\'long_war\'] || 0) == 0));"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"Unemployment is still at dangerously high levels. Even though Hitler is not in power, the situation is ripe for instability and extremism.","type":"paragraph"}},"game_over.emergency_government":{"id":"game_over.emergency_government","title":"SPD ruling in an emergency government.","viewIf":{"$code":"return ((Q[\'in_emergency_government\'] || 0) == 1);"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":{"type":"paragraph","content":["The SPD is ruling as part of an emergency minority government, led by President ",{"type":"insert","insert":0}," and Chancellor ",{"type":"insert","insert":1},". This is a temporary and unstable arrangement, leaving the door open to further authoritarianism."]},"stateDependencies":[{"type":"insert","fn":{"$code":"return (Q[\'president\'] || 0);"}},{"type":"insert","fn":{"$code":"return (Q[\'chancellor\'] || 0);"}}]}},"game_over.peoples_party_achieved":{"id":"game_over.peoples_party_achieved","title":"The SPD is a \\"People\'s Party\\".","viewIf":{"$code":"return ((Q[\'peoples_party\'] || 0) == 1);"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"The SPD has been declared a \\"People\'s Party\\", representing all of the people, not just the working class. This policy has many supporters and detractors, and what will become of the party is still unclear.","type":"paragraph"}},"game_over.nationalization_achieved":{"id":"game_over.nationalization_achieved","title":"Socialization of the economy has commenced.","viewIf":{"$code":"return ((Q[\'nationalization_progress\'] || 0) >= 2);"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"As part of our socialist economic plan, we have nationalized a substantial portion of the economy, beginning the transition to actual socialism.","type":"paragraph"}},"game_over.works_councils":{"id":"game_over.works_councils","title":"Works councils have more power.","viewIf":{"$code":"return ((Q[\'works_councils\'] || 0) >= 3);"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"Works councils now have substantially greater influence, giving workers democratic control over their economic lives.","type":"paragraph"}},"game_over.european_union":{"id":"game_over.european_union","title":"There is now a European Union!","viewIf":{"$code":"return ((Q[\'eu\'] || 0)===1);"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu"}],"content":{"content":"We have helped to form a European Union to bring peace and prosperity to the continent. Time will tell how effective it will be.","type":"paragraph"}},"game_over.achievements":{"id":"game_over.achievements","title":"Achievements","viewIf":{"$code":"return ((Q[\'achievement_game_completed\'] || 0) == 1);"},"tags":["endings"],"goTo":[{"id":"game_over.eg_menu","predicate":{"$code":"return ((Q[\'started\'] || 0) == 1);"}},{"id":"root.start_menu_2","predicate":{"$code":"return ((Q[\'started\'] || 0) == 0);"}}],"content":{"content":[{"type":"heading","content":"Completed Achievements in this Playthrough"},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Eiserne Front"}," - form the Iron Front. "],"predicate":0},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Bürgerkrieg"}," - enter a long civil war. "],"predicate":1},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Einigkeit"}," - reach the end of the game without a civil war on easy. "],"predicate":2},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Einigkeit und Recht"}," - reach the end of the game without a civil war on normal. "],"predicate":3},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Einigkeit und Recht und Freiheit"}," - reach the end of the game without a civil war on hard. "],"predicate":4},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Schwarz-Rot-Gold"}," - reach the end of the game without a civil war on historical mode. "],"predicate":5},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Sieg für die Republik"}," - win the civil war. "],"predicate":6},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Bollwerk der Demokratie"}," - Resist the Prussian Coup and win. "],"predicate":7},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Roter Zar von Preußen"}," - Otto Braun is President, Chancellor, and Minister-President. "],"predicate":8},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Einheitsfront"}," - Form a government consisting of the SPD and KPD. "],"predicate":9},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Sieg für die Einheitsfront"}," - Form a Left Front that survives the KPD demands. "],"predicate":10},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Volksfront"}," - Form a government consisting of the SPD, KPD, Z, and DDP. "],"predicate":11},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Große Volksfront"}," - With Joos leading the Center Party and the Conciliators leading the KPD, form a government consisting of the SPD, KPD, Z, and DDP. "],"predicate":12},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Sieg für die Volksfront"}," - Form a Popular Front that survives the KPD demands. "],"predicate":13},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Verfassungskoalition"}," - form a \\"constitutional coalition\\". "],"predicate":14},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Weimarer Koalition"}," - form a Weimar coalition. "],"predicate":15},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Mehrheitspartei"}," - form an SPD-only majority government. "],"predicate":16},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Minderheitsregierung"}," - form an SPD minority government. "],"predicate":17},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Volkspartei"}," - the SPD is a People\'s Party. "],"predicate":18},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Sohn seiner Klasse"}," - Ernst Thälmann is either president or chancellor. "],"predicate":19},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Der rote Millionär"}," - Willi Münzenberg is president. "],"predicate":20},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Versöhnler"}," - the Conciliators lead the KPD. "],"predicate":21},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Der österreichische Gefreite"}," - deported Hitler "],"predicate":22},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Wirtschaftspolitik"}," - enact an economic plan. "],"predicate":23},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Wirtschaftswunder"}," - After 1932, have unemployment less than in 1928, inflation below 5%, and a budget surplus. "],"predicate":24},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Wirtschaftsexperiment"}," - enact two different economic plans. "],"predicate":25},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Freie Marktwirtschaft"}," - survive to the end of the game without adopting an economic plan. "],"predicate":26},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Gleichheit"}," - pass reforms for women\'s rights. "],"predicate":27},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Hirschfeld"}," - pass reforms for homosexual rights. "],"predicate":28},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Mädchen in Uniform"}," - a woman\'s place is in the Reichsbanner. "],"predicate":29},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Anders als die Andern"}," - sexual minorities will defend the Republic. "],"predicate":30},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Brüder, zur Sonne, zur Freiheit"}," - reduce unemployment, pause reparations, increase women\'s rights, elect an SPD president, and deport Hitler in one playthrough on at least normal difficulty. "],"predicate":31},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Die Rote Fahne"}," - join the KPD in their May Day march. "],"predicate":32},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Panik im Mittelstand"}," - SPD new middle class support is at least 50%. "],"predicate":33},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Bauernrevolution"}," - SPD rural support is at least 50%. "],"predicate":34},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Katholischer Sozialismus"}," - SPD Catholic support is at least 50%. "],"predicate":35},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Große Volkspartei"}," - All classes have at least 40% SPD support. "],"predicate":36},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Klassenkampf"}," - SPD worker support is at least 80%, while middle-class and rural supports are less than 20%. "],"predicate":37},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Räterepublik"}," - begin the transformation to a socialist economy. "],"predicate":38},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Polykrise"}," - survive a capital strike and a fascist coup. "],"predicate":39},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Syndikalismus"}," - support factory takeovers by the workers. "],"predicate":40},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Drei Pfeile"}," - defeat a coup without a civil war. "],"predicate":41},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Ausnahmezustand"}," - use emergency powers to cancel elections. "],"predicate":42},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Vereinigte Staaten von Europa"}," - form a \\"European Union\\". "],"predicate":43},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Heidelberger Programm"}," - achieve the goals of the SPD\'s Heidelberg Program: social welfare, judicial reform, women\'s rights in the workplace and family, progressive taxation, works councils, and the formation of a European Union. "],"predicate":44},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Verfassungsreform"}," - pass a constitutional amendment. "],"predicate":45},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Zeppelinkapitän"}," - Hugo Eckener has been elected president. "],"predicate":46},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Wahlrechts für Frauen"}," - Marie Juchacz has been elected president. "],"predicate":47},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Bundesrepublik"}," - Konrad Adenauer or Kurt Schumacher has been elected president, and constitutional reforms have reduced presidential power. "],"predicate":48},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Republik der Wissenschaft"}," - Albert Einstein has been elected president. "],"predicate":49},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Arbeiter von Wien"}," - SDAPÖ victory in Austria. "],"predicate":50},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Stolperstein"}," - we lost, but history might memorialize us... "],"predicate":51},""]},{"type":"heading","content":"Completed Achievements Overall"},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Eiserne Front"}," - form the Iron Front. "],"predicate":52},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Bürgerkrieg"}," - enter a long civil war. "],"predicate":53},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Einigkeit"}," - reach the end of the game without a civil war on easy. "],"predicate":54},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Einigkeit und Recht"}," - reach the end of the game without a civil war on normal. "],"predicate":55},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Einigkeit und Recht und Freiheit"}," - reach the end of the game without a civil war on hard. "],"predicate":56},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Schwarz-Rot-Gold"}," - reach the end of the game without a civil war on historical mode. "],"predicate":57},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Sieg für die Republik"}," - win the civil war. "],"predicate":58},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Bollwerk der Demokratie"}," - Resist the Prussian Coup and win. "],"predicate":59},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Roter Zar von Preußen"}," - Otto Braun is President, Chancellor, and Minister-President. "],"predicate":60},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Einheitsfront"}," - Form a government consisting of the SPD and KPD. "],"predicate":61},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Sieg für die Einheitsfront"}," - Form a Left Front that survives the KPD demands. "],"predicate":62},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Volksfront"}," - Form a government consisting of the SPD, KPD, Z, and DDP. "],"predicate":63},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Große Volksfront"}," - With Joos leading the Center Party and the Conciliators leading the KPD, form a government consisting of the SPD, KPD, Z, and DDP. "],"predicate":64},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Sieg für die Volksfront"}," - Form a Popular Front that survives the KPD demands. "],"predicate":65},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Verfassungskoalition"}," - form a \\"constitutional coalition\\". "],"predicate":66},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Weimarer Koalition"}," - form a Weimar coalition. "],"predicate":67},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Mehrheitspartei"}," - form an SPD-only majority government. "],"predicate":68},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Minderheitsregierung"}," - form an SPD minority government. "],"predicate":69},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Volkspartei"}," - the SPD is a People\'s Party. "],"predicate":70},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Sohn seiner Klasse"}," - Ernst Thälmann is either president or chancellor. "],"predicate":71},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Der rote Millionär"}," - Willi Münzenberg is president. "],"predicate":72},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Versöhnler"}," - the Conciliators lead the KPD. "],"predicate":73},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Der österreichische Gefreite"}," - deported Hitler "],"predicate":74},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Wirtschaftspolitik"}," - enact an economic plan. "],"predicate":75},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Wirtschaftswunder"}," - After 1932, have unemployment less than in 1928, inflation below 5%, and a budget surplus. "],"predicate":76},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Wirtschaftsexperiment"}," - enact two different economic plans. "],"predicate":77},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Freie Marktwirtschaft"}," - survive to the end of the game without adopting an economic plan. "],"predicate":78},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Gleichheit"}," - pass reforms for women\'s rights. "],"predicate":79},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Hirschfeld"}," - pass reforms for homosexual rights. "],"predicate":80},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Mädchen in Uniform"}," - a woman\'s place is in the Reichsbanner. "],"predicate":81},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Anders als die Andern"}," - sexual minorities will defend the Republic. "],"predicate":82},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Brüder, zur Sonne, zur Freiheit"}," - reduce unemployment, pause reparations, increase women\'s rights, elect an SPD president, and deport Hitler in one playthrough on at least normal difficulty. "],"predicate":83},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Die Rote Fahne"}," - join the KPD in their May Day march. "],"predicate":84},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Panik im Mittelstand"}," - SPD new middle class support is at least 50%. "],"predicate":85},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Bauernrevolution"}," - SPD rural support is at least 50%. "],"predicate":86},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Katholischer Sozialismus"}," - SPD Catholic support is at least 50%. "],"predicate":87},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Große Volkspartei"}," - All classes have at least 40% SPD support. "],"predicate":88},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Klassenkampf"}," - SPD worker support is at least 80%, while middle-class and rural supports are less than 20%. "],"predicate":89},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Räterepublik"}," - begin the transformation to a socialist economy. "],"predicate":90},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Polykrise"}," - survive a capital strike and a fascist coup. "],"predicate":91},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Syndikalismus"}," - support factory takeovers by the workers. "],"predicate":92},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Drei Pfeile"}," - defeat a coup without a civil war. "],"predicate":93},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Ausnahmezustand"}," - use emergency powers to cancel elections. "],"predicate":94},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Vereinigte Staaten von Europa"}," - form a \\"European Union\\". "],"predicate":95},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Heidelberger Programm"}," - achieve the goals of the SPD\'s Heidelberg Program: social welfare, judicial reform, women\'s rights in the workplace and family, progressive taxation, works councils, and the formation of a European Union. "],"predicate":96},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Verfassungsreform"}," - pass a constitutional amendment. "],"predicate":97},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Zeppelinkapitän"}," - Hugo Eckener has been elected president. "],"predicate":98},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Wahlrechts für Frauen"}," - Marie Juchacz has been elected president. "],"predicate":99},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Bundesrepublik"}," - Konrad Adenauer or Kurt Schumacher has been elected president, and constitutional reforms have reduced presidential power. "],"predicate":100},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Republik der Wissenschaft"}," - Albert Einstein has been elected president. "],"predicate":101},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Arbeiter von Wien"}," - SDAPÖ victory in Austria. "],"predicate":102},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Stolperstein"}," - we lost, but history might memorialize us... "],"predicate":103},""]},{"type":"heading","content":"Incomplete Achievements"},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Eiserne Front"}," - form the Iron Front. "],"predicate":104},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Bürgerkrieg"}," - enter a long civil war. "],"predicate":105},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Einigkeit"}," - reach the end of the game without a civil war on easy. "],"predicate":106},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Einigkeit und Recht"}," - reach the end of the game without a civil war on normal. "],"predicate":107},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Einigkeit und Recht und Freiheit"}," - reach the end of the game without a civil war on hard. "],"predicate":108},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Schwarz-Rot-Gold"}," - reach the end of the game without a civil war on historical mode. "],"predicate":109},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Sieg für die Republik"}," - win the civil war. "],"predicate":110},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Bollwerk der Demokratie"}," - Resist the Prussian Coup and win. "],"predicate":111},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Roter Zar von Preußen"}," - Otto Braun is President, Chancellor, and Minister-President. "],"predicate":112},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Einheitsfront"}," - Form a government consisting of the SPD and KPD. "],"predicate":113},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Sieg für die Einheitsfront"}," - Form a Left Front that survives the KPD demands. "],"predicate":114},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Volksfront"}," - Form a government consisting of the SPD, KPD, Z, and DDP. "],"predicate":115},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Große Volksfront"}," - With Joos leading the Center Party and the Conciliators leading the KPD, form a government consisting of the SPD, KPD, Z, and DDP. "],"predicate":116},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Sieg für die Volksfront"}," - Form a Popular Front that survives the KPD demands. "],"predicate":117},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Verfassungskoalition"}," - form a \\"constitutional coalition\\". "],"predicate":118},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Weimarer Koalition"}," - form a Weimar coalition. "],"predicate":119},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Mehrheitspartei"}," - form an SPD-only majority government. "],"predicate":120},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Minderheitsregierung"}," - form an SPD minority government. "],"predicate":121},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Volkspartei"}," - the SPD is a People\'s Party. "],"predicate":122},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Sohn seiner Klasse"}," - Ernst Thälmann is either president or chancellor. "],"predicate":123},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Der rote Millionär"}," - Willi Münzenberg is president. "],"predicate":124},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Versöhnler"}," - the Conciliators lead the KPD. "],"predicate":125},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Der österreichische Gefreite"}," - deported Hitler "],"predicate":126},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Wirtschaftspolitik"}," - enact an economic plan. "],"predicate":127},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Wirtschaftswunder"}," - After 1932, have unemployment less than in 1928, inflation below 5%, and a budget surplus. "],"predicate":128},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Wirtschaftsexperiment"}," - enact two different economic plans. "],"predicate":129},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Freie Marktwirtschaft"}," - survive to the end of the game without adopting an economic plan. "],"predicate":130},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Gleichheit"}," - pass reforms for women\'s rights. "],"predicate":131},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Hirschfeld"}," - pass reforms for homosexual rights. "],"predicate":132},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Mädchen in Uniform"}," - a woman\'s place is in the Reichsbanner. "],"predicate":133},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Anders als die Andern"}," - sexual minorities will defend the Republic. "],"predicate":134},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Brüder, zur Sonne, zur Freiheit"}," - reduce unemployment, pause reparations, increase women\'s rights, elect an SPD president, and deport Hitler in one playthrough on at least normal difficulty. "],"predicate":135},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Die Rote Fahne"}," - join the KPD in their May Day march. "],"predicate":136},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Panik im Mittelstand"}," - SPD new middle class support is at least 50%. "],"predicate":137},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Bauernrevolution"}," - SPD rural support is at least 50%. "],"predicate":138},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Katholischer Sozialismus"}," - SPD Catholic support is at least 50%. "],"predicate":139},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Große Volkspartei"}," - All classes have at least 40% SPD support. "],"predicate":140},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Klassenkampf"}," - SPD worker support is at least 80%, while middle-class and rural supports are less than 20%. "],"predicate":141},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Räterepublik"}," - begin the transformation to a socialist economy. "],"predicate":142},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Polykrise"}," - survive a capital strike and a fascist coup. "],"predicate":143},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Syndikalismus"}," - support factory takeovers by the workers. "],"predicate":144},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Drei Pfeile"}," - defeat a coup without a civil war. "],"predicate":145},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Ausnahmezustand"}," - use emergency powers to cancel elections. "],"predicate":146},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Vereinigte Staaten von Europa"}," - form a \\"European Union\\". "],"predicate":147},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Heidelberger Programm"}," - achieve the goals of the SPD\'s Heidelberg Program: social welfare, judicial reform, women\'s rights in the workplace and family, progressive taxation, works councils, and the formation of a European Union. "],"predicate":148},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Verfassungsreform"}," - pass a constitutional amendment. "],"predicate":149},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Zeppelinkapitän"}," - Hugo Eckener has been elected president. "],"predicate":150},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Wahlrechts für Frauen"}," - Marie Juchacz has been elected president. "],"predicate":151},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Bundesrepublik"}," - Konrad Adenauer or Kurt Schumacher has been elected president, and constitutional reforms have reduced presidential power. "],"predicate":152},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Republik der Wissenschaft"}," - Albert Einstein has been elected president. "],"predicate":153},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Arbeiter von Wien"}," - SDAPÖ victory in Austria. "],"predicate":154},""]},{"type":"paragraph","content":[{"type":"conditional","content":["",{"type":"emphasis-2","content":"Stolperstein"}," - we lost, but history might memorialize us... "],"predicate":155},""]}],"stateDependencies":[{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_eiserne_front\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_civil_war\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_einigkeit\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_einigkeit_und_recht\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_einigkeit_und_recht_und_freiheit\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_schwarz_rot_gold\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_victory_for_the_republic\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_bollwerk_der_demokratie\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_red_tzar_of_prussia\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_einheitsfront\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_einheitsfront_2\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_volksfront\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_grosse_volksfront\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_volksfront_2\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_constitutional_coalition\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_weimar_coalition\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_majority_party\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_minderheitsregierung\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_volkspartei\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_sohn_seiner_klasse\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_rote_millionar\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_versohnler\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_deport_hitler\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_wirtschaftspolitik\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_wirtschaftswunder\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_wirtschaftsexperiment\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_freie_marktwirtschaft\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_equality\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_hirschfeld\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_women_reichsbanner\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_anders_als_die_andern\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_bruder_zur_sonne\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_die_rote_fahne\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_panik_im_mittelstand\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_bauernrevolution\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_katholischer_sozialismus\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_grosse_volkspartei\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_klassenkampf\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_raterepublik\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_polykrise\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_syndikalismus\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_drei_pfeile\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_ausnahmezustand\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_eu\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_heidelberger_programm\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_verfassungsreform\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_zeppelin_kapitan\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_wahlrechts\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_bundesrepublik\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_republik_der_wissenschaft\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_arbeiter_von_wien\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'game_achievement_stolperstein\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_eiserne_front\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_civil_war\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_einigkeit\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_einigkeit_und_recht\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_einigkeit_und_recht_und_freiheit\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_schwarz_rot_gold\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_victory_for_the_republic\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_bollwerk_der_demokratie\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_red_tzar_of_prussia\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_einheitsfront\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_einheitsfront_2\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_volksfront\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_grosse_volksfront\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_volksfront_2\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_constitutional_coalition\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_weimar_coalition\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_majority_party\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_minderheitsregierung\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_volkspartei\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_sohn_seiner_klasse\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_rote_millionar\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_versohnler\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_deport_hitler\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_wirtschaftspolitik\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_wirtschaftswunder\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_wirtschaftsexperiment\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_freie_marktwirtschaft\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_equality\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_hirschfeld\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_women_reichsbanner\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_anders_als_die_andern\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_bruder_zur_sonne\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_die_rote_fahne\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_panik_im_mittelstand\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_bauernrevolution\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_katholischer_sozialismus\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_grosse_volkspartei\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_klassenkampf\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_raterepublik\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_polykrise\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_syndikalismus\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_drei_pfeile\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_ausnahmezustand\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_eu\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_heidelberger_programm\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_verfassungsreform\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_zeppelin_kapitan\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_wahlrechts\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_bundesrepublik\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_republik_der_wissenschaft\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_arbeiter_von_wien\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (((Q[\'achievement_stolperstein\'] || 0)) !== 0);"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_eiserne_front\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_civil_war\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_einigkeit\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_einigkeit_und_recht\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_einigkeit_und_recht_und_freiheit\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_schwarz_rot_gold\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_victory_for_the_republic\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_bollwerk_der_demokratie\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_red_tzar_of_prussia\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_einheitsfront\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_einheitsfront_2\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_volksfront\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_grosse_volksfront\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_volksfront_2\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_constitutional_coalition\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_weimar_coalition\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_majority_party\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_minderheitsregierung\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_volkspartei\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_sohn_seiner_klasse\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_rote_millionar\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_versohnler\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_deport_hitler\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_wirtschaftspolitik\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_wirtschaftswunder\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_wirtschaftsexperiment\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_freie_marktwirtschaft\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_equality\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_hirschfeld\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_women_reichsbanner\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_anders_als_die_andern\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_bruder_zur_sonne\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_die_rote_fahne\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_panik_im_mittelstand\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_bauernrevolution\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_katholischer_sozialismus\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_grosse_volkspartei\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_klassenkampf\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_raterepublik\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_polykrise\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_syndikalismus\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_drei_pfeile\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_ausnahmezustand\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_eu\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_heidelberger_programm\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_verfassungsreform\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_zeppelin_kapitan\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_wahlrechts\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_bundesrepublik\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_republik_der_wissenschaft\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_arbeiter_von_wien\'] || 0)) !== 0));"}},{"type":"predicate","fn":{"$code":"return (!(((Q[\'achievement_stolperstein\'] || 0)) !== 0));"}}]}},"game_over.end_game":{"id":"game_over.end_game","gameOver":true,"content":{"content":"","type":"paragraph"}},"game_over":{"id":"game_over","type":"scene","title":"Game Over.","newPage":true,"goTo":[{"id":"game_over.eg_menu"}],"onArrival":[{"$code":"Q.game_over = 1;\\n// Achievements:\\n// Große Koalition - form a grand coalition\\n// Eiserne Front - Form the Iron Front.\\nthis.achieve(\'game_completed\');\\n\\n// Roter Zar von Preußen - At the end of the game, Otto Braun is president, chancellor, and minister-president of prussia at the same time.\\nif (Q.president == \'Braun\' && Q.chancellor == \'Braun\' && Q.spd_prussia) {\\n    this.achieve(\'red_tzar_of_prussia\');\\n}\\n// Bürgerkrieg - enter a long civil war.\\nif (Q.long_war) {\\n    this.achieve(\'civil_war\');\\n}\\n// Sieg für die Republik - victory for the republic\\nif (Q.republic_victory) {\\n    this.achieve(\'victory_for_the_republic\');\\n}\\n// Einigkeit - survive on easy without a civil war.\\n// Einigkeit und Recht - survive on medium without a civil war.\\n// Einigkeit und Recht und Freiheit - survive on hard without a civil war.\\n\\n// Einheitsfront - form a united front with the KPD, and win the civil war.\\n\\n// Volksfront - form a popular front government, and win the civil war.\\n\\n// Verfassungskoalition - form a Constitutional Coalition.\\n// Wirtschaftspolitik - enact an economic plan.\\n// Wirtschaftswunder - reduce unemployment below 10% and have a non-negative budget by 1933.\\nif (Q.year >= 1932  && Q.unemployed < 8.6 && Q.budget > 0 && Q.inflation < 5) {\\n    this.achieve(\'wirtschaftswunder\');\\n}\\n// Bollwerk der Demokratie - resist the Prussian Coup, and win.\\nif (Q.republic_victory && Q.resist_coup) {\\n    this.achieve(\'bollwerk_der_demokratie\');\\n}\\n// Der österreichische Gefreiter - deport hitler\\n// Volkspartei - form a people\'s party\\n// Hirschfeld - legalize 2 of homosexual rights and trans rights.\\nif (Q.homosexual_rights >= 2) {\\n    this.achieve(\'hirschfeld\');\\n}\\n// Mädchen und Uniform - a woman\'s place is in the Reichsbanner.\\n// Gleichheit - Support and enact reforms for women\'s rights.\\nif ((Q.womens_work && Q.womens_rights >= 5) || (Q.abortion_rights && Q.womens_rights >= 3)) {\\n    this.achieve(\'equality\');\\n}\\n\\n// Sohn seiner Klasse - elect Ernst Thälmann as president or chancellor.\\nif (Q.chancellor == \\"Thälmann\\" || Q.president == \\"Thälmann\\") {\\n    this.achieve(\'sohn_seiner_klasse\');\\n}\\n\\n// calculate normalized class voting for the achievements\\nfor (var c of Q.classes) {\\n    var class_votes = 0;\\n    for (var party of Q.parties) {\\n        if (Q[c+\'_\'+party] < 0) {\\n            Q[c+\'_\'+party] = 0;\\n        }\\n        class_votes += Q[c+\'_\'+party];\\n    }\\n    for (var party of Q.parties) {\\n        Q[c + \'_\' + party + \'_normalized\'] = Math.round(100*Q[c+\'_\'+party]/class_votes);\\n    }\\n}\\n\\n// Die Rote Fahne - join the KPD in the May Day march.\\n// Mehrheitspartei - form an SPD majority government in the Reichstag.\\n// Panik im Mittelstand - have over 50% of New Middle Class support.\\nif (Q.new_middle_spd_normalized && Q.new_middle_spd_normalized >= 50) {\\n    this.achieve(\'panik_im_mittelstand\');\\n}\\n// Bauernrevolution - have over 50% rural support.\\nif (Q.rural_spd_normalized && Q.rural_spd_normalized >= 50) {\\n    this.achieve(\'bauernrevolution\');\\n}\\nif (Q.catholics_spd_normalized && Q.catholics_spd_normalized >= 50) {\\n    this.achieve(\'katholischer_sozialismus\');\\n}\\nif (Q.workers_spd_normalized >= 80 && Q.new_middle_spd_normalized <= 20 && Q.old_middle_spd_normalized <= 20 && Q.rural_spd_normalized <= 20) {\\n    this.achieve(\'klassenkampf\');\\n}\\nif (Q.workers_spd_normalized >= 40 && Q.new_middle_spd_normalized >= 40 && Q.old_middle_spd_normalized >= 40 && Q.rural_spd_normalized >= 40) {\\n    this.achieve(\'grosse_volkspartei\');\\n}\\n// Räterepublik - begin the transformation to a socialist economy.\\nif (Q.spd_in_government && ((Q.nationalization_progress >= 2 && Q.economic_democracy >= 3) || (Q.nationalization_progress >= 1 && Q.economic_democracy >= 4))) {\\n    this.achieve(\'raterepublik\');\\n}\\n// Polykrise - survive both a fascist coup and a capital strike.\\nif (Q.march_on_berlin_seen && Q.capital_strike_seen && Q.chancellor != \\"Hitler\\" && Q.president != \\"Hitler\\" && !Q.total_defeat) {\\n    this.achieve(\\"polykrise\\");\\n}\\n// Wirtschaftsexperiment - implement two different economic plans.\\nif ((Q.nationalization_progress >= 1 && Q.wtb_implemented >= 1) || (Q.wtb_implemented >= 1 && Q.moderate_plan_progress >= 1) || (Q.nationalization_progress >= 1 && Q.moderate_plan_progress >= 1)) {\\n    this.achieve(\\"wirtschaftsexperiment\\");\\n}\\n// Syndikalismus - support factory takeovers by workers.\\nif (Q.factory_takeovers >= 2) {\\n    this.achieve(\\"syndikalismus\\");\\n}\\n// Stolperstein - lose the civil war against Hitler.\\nif ((Q.chancellor_party == \\"NSDAP\\" || Q.chancellor == \\"Hitler\\" || Q.president == \\"Hitler\\") && Q.total_defeat) {\\n    this.achieve(\'stolperstein\');\\n}\\n// Heidelberger Programm - fulfill the goals of the Heidelberg programm - increase welfare, reform justice, support women\'s rights, progressive taxation, works councils, build a European Union.\\nif ((Q.welfare > 0 && Q.judicial_reform >= 2 && Q.womens_work >= 1 && Q.family_law >= 1 && Q.upper_tax_rates > Q.lower_tax_rates && Q.works_councils > 0 && Q.eu > 0)) {\\n    this.achieve(\'heidelberger_programm\');\\n}"}],"content":{"type":"heading","content":"End"}}},"qualities":{},"qdisplays":{"dissent":{"id":"dissent","type":"qdisplay","content":[{"max":4.999,"output":"very low"},{"min":4.999,"max":14.999,"output":"low"},{"min":14.999,"max":30.999,"output":"medium"},{"min":30.999,"max":49.999,"output":"high"},{"min":49.999,"output":"very high"}]},"infrastructure":{"id":"infrastructure","type":"qdisplay","content":[{"max":0.999,"output":"collapsed"},{"min":0.999,"max":1.999,"output":"few areas supported"},{"min":1.999,"max":2.999,"output":"small areas supported"},{"min":2.999,"max":3.999,"output":"large patches supported"},{"min":3.999,"max":4.999,"output":"low capacity"},{"min":4.999,"max":5.999,"output":"medium capacity"},{"min":5.999,"max":6.999,"output":"above medium capacity"},{"min":6.999,"max":7.999,"output":"somewhat large capacity"},{"min":7.999,"max":8.999,"output":"large network capacity"},{"min":8.999,"max":9.999,"output":"very large network capacity"},{"min":9.999,"output":"robust infrastructure"}]},"loyalty":{"id":"loyalty","type":"qdisplay","content":[{"max":0.06,"output":"completely disloyal"},{"min":0.06,"max":0.19,"output":"very disloyal"},{"min":0.19,"max":0.31,"output":"generally disloyal"},{"min":0.31,"max":0.41,"output":"mostly disloyal"},{"min":0.41,"max":0.54,"output":"divided"},{"min":0.54,"max":0.71,"output":"mostly loyal"},{"min":0.71,"max":0.95,"output":"generally loyal"},{"min":0.95,"output":"completely loyal"}]},"coalition_dissent":{"id":"coalition_dissent","type":"qdisplay","content":[{"max":0,"output":"very low"},{"min":1,"max":1,"output":"low"},{"min":2,"max":2,"output":"medium"},{"min":3,"max":3,"output":"high"},{"min":4,"output":"very high"}]},"legality":{"id":"legality","type":"qdisplay","content":[{"max":-99.9,"output":{"type":"magic","content":"<span style=\\"color: #8c1700;\\" class=\\"tooltip-text\\" title=\\"Seeking to erradicate group\\">Hunted</span>"}},{"min":-99.9,"max":-49.9,"output":{"type":"magic","content":"<span style=\\"color: #b86554;\\" class=\\"tooltip-text\\" title=\\"Targeting organization revenues and personal\\">Suppression</span>"}},{"min":-49.9,"max":-9.9,"output":{"type":"magic","content":"<span style=\\"color: #c8c222;\\" class=\\"tooltip-text\\" title=\\"Targeting key assets to send a message\\">Curtailing</span>"}},{"min":-9.9,"max":9.9,"output":{"type":"magic","content":"<span style=\\"color: #8dcff6;\\" class=\\"tooltip-text\\" title=\\"Unconcerned by activities\\">Indifferent</span>"}},{"min":9.9,"max":49.9,"output":{"type":"magic","content":"<span style=\\"color: #336aa8;\\" class=\\"tooltip-text\\" title=\\"Making opportunistic deals\\">Tolerated</span>"}},{"min":49.9,"max":99.9,"output":{"type":"magic","content":"<span style=\\"color: #021580;\\" class=\\"tooltip-text\\" title=\\"Turning a blind eye to all activities\\">Conencted</span>"}},{"min":99.9,"output":{"type":"magic","content":"<span style=\\"color: #198900;\\" class=\\"tooltip-text\\" title=\\"Openly using organization\\">Patronized</span>"}}]},"militancy":{"id":"militancy","type":"qdisplay","content":[{"max":0.05,"output":"Nonexistant"},{"min":0.05,"max":0.14,"output":"Very low"},{"min":0.14,"max":0.24,"output":"Low"},{"min":0.24,"max":0.44,"output":"Medium-low"},{"min":0.44,"max":0.69,"output":"Medium"},{"min":0.69,"max":1,"output":"High"},{"min":1,"output":"Very high"}]},"month":{"id":"month","type":"qdisplay","content":[{"min":1,"max":1,"output":"January"},{"min":2,"max":2,"output":"February"},{"min":3,"max":3,"output":"March"},{"min":4,"max":4,"output":"April"},{"min":5,"max":5,"output":"May"},{"min":6,"max":6,"output":"June"},{"min":7,"max":7,"output":"July"},{"min":8,"max":8,"output":"August"},{"min":9,"max":9,"output":"September"},{"min":10,"max":10,"output":"October"},{"min":11,"max":11,"output":"November"},{"min":12,"max":12,"output":"December"}]},"relationships":{"id":"relationships","type":"qdisplay","content":[{"max":5,"output":"hostile"},{"min":5,"max":14.9,"output":"frigid"},{"min":14.9,"max":29.9,"output":"cold"},{"min":29.9,"max":39.9,"output":"cool"},{"min":39.9,"max":54.9,"output":"neutral"},{"min":54.9,"max":64.9,"output":"warm"},{"min":64.9,"max":74.9,"output":"friendly"},{"min":74.9,"output":"very friendly"}]},"rival_relationships":{"id":"rival_relationships","type":"qdisplay","content":[{"max":-99.999,"output":{"type":"magic","content":"<span style=\\"color: #8c1700;\\" class=\\"tooltip-text\\" title=\\"Open use of corporate armies and warships\\">Total War</span>"}},{"min":-99.999,"max":-49.999,"output":{"type":"magic","content":"<span style=\\"color: #b86554;\\" class=\\"tooltip-text\\" title=\\"Widespread use of assassinations and terror\\">Bloody Conflict</span>"}},{"min":-49.999,"max":-9.999,"output":{"type":"magic","content":"<span style=\\"color: #c8c222;\\" class=\\"tooltip-text\\" title=\\"Trying to kill or destroy key assets\\">Conflict</span>"}},{"min":-9.999,"max":9.999,"output":{"type":"magic","content":"<span style=\\"color: #8dcff6;\\" class=\\"tooltip-text\\" title=\\"Only clashing where profitable\\">Detente</span>"}},{"min":9.999,"max":49.999,"output":{"type":"magic","content":"<span style=\\"color: #336aa8;\\" class=\\"tooltip-text\\" title=\\"Avoiding harming each other\\">Truce</span>"}},{"min":49.999,"max":99.999,"output":{"type":"magic","content":"<span style=\\"color: #021580;\\" class=\\"tooltip-text\\" title=\\"Finding agreements\\">Understanding</span>"}},{"min":99.999,"output":{"type":"magic","content":"<span style=\\"color: #198900;\\" class=\\"tooltip-text\\" title=\\"Far reaching cooperation\\">Alliance</span>"}}]},"strength":{"id":"strength","type":"qdisplay","content":[{"min":0,"max":10,"output":"weak"},{"min":10,"max":25,"output":"moderate"},{"min":25,"max":40,"output":"strong"},{"min":40,"max":60,"output":"very strong"},{"min":60,"output":"dominant"}]},"taxation":{"id":"taxation","type":"qdisplay","content":[{"max":-6,"output":"extremely low"},{"min":-5,"max":-4,"output":"very low"},{"min":-3,"max":-2,"output":"low"},{"min":-1,"max":-1,"output":"below baseline"},{"min":0,"max":0,"output":"moderate"},{"min":1,"max":1,"output":"above baseline"},{"min":2,"max":3,"output":"high"},{"min":4,"max":5,"output":"very high"},{"min":6,"output":"extremely high"}]}},"tagLookup":{"advisor":{"jacobs":true,"callista":true,"shuffle_leadership.hire_stacy":true,"stacy":true,"shuffle_leadership.hire_callista":true},"nerds":{"jacobs":true},"event":{"corporate_infighting":true,"new_year":true,"syndicate_infighting":true,"2300_election":true,"september_convention":true,"mss_dundalk_affair":true},"govt_affairs":{"shuffle_cabinet":true,"ward_infrastructure":true},"cabinet":{"shuffle_cabinet":true},"remove_advisor":{"shuffle_leadership.stop":true},"endings":{"game_over.hitler_wins":true,"game_over.war_against_hitler":true,"game_over.no_hitler":true,"game_over.nsdap_win":true,"game_over.civil_war_won":true,"game_over.civil_war_lost":true,"game_over.long_war":true,"game_over.braun_victorious":true,"game_over.president_schumacher":true,"game_over.president_juchacz":true,"game_over.president_einstein":true,"game_over.spd_victorious":true,"game_over.communist_victory":true,"game_over.works_program":true,"game_over.unemployment_reduced":true,"game_over.unemployment_reduced_2":true,"game_over.unemployment_high":true,"game_over.emergency_government":true,"game_over.peoples_party_achieved":true,"game_over.nationalization_achieved":true,"game_over.works_councils":true,"game_over.european_union":true,"game_over.achievements":true},"tunnel_clans":{"callista":true},"punk":{"stacy":true},"party_affairs":{"shuffle_leadership":true,"community_outreach":true,"ward_infrastructure":true}}}'},function e(t,n,i){function a(o,s){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!s&&c)return c(o,!0);if(r)return r(o,!0);var p=new Error("Cannot find module '"+o+"'");throw p.code="MODULE_NOT_FOUND",p}var d=n[o]={exports:{}};t[o][0].call(d.exports,(function(e){var n=t[o][1][e];return a(n||e)}),d,d.exports,e,t,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(e,t,n){!function(){"use strict";var e=function(e){if(!e)throw new Error("Assertion failed.")},n=function(e,t){for(var n=0;n<e.length;++n)t(e[n])},i=function(e,t){for(var n in e)t(n,e[n])},a=function(){for(var e={},t=0;t<arguments.length;++t){var n=arguments[t];for(var i in n)e[i]=n[i]}return e},r=function(e){e=e.trim();var t=new Function("state","Q",e);return t.source=e,t},o=function(e,t,i){void 0!==e&&n(e,(function(e){try{e.call(t,i,i.qualities)}catch(e){console.log("Error:",e)}}))},s=function(e,t,n,i){var a=t;if(void 0===e)return a;try{a=!!e.call(n,i,i.qualities)}catch(e){console.log("Error:",e)}return a},c=function(e,t,n,i){var a=t;if(void 0===e)return a;try{a=e.call(n,i,i.qualities)}catch(t){console.log("Error in expression",e,":",t)}return a},p=function(e){return[{type:"paragraph",content:e}]},d=function(e){return Math.floor(e)===e&&e>=0&&e<=12?["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve"][e]:e.toString()},l=function(e){if(!(Math.floor(e)===e&&e>=0))return e.toString();if(e<=12)return["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth"][e];if(e=e.toString(),/1[0-9]$/.test(e))return e+"th";switch(e.substr(e.length-1,1)){case"1":return e+"st";case"2":return e+"nd";case"3":return e+"rd";default:return e+"th"}},h=function(e){if(Math.floor(e)!==e)return e.toString();if(e>3)return"superb+"+(e-3);if(e<-3)return"terrible"+(e+3);switch(e){case 3:return"superb";case 2:return"great";case 1:return"good";case 0:return"fair";case-1:return"mediocre";case-2:return"poor";case-3:return"terrible"}},u=function(e,t){for(var n=0;n<t.content.length;++n){var i=t.content[n],a=i.min,r=i.max;if((void 0===a||a<=e)&&(void 0===r||r>=e))return void 0!==i.output?i.output:e.toString()}return e.toString()},m=function(e,t,n,i){n||(n=.6),n>1&&(n/=100);var a=n*(e/t);return a>1&&(a=1),a},_=function(e,t,n){n||(n=.1),n>1&&(n/=100);var i=(e-t)*n+.5;return i>1?i=1:i<n&&(i=n),i},g=function(e){return e<=.1?"almost impossible":e<=.3?"high-risk":e<=.4?"tough":e<=.5?"very chancy":e<=.6?"chancy":e<=.7?"modest":e<=.8?"very modest":e<=.9?"low risk":"straightforward"},y=function(){};y.prototype.beginGame=function(){},y.prototype.displayContent=function(e,t){},y.prototype.displayDecks=function(e){},y.prototype.displayHand=function(e){},y.prototype.displayPinnedCards=function(e){},y.prototype.displayChoices=function(e){},y.prototype.displayGameOver=function(){this.displayContent(p("Game Over"))},y.prototype.removeChoices=function(){},y.prototype.beginOutput=function(){},y.prototype.endOutput=function(){},y.prototype.newPage=function(){},y.prototype.setStyle=function(e){},y.prototype.signal=function(e){},y.prototype.setBg=function(e){},y.prototype.setSprites=function(e){},y.prototype.setSpriteStyle=function(e,t){},y.prototype.audio=function(e){},y.makeParentOf=function(e){e.prototype=new y,e.constructor=e};var f=function(e,t){this.ui=e,this.game=t};f.prototype.displayGameOver=function(){return this.ui.displayGameOver(),this},f.prototype.displayChoices=function(){var t=this.getCurrentChoices();e(t);var n=this.getCurrentScene();if(n.isHand){var i=[],a=[];for(var r of t){var o=this.game.scenes[r.id];o.isDeck?(this._drawFromDeck(r.id)?r.canChoose=!0:(r.canChoose=!1,r.subtitle=r.unavailableSubtitle||"No cards available from deck."),r.isDeck=!0,r.image=o.cardImage,i.push(r)):o.isPinnedCard&&(r.isDeck=!1,r.image=o.cardImage,a.push(r))}this.state.currentHands[this.state.sceneId]||(this.state.currentHands[this.state.sceneId]=[]);var s=this.state.currentHands[this.state.sceneId],c={};for(var p of s)c[p.id]=p;c=this.__filterViewable(c);for(var d=0;d<s.length;d++)for(;s[d]&&!c[s[d].id];)s.splice(d,1);this.ui.displayDecks(i),this.ui.displayHand(s,n.maxCards),this.ui.displayPinnedCards(a)}else this.state.enableTranscript&&this.transcript.push(t),this.ui.displayChoices(t);return this},f.prototype.displaySceneContent=function(t){var n=this.getCurrentScene();e(n);var i=null;n.faceImage&&(i=n.faceImage);var a=n.signal||this.game.sceneSignal;if(void 0!==a&&this.ui.signal({signal:a,event:"scene-display",id:this.state.sceneId}),t?(this.ui.newPage(),this.ui.displayContent(this.state.tempCurrentContent,i),this.state.currentContent=this.state.tempCurrentContent.slice()):n.newPage&&(this.ui.newPage(),this.state.currentContent=[]),this.ui.setStyle(n.style),this.ui.removeChoices(),void 0!==n.content&&!t){var r=this._makeDisplayContent(n.content,!0);this.state.enableTranscript&&(this.transcript=this.transcript.concat(r)),this.state.currentContent=this.state.currentContent.concat(r),this.ui.displayContent(r,i)}return this._runActions(n.onDisplay),this},f.prototype.choose=function(t){var n=this.choiceCache;if(e(n),n.length<=t)throw new Error("No choice at index "+t+", only "+n.length+" choices are available.");var i=n[t];if(!i.canChoose)throw new Error("Attempted to choose index "+t+", but that choice is unavailable.");var a=i.id;return this.state.enableTranscript&&this.transcript.push("> "+i.title),delete this.choiceCache,this.goToScene(a),this},f.prototype.chooseSceneId=function(e){return delete this.choiceCache,this.goToScene(id),this},f.prototype.drawCard=function(t){var n=this.state.sceneId,i=this.getCurrentScene();e(i);var a=this.state.currentHands[n];if(i.maxCards<=a.length)return{id:null,title:"no_space_in_hand"};var r=this._drawFromDeck(t);if(!r)return{id:null,title:"no_card_in_deck"};this.state.lastDrawnCard=r;var o=this.game.scenes[r.id].cardImage;return r.image=o,this.state.currentHands[n].push(r),this.ui.displayHand(this.state.currentHands[n],i.maxCards),r},f.prototype.playCard=function(e){for(var t=this.state.sceneId,n=this.state.currentHands[t],i=0;i<n.length;i++)if(n[i].id==e){n.splice(i,1);break}this.state.lastPlayedCard=this.game.scenes[e],delete this.choiceCache,this.goToScene(e)},f.prototype.playPinnedCard=function(e){delete this.choiceCache,this.goToScene(e)},f.prototype.goToScene=function(e){this.state.sceneIdsSinceGoTo=[],this.ui.beginOutput(),this.__changeScene(e),this.ui.endOutput()},f.prototype.beginGame=function(e){this.random=e?v.fromSeeds(e):v.fromUnique(),this.state={sceneId:null,sceneIdsSinceGoTo:[],rootSceneId:this.game.rootScene||this.game.firstScene||"root",gameOver:!1,visits:{},qualities:{},currentRandomState:null,currentContent:[],tempCurrentContent:[],prevSpecialSceneId:null,prevSceneId:null,prevTopSceneId:null,jumpSceneId:null,achievements:{},bg:null,sceneStack:[],justReturned:!1,justReturnedStart:!1,justReturnedEnd:!1,sprites:{},currentHands:{},lastDrawnCard:null,lastPlayedCard:null,enableTranscript:!1,disableSaves:!1},this.transcript=[],this._setUpQualities(),this._loadAchievements(),this.ui.beginGame();var t=this.game.firstScene||this.state.rootSceneId;return this.goToScene(t),this},f.prototype._loadAchievements=function(){if("undefined"!=typeof localStorage&&localStorage[this.game.title+"_achievements"])for(var e in this.state.achievements=JSON.parse(localStorage[this.game.title+"_achievements"]),this.state.achievements)this.state.qualities["achievement_"+e]=1},f.prototype.gameOver=function(){return this.state.gameOver=!0,this.displayGameOver(),this},f.prototype.isGameOver=function(){return this.state.gameOver},f.prototype.getCurrentScene=function(){var t=this.game.scenes[this.state.sceneId];return e(void 0!==t),t},f.prototype.getCurrentChoices=function(){return this.choiceCache},f.prototype.setState=function(e){if(this.state=e,this._setUpQualities(),this.random=v.fromState(this.state.currentRandomState),this._loadAchievements(),this.isGameOver())this.displayGameOver();else{var t=this.getCurrentScene();this.choiceCache=this._compileChoices(t),this.ui.newPage(),this.ui.removeChoices(),this.ui.displayContent(this.state.currentContent),this.displayChoices(),this.ui.setSprites(this.state.sprites),this.ui.setBg(this.state.bg)}return this},f.prototype.getExportableState=function(){return this.state},f.prototype._getQDisplay=function(t,n){switch(n){case"cardinal":case"number":return d(t);case"ordinal":return l(t);case"fudge":return h(t);default:var i=this.game.qdisplays[n];return e(void 0!==i),u(t,i)}},f.prototype._evaluateStateDependencies=function(t){for(var n=[],i=0;i<t.length;++i){var a,r=t[i],o=r.fn;if("insert"===r.type)a=this._runExpression(o),a=r.qdisplay?this._getQDisplay(a,r.qdisplay):a.toString();else e("predicate"===r.type),a=this._runPredicate(o);void 0!==a.stateDependencies&&(a=this._makeDisplayContent(a,!1)),n.push(a)}return n},f.prototype._mergeStateEvalsInArray=function(e,t){Array.isArray(e)||(e=[e]);for(var n=[],i=0;i<e.length;++i)n=n.concat(this._mergeStateEvals(e[i],t));return n},f.prototype._mergeStateEvals=function(e,t){if(void 0===e.type)return[e];var n;switch(e.type){case"conditional":n=t[e.predicate]?this._mergeStateEvalsInArray(e.content,t):[];break;case"insert":n=t[e.insert];break;default:var i={type:e.type};i.content=this._mergeStateEvalsInArray(e.content,t),n=[i]}return n},f.prototype._makeDisplayContent=function(e,t){if(void 0===e.content)return Array.isArray(e)?e:t?[{type:"paragraph",content:e}]:[e];if(void 0===e.stateDependencies&&void 0!==e.type)return[e];var n=e.stateDependencies,i=e.content;if(n&&n.length>0){var a=this._evaluateStateDependencies(n);Array.isArray(i)||(i=[i]),i=this._mergeStateEvalsInArray(i,a)}return i},f.prototype._setUpQualities=function(){var e=this._qualitiesAccessorsPrivate={},t=this.state.qualities,n=this;i(this.game.qualities,(function(i,a){var r=a.min,o=a.max,s=a.signal||n.game.qualitySignal,c=a.isValid;(void 0!==r||void 0!==o||void 0!==s||void 0!==c)&&(void 0!==t[i]&&(e[i]=t[i]),t.__defineGetter__(i,(function(){return e[i]})),t.__defineSetter__(i,(function(t){void 0!==r&&t<r&&(t=r),void 0!==o&&t>o&&(t=o);var a=e[i];if(e[i]=t,n._runPredicate(c,!0)||(e[i]=t=a),void 0!==s&&t!==a){var p={signal:s,event:"quality-change",id:i,now:t};void 0!==a&&(p.was=a),n.ui.signal(p)}}))),void 0!==a.initial&&void 0===t[i]&&(t[i]=a.initial)}))},f.prototype._runActions=function(e){o(e,this,this.state)},f.prototype._runPredicate=function(e,t){return s(e,t,this,this.state)},f.prototype._runExpression=function(e,t){return c(e,t,this,this.state)},f.prototype.__changeScene=function(t){this.state.justReturned&&(this.state.justReturned=!1);var n=null,i=!1;"prevScene"==t?(this.prevSceneId,n=this.game.scenes[this.state.prevSceneId],t=this.state.prevSceneId,e(n)):"prevTopScene"==t?(n=this.game.scenes[this.state.prevTopSceneId],t=this.state.prevTopSceneId,e(n)):"jumpScene"==t?(n=this.game.scenes[this.state.jumpSceneId],t=this.state.jumpSceneId,e(n)):"backSpecialScene"===t?(n=this.game.scenes[this.state.prevSpecialSceneId],t=this.state.prevSpecialSceneId,i=!0,e(n),this.state.prevSpecialSceneId=null):(n=this.game.scenes[t],e(n));var a=this.state.sceneId,r=this.game.scenes[a];if(a){this.state.prevSceneId=a,r.newPage&&(this.state.prevTopSceneId=a),n.isSpecial&&null===this.state.prevSpecialSceneId&&(this.state.tempCurrentContent=this.state.currentContent.slice(),this.state.prevSpecialSceneId=a);var o=this.getCurrentScene();this._runActions(o.onDeparture);var s=o.signal||this.game.sceneSignal;void 0!==s&&this.ui.signal({signal:s,event:"scene-departure",id:this.state.sceneId,to:t})}if(this.state.sceneId=t,this.state.sceneIdsSinceGoTo.push(t),n.setRoot&&(this.state.rootSceneId=t),n.setJump&&(this.state.jumpSceneId=n.setJump),void 0!==n.countVisitsMax&&(void 0===this.state.visits[t]?this.state.visits[t]=1:this.state.visits[t]<n.countVisitsMax&&this.state.visits[t]++),!i&&!this.state.justReturned&&(this._runActions(n.onArrival),n.call)){var c=this.game.scenes[n.call];this._runActions(c.onArrival)}var p=n.signal||this.game.sceneSignal;if(void 0!==p){var d={signal:p,event:"scene-arrival",id:t};a&&(d.from=a),this.ui.signal(d)}this.state.currentRandomState=this.random.getState(),this.displaySceneContent(i),n.setBg&&(this.state.bg=n.setBg,this.ui.setBg(n.setBg)),n.setSprites&&(this.state.sprites=n.setSprites,this.ui.setSprites(n.setSprites)),n.audio&&this.ui.audio(n.audio),n.setTopLeftStyle&&this.ui.setSpriteStyle("topLeft",n.setTopLeftStyle),n.setTopRightStyle&&this.ui.setSpriteStyle("topRight",n.setTopRightStyle),n.setBottomLeftStyle&&this.ui.setSpriteStyle("bottomLeft",n.setBottomLeftStyle),n.setBottomRightStyle&&this.ui.setSpriteStyle("bottomRight",n.setBottomRightStyle),n.achievement&&this.achieve(n.achievement);var l=!1;if(!0===n.gameOver)l=!0,this.gameOver();else if(n.goSubEnd&&!this.state.justReturnedEnd)for(var h=[],u=0;u<n.goSub.length;++u){var g=n.goSub[u];(void 0===g.predicate||this._runPredicate(g.predicate))&&h.push(g.id)}else if(n.goTo){for(var y=[],f=0;f<n.goTo.length;++f){var v=n.goTo[f];(void 0===v.predicate||this._runPredicate(v.predicate))&&y.push(v.id)}if(1===y.length)l=!0,this.__changeScene(y[0]);else if(y.length>1){var w=y[this.random.uint32()%y.length];l=!0,this.__changeScene(w)}}else if(n.goToRef){for(var b=[],Q=0;Q<n.goToRef.length;++Q){var k=n.goToRef[Q];(void 0===k.predicate||this._runPredicate(k.predicate))&&b.push(k.id)}if(1===b.length)l=!0,this.__changeScene(this.state.qualities[b[0]]);else if(b.length>1){var S=b[this.random.uint32()%b.length];l=!0,this.__changeScene(this.state.qualities[S])}}var x,P,$,D=!1;if(n.checkQuality&&n.broadDifficulty&&n.checkSuccessGoTo&&n.checkFailureGoTo){var C=.6;n.difficultyScaler&&(C=n.difficultyScaler),x=m(this.state.qualities[n.checkQuality]||0,n.broadDifficulty,C),D=!0}else if(n.checkQuality&&n.narrowDifficulty&&n.checkSuccessGoTo&&n.checkFailureGoTo){var A=.1;n.difficultyIncrement&&(A=n.difficultyIncrement),x=_(this.state.qualities[n.checkQuality]||0,n.narrowDifficulty,A),D=!0}D&&(P=x,l=!0,(($=this.random)?$.random():Math.random())<P?this.__changeScene(n.checkSuccessGoTo):this.__changeScene(n.checkFailureGoTo)),l||(this.choiceCache=this._compileChoices(n),null===this.choiceCache?!1!==n.gameOver&&this.gameOver():this.displayChoices())},f.prototype.achieve=function(e){this.state.achievements[e]=1,this.state.qualities["achievement_"+e]=1,this.state.qualities["game_achievement_"+e]=1,"undefined"!=typeof localStorage&&(localStorage[this.game.title+"_achievements"]=JSON.stringify(this.state.achievements))},f.prototype.__getChoiceSelectionData=function(e){var t=[];for(var n in e){var i=this.game.scenes[n],a=e[n];a.order=a.order||i.order||0,a.priority=a.priority||i.priority||1,void 0===a.frequency&&(a.frequency=i.frequency,void 0===a.frequency&&(a.frequency=100)),i.frequencyVar&&(a.frequency=this.runExpression(i.frequencyVar)),a.selectionPriority=0,t.push(a)}return t},f.prototype.__filterViewable=function(e){var t={};for(var n in e){var i=this.game.scenes[n],a=i.maxVisits;if(void 0!==a)if((this.state.visits[n]||0)>=a)continue;if(void 0!==i.maxVisitsVar)if(a=this._runExpression(i.maxVisitsVar),(this.state.visits[n]||0)>=a)continue;this._runPredicate(i.viewIf,!0)&&(t[n]=e[n])}return t},f.prototype.__getChoiceIdsFromOptions=function(t){var r=this,o={};return n(t,(function(t){if(r._runPredicate(t.viewIf,!0))if("@"===t.id.substr(0,1)){var n=t.id.substring(1),s=a(t,{id:n});o[n]=s}else{e("#"===t.id.substr(0,1));var c=r.game.tagLookup[t.id.substring(1)];i(c,(function(e){void 0===o[e]&&(o[e]=a(t,{id:e}))}))}})),o},f.prototype.__filterByPriority=function(t,i,a){e(null===i||null===a||a>=i);var r,o,s=this,c=[],p=[];t.sort((function(e,t){return t.priority-e.priority}));for(var d=0;d<t.length;++d){if((r=t[d]).priority!==o){if(void 0!==o&&(null===i||d>=i))break;c.push.apply(c,p),p=[],o=r.priority}p.push(r)}var l=c.length,h=l+p.length;if(null===a||a>=h)c.push.apply(c,p);else{n(p,(function(e){null===e.frequency?e.selectionPriority=0:e.selectionPriority=s.random.random()/e.frequency})),p.sort((function(e,t){return e.selectionPriority-t.selectionPriority}));var u=a-l,m=p.slice(0,u);c.push.apply(c,m)}return c},f.prototype.__getChoiceDisplayData=function(t){for(var n=[],i=0,a=0;a<t.length;++a){var r=t[a],o=this.game.scenes[r.id],s=!0;r.chooseIf&&(s=this._runPredicate(r.chooseIf,!0)),s&&o.chooseIf&&(s=this._runPredicate(o.chooseIf,!0));var c=r.title||o.title;e(c);var p=null;s||(p=r.unavailableSubtitle||o.unavailableSubtitle),p||(p=r.subtitle||o.subtitle);var d,l={id:r.id,canChoose:s,title:this._makeDisplayContent(c,!1)};if(p&&(l.subtitle=this._makeDisplayContent(p,!1)),o.checkQuality&&o.broadDifficulty&&o.checkSuccessGoTo&&o.checkFailureGoTo){var h=.6;o.difficultyScaler&&(h=o.difficultyScaler),d=m(this.state.qualities[o.checkQuality]||0,o.broadDifficulty,h),l.checkQuality=o.checkQuality,l.successProb=d,l.difficulty=g(d)}else if(o.checkQuality&&o.narrowDifficulty&&o.checkSuccessGoTo&&o.checkFailureGoTo){var u=.1;o.difficultyIncrement&&(u=o.difficultyIncrement),d=_(this.state.qualities[o.checkQuality]||0,o.narrowDifficulty,u),l.checkQuality=o.checkQuality,l.successProb=d,l.difficulty=g(d)}n.push(l),s&&++i}return{choices:n,numChoosable:i}},f.prototype._compileChoices=function(t){e(t);var n=t.options,i=[],a=0;if(void 0!==n){var r=this.__getChoiceIdsFromOptions(n);r=this.__filterViewable(r);var o=this.__getChoiceSelectionData(r),s=t.minChoices||null,c=t.maxChoices||null;(o=this.__filterByPriority(o,s,c)).sort((function(e,t){return e.order-t.order}));var p=this.__getChoiceDisplayData(o);i=p.choices,a=p.numChoosable}if(0===a){var d=this.state.rootSceneId;if(d!==this.state.sceneId){var l=this.game.scenes[d].chooseIf;l&&!this._runPredicate(l,!0)||(i.push({id:d,title:"Continue...",canChoose:!0}),++a)}}return a>0?i:null},f.prototype._drawFromDeck=function(e){var t=this.game.scenes[e],n=this._compileChoices(t);if(!n)return null;var i=[],a=this.state.currentHands[this.state.sceneId];for(var r of(a||(a=[]),a=a.map((e=>e.id)),n)){var o=this.game.scenes[r.id];r.canChoose&&o.isCard&&a.indexOf(r.id)<0&&i.push(r)}return i?i[this.random.uint32()%i.length]:null};var v=function(e,t,n,i,a){this.getState=function(){return[e,t,n,i,a]};this.uint32=function(){var r,o,s,c,p=(n^n>>>7)>>>0;return n=i,i=a,a=t,t=e,((((r=i+i+1)>>16&65535)*(c=65535&(o=e=e^e<<6^(p^p<<13)>>>0))+(s=65535&r)*(o>>16&65535)&65535)<<16>>>0)+s*c>>>0},this.random=function(){return 2.3283064365386963e-10*this.uint32()}},w=1;v.fromUnique=function(){var e=(new Date).getTime();return v.fromSeeds([e,w++])},v.fromTime=function(){return v.fromSeeds([(new Date).getTime()])},v.fromSeeds=function(e){for(var t=886756453,n=88675123,i=123456789,a=362436069,r=521288629,o=function(e){e=e.toString();for(var t=4022871197,n=0;n<e.length;n++){var i=.02519603282416938*(t+=e.charCodeAt(n));i-=t=i>>>0,t=(i*=t)>>>0,t+=4294967296*(i-=t)}return 2.3283064365386963e-10*(t>>>0)},s=0;s<e.length;s++){var c=4294967296*o(e[s]);t^=c,n^=c,i^=c,a^=c,r^=c}return new v(t,n,i,a,r)},v.fromState=function(e){return new v(e[0],e[1],e[2],e[3],e[4])},t.exports={makeFunctionFromSource:r,runActions:o,runPredicate:s,runExpression:c,convertJSONToGame:function(e,t){try{return t(null,JSON.parse(e,(function(e,t){return function(e){var t=typeof e;return"function"===t||e&&"object"===t||!1}(t)&&void 0!==t.$code?r(t.$code):t})))}catch(e){return t(e)}},simpleContent:p,getCardinalNumber:d,getOrdinalNumber:l,getUserQDisplay:u,getFudgeDisplay:h,DendryEngine:f,UserInterface:y,NullUserInterface:y,Random:v}}()},{}],2:[function(e,t,n){!function(t){"use strict";var n=e("./content/html"),i=e("../engine"),a=function(e,t){this.game=e,this.$content=t,this._registerEvents(),this.dendryEngine=new i.DendryEngine(this,e),this.base_settings={disable_bg:!1,animate:!1,animate_bg:!0,disable_audio:!1,show_portraits:!0,dark_mode:!1},this.current_settings={disable_bg:!1,animate:!1,animate_bg:!0,disable_audio:!1,show_portraits:!0,dark_mode:!1},this.disable_bg=!1,this.animate=!1,this.animate_bg=!0,this.disable_audio=!1,this.show_portraits=!0,this.fade_time=600,this.bg_fade_out_time=200,this.bg_fade_in_time=1e3,this.sound_fade_time=2e3,this.contentToHTML=n,this.spriteLocs={topLeft:1,topRight:1,bottomLeft:1,bottomRight:1},this.currentAudio=null,this.currentAudioURL="",this.audioQueue=[],this.audioPlaylist=[],this.onNewPage=!1,this.save_prefix=e.title+"_"+e.author+"_save",this.max_slots=8,this.DateOptions={hour:"numeric",minute:"numeric",second:"numeric",year:"numeric",month:"short",day:"numeric"}};i.UserInterface.makeParentOf(a),a.prototype.loadGame=function(e){var t=this;e.endsWith(".json")||(e.endsWith("/")?e+="game.json":e+="/game.json"),fetch(e).then((e=>e.text())).then((e=>{game=i.convertJSONToGame(e,(function(e,t){if(e)throw e;return t})),t.game=game,t.dendryEngine=new i.DendryEngine(t,game),t.dendryEngine.beginGame()})).catch((e=>console.log(e)))},a.prototype.displayContent=function(e,i){var a=t(n.convert(e));if(i&&this.show_portraits){!0,console.log(i);var r=document.createElement("div");r.className="face-figure";var o=new Image;o.className="face-img",r.appendChild(o),a.splice(1,0,r),o.src=i}this.animate?(a.fadeIn(this.fade_time),this.$content.append(a)):this.$content.append(a),a.focus(),window&&window.onDisplayContent&&window.onDisplayContent()},a.prototype.displayGameOver=function(){var e=t("<p>").text(this.getGameOverMsg()).addClass("game-over");this.animate?(e.fadeIn(this.fade_time),this.$content.append(e)):this.$content.append(e),e.focus()},a.prototype.displayChoices=function(e){for(var i=t("<ul>").addClass("choices"),a=0;a<e.length;++a){var r=e[a],o=n.convertLine(r.title),s="";void 0!==r.subtitle&&(s=n.convertLine(r.subtitle));var c=t("<li>"),p=c;r.canChoose?(p=t("<a>").attr({href:"#","data-choice":a}),c.html(p)):p.addClass("unavailable"),p.html(o),r.checkQuality&&r.difficulty&&void 0!==r.successProb&&(s&&(s+="<br>"),s+="Check: "+r.checkQuality+"<br>",s+="Difficulty: "+r.difficulty+" ("+Math.floor(100*r.successProb)+"%)"),s&&c.append(t("<div>").addClass("subtitle").html(s)),i.append(c)}this.animate?(i.fadeIn(this.fade_time),this.$content.append(i)):this.$content.append(i),i.focus(),this.onNewPage&&(this.onNewPage=!1,window&&window.onNewPage&&window.onNewPage())},a.prototype.newPage=function(){if(this.animate){this.$content;this.$content.empty(),this.$content.children().fadeOut(this.fade_time,(function(){}))}else this.$content.empty();this.onNewPage=!0},a.prototype.setStyle=function(e){this.$content.removeClass(),void 0!==e&&this.$content.addClass(e)},a.prototype.removeChoices=function(){t(".choices",this.$content).remove(),t(".hidden",this.$content).remove()},a.prototype.beginOutput=function(){t("#read-marker",this.$content).remove(),this.$content.append(t("<hr>").attr("id","read-marker"))},a.prototype.endOutput=function(){var e=t("#read-marker");this.animate&&(e.length>0?t("html, body").animate({scrollTop:e.offset().top},this.fade_time):t("html, body").animate({scrollTop:0},this.fade_time))},a.prototype.signal=function(e){console.log(e);var t=e.signal,n=e.event,i=e.id;window&&window.handleSignal&&window.handleSignal(t,n,i)},a.prototype.displayHand=function(e,n){if(window&&window.displayHand)return window.displayHand(e,n),null;var i="Hand - click a card to play.";window.handDescription&&(i=window.handDescription),this.dendryEngine.state.qualities.handDescription&&(i=this.dendryEngine.state.qualities.handDescription);var a=t(".hand"),r=!1;0==a.length?(a=t("<ul>").addClass("hand"),this.$content.append(t("<hr>")),this.$content.append(t("<p>").addClass("hand-description").text(i))):(a.empty(),r=!0);for(var o=0;o<n;o++){var s=t("<li>").addClass("card-in-hand");if(e[o]){var c=e[o],p=t("<a>").addClass("card").attr({href:"#","card-id":c.id,title:c.title}),d=t("<span>").addClass("card-caption").text(c.title);if(c.image){var l=t("<img>").addClass("card-img").attr({src:c.image});p.append(l)}if(c.subtitle){var h=t("<span>").addClass("card-tooltip").text(c.subtitle);p.append(h)}s.append(p),s.append(d),a.append(s)}else{var u=t("<div>").addClass("blank-card");s.append(u)}a.append(s)}r||this.$content.append(a)},a.prototype.displayDecks=function(e){if(window&&window.displayDecks)return window.displayDecks(e),null;var n="Decks - click a deck to draw a card.";window.deckDescription&&(n=window.deckDescription),this.dendryEngine.state.qualities.deckDescription&&(n=this.dendryEngine.state.qualities.deckDescription),this.$content.append(t("<hr>")),this.$content.append(t("<p>").addClass("deck-description").text(n));var i=t("<ul>").addClass("decks");for(var a of e){var r=t("<li>").addClass("deck"),o=t("<a>").addClass("card").attr({href:"#","card-id":a.id,title:a.title}),s=t("<span>").addClass("card-caption").text(a.title);if(a.image){var c=t("<img>").addClass("card-img").attr({src:a.image});o.append(c)}if(a.subtitle){var p=t("<span>").addClass("card-tooltip").text(a.subtitle);o.append(p)}a.canChoose||(r=r.addClass("unavailable-card")),r.append(o),r.append(s),i.append(r)}this.$content.append(i)},a.prototype.displayPinnedCards=function(e){if(0==e.length)return null;if(window&&window.displayPinnedCards)return window.displayPinnedCards(e),null;var n="Pinned cards - click a card to play.";window.pinnedCardsDescription&&(n=window.pinnedCardsDescription),this.dendryEngine.state.qualities.pinnedCardsDescription&&(n=this.dendryEngine.state.qualities.pinnedCardsDescription),this.$content.append(t("<hr>")),this.$content.append(t("<p>").addClass("pinned-text-description").text(n));var i=t("<ul>").addClass("pinned-cards");for(var a of e){var r=t("<li>").addClass("pinned-card"),o=t("<a>").addClass("card").attr({href:"#","card-id":a.id,title:a.title}),s=t("<span>").addClass("card-caption").text(a.title);if(a.image){var c=t("<img>").addClass("card-img").attr({src:a.image});o.append(c)}if(a.subtitle){var p=t("<span>").addClass("card-tooltip").text(a.subtitle);o.append(p)}r.append(o),r.append(s),i.append(r)}this.$content.append(i)},a.prototype.setBg=function(e){this.disable_bg?(t("#bg1").addClass("content_hidden"),t("#bg1").removeClass("content_visible"),t("#bg1").css("background-image","none")):e&&"none"!=e&&"null"!=e?e.startsWith("#")||e.startsWith("rgba(")||e.startsWith("rgb(")?this.animate_bg?(t("#bg1").fadeOut(this.bg_fade_out_time,(function(){t("#bg1").css("background-image","none"),t("#bg1").css("background-color",e)})),t("#bg1").fadeIn(this.bg_fade_in_time,(function(){t("#bg2").css("background-image","none")})),console.log("changing background color "+e)):(t("#bg1").css("background-image","none"),t("#bg1").css("bacground-color",e)):e.startsWith("linear-gradient(")?this.animate_bg?(t("#bg1").fadeOut(this.bg_fade_out_time,(function(){t("#bg1").css("background-image",e)})),t("#bg1").fadeIn(this.bg_fade_in_time,(function(){t("#bg2").css("background-image",e)})),console.log("changing background gradient "+e)):t("#bg1").css("background-image",e):this.animate_bg?(t("#bg1").fadeOut(this.bg_fade_out_time,(function(){t("#bg1").css("background-image",'url("'+e+'")')})),t("#bg1").fadeIn(this.bg_fade_in_time,(function(){t("#bg2").css("background-image",t("#bg1").css("background-image"))}))):t("#bg1").css("background-image",'url("'+e+'")'):this.animate_bg?(t("#bg1").addClass("content_hidden"),t("#bg1").removeClass("content_visible"),setTimeout((function(){t("#bg1").css("background-image","none"),t("#bg1").removeClass("content_hidden"),t("#bg1").addClass("content_visible")}),100)):t("#bg1").css("background-image","none")},a.prototype.setSprites=function(e){if(window&&window.setSprites)window.setSprites(e);else{if(!this.show_portraits||"none"==e||"clear"==e)return t("#topLeftSprite").children().fadeOut(this.fade_time,(function(){t("#topLeftSprite").empty()})),t("#topRightSprite").children().fadeOut(this.fade_time,(function(){t("#topRightSprite").empty()})),t("#bottomLeftSprite").children().fadeOut(this.fade_time,(function(){t("#bottomLeftSprite").empty()})),void t("#bottomRightSprite").children().fadeOut(this.fade_time,(function(){t("#bottomRightSprite").empty()}));if(e instanceof Array)for(var n=0;n<e.length;n++){var i=e[n][0],a=e[n][1];this.setSprite(i,a)}else if(e)for(var r in Object.keys(e))sprites.push([r,e[r]])}},a.prototype.setSprite=function(e,n){if(this.show_portraits)if(window&&window.setSprite)window.setSprite(e,n);else{var i;if("topleft"==(e=e.toLowerCase())?i=t("#topLeftSprite"):"topright"==e?i=t("#topRightSprite"):"bottomleft"==e?i=t("#bottomLeftSprite"):"bottomright"==e&&(i=t("#bottomRightSprite")),"none"==n||"clear"==n)return delete this.dendryEngine.state.sprites[e],void i.fadeOut(this.fade_time,(function(){i.empty()}));this.dendryEngine.state.sprites[e]=n,i.fadeOut(this.fade_time,(function(){i.emtpy();var e=new Image;e.src=n,i.append(e),console.log("fadeIn"),i.fadeIn(this.fade_time)}))}},a.prototype.setSpriteStyle=function(e,n){if(window&&window.setSpriteStyle)window.setSpriteStyle(e,n);else{var i;if("topleft"==e)i=t("#topLeftSprite");else if("topright"==e)i=t("#topRightSprite");else if("bottomleft"==e)i=t("#bottomLeftSprite");else{if("bottomright"!=e)return;i=t("#bottomRightSprite")}i.css(n)}},a.prototype.audio=function(e){if(this.disable_audio)this.currentAudio&&(this.currentAudio.pause(),this.currentAudio.loop=!1);else{var n=e.split(" "),i=[],a=!1,r=!1,o=!1,s=!1,c=!1;for(var p of n)"loop"==p?a=!0:"queue"==p?r=!0:"nofade"==p?o=!0:"shuffle"==p?s=!0:"clear"==p?c=!0:i.push(p);c&&(this.audioPlaylist=[]),(i.length>=1||s)&&(this.audioPlaylist=this.audioPlaylist.concat(i));var d=i[0],l=this.currentAudio,h=this.sound_fade_time,u=this.audioPlaylist;if("null"==d||"none"==d)this.currentAudio&&(t(l).animate({volume:0},this.sound_fade_time,(function(){l.pause()})),this.currentAudio.loop=!1);else{if(console.log("new audio:",d,"current audio:",this.currentAudioURL),this.currentAudio&&(this.currentAudioURL==d||r||s))if(l.ended||l.paused)this.currentAudioURL=d,l.src=d,console.log("Fading in new audio"),l.volume=0,l.play(),t(l).animate({volume:1},h),this.currentAudio.onended=function(){var e;if(r)e=m.pop(),console.log("playing from queue");else if(s){var n=Math.floor(Math.random()*u.length);e=u[n],console.log("playing from playlist")}e&&(l.src=e,console.log("Now playing",e),l.play(),t(l).animate({volume:1},h),window.dendryUI.currentAudioURL=e)};else{console.log("adding music to queue"),this.audioQueue.push(d);var m=this.audioQueue;this.currentAudio.onended=function(){var e;if(r)e=m.pop(),console.log("playing from queue");else if(s){var n=Math.floor(Math.random()*u.length);e=u[n],console.log("playing from playlist")}e&&(l.src=e,console.log("Now playing",e),l.play(),t(l).animate({volume:1},h),window.dendryUI.currentAudioURL=e)}}else this.currentAudio?(this.currentAudioURL=d,console.log("currentAudio present,  fading out current audio"),l.onended=function(){},o?(l.pause(),l.src=d,l.play()):t(l).animate({volume:0},this.sound_fade_time,(function(){console.log(l),l.src=d,console.log("Fading in new audio"),l.play(),t(l).animate({volume:1},h)}))):this.currentAudio||(this.currentAudio=new Audio(d),this.currentAudio.volume=0,this.currentAudio.play(),t(this.currentAudio).animate({volume:1},this.sound_fade_time),l=this.currentAudio,s&&(this.currentAudio.onended=function(){var e=Math.floor(Math.random()*u.length),n=u[e];n&&(l.src=n,console.log("playing from shuffle"),console.log("Now playing",n),l.play(),t(l).animate({volume:1},h),window.dendryUI.currentAudioURL=n)}));this.currentAudio.loop=!!a}}},a.prototype.saveSettings=function(){"undefined"!=typeof localStorage&&(localStorage[this.game.title+"_animate"]=this.animate,localStorage[this.game.title+"_disable_bg"]=this.disable_bg,localStorage[this.game.title+"_animate_bg"]=this.animate_bg,localStorage[this.game.title+"_show_portraits"]=this.show_portraits,localStorage[this.game.title+"_disable_audio"]=this.disable_audio,localStorage[this.game.title+"_dark_mode"]=this.dark_mode)},a.prototype.loadSettings=function(e){var t={animate:!1,disable_bg:!1,animate_bg:!0,show_portraits:!0,disable_audio:!1,dark_mode:!1};if("undefined"!=typeof localStorage)for(var n in t)if(t.hasOwnProperty(n)){var i=this.game.title+"_"+n;i in localStorage?this[n]="false"!=localStorage[i]:e&&e.hasOwnProperty(n)?this[n]=e[n]:this[n]=t[n]}},a.prototype.toggle_audio=function(e){e?(this.disable_audio=!1,this.currentAudio&&this.currentAudio.play()):(this.currentAudio&&(this.currentAudio.pause(),this.currentAudio.loop=!1),this.disable_audio=!0)},a.prototype.autosave=function(){var e=localStorage[this.save_prefix+"_a0"];e&&(localStorage[this.save_prefix+"_a1"]=e,localStorage[this.save_prefix+"_timestamp_a1"]=localStorage[this.save_prefix+"_timestamp_a0"]);var t="a0",n=JSON.stringify(this.dendryEngine.getExportableState());localStorage[this.save_prefix+"_"+t]=n;var i=this.dendryEngine.state.sceneId,a=new Date(Date.now());a=i+"\n("+a.toLocaleString(void 0,this.DateOptions)+")",localStorage[this.save_prefix+"_timestamp_"+t]=a,this.populateSaveSlots(t+1,2)},a.prototype.quickSave=function(){var e=JSON.stringify(this.dendryEngine.getExportableState());localStorage[this.save_prefix+"_q"]=e,window.alert("Saved.")},a.prototype.saveSlot=function(e){var t=JSON.stringify(this.dendryEngine.getExportableState());localStorage[this.save_prefix+"_"+e]=t;var n=this.dendryEngine.state.sceneId,i=new Date(Date.now());i=n+"\n("+i.toLocaleString(void 0,this.DateOptions)+")",localStorage[this.save_prefix+"_timestamp_"+e]=i,this.populateSaveSlots(e+1,2)},a.prototype.quickLoad=function(){if(localStorage[this.save_prefix+"_q"]){var e=localStorage[this.save_prefix+"_q"];this.dendryEngine.setState(JSON.parse(e)),window.alert("Loaded.")}else window.alert("No save available.")},a.prototype.loadSlot=function(e){if(localStorage[this.save_prefix+"_"+e]){var t=localStorage[this.save_prefix+"_"+e];this.dendryEngine.setState(JSON.parse(t)),this.hideSaveSlots(),window.alert("Loaded.")}else window.alert("No save available.")},a.prototype.deleteSlot=function(e){localStorage[this.save_prefix+"_"+e]?(localStorage[this.save_prefix+"_"+e]="",localStorage[this.save_prefix+"_timestamp_"+e]="",this.populateSaveSlots(e+1,2)):window.alert("No save available.")},a.prototype.exportSlot=function(e){if(localStorage[this.save_prefix+"_"+e]){var t=localStorage[this.save_prefix+"_"+e],n=document.createElement("a"),i=new Blob([t],{type:"text/plain"});n.href=URL.createObjectURL(i),n.download="save.txt",n.click()}else window.alert("No save available.")},a.prototype.importSave=function(e){var t=this;var n=document.getElementById(e),i=new FileReader,a=n.files[0];console.log(n.files),i.onload=function(e){var n=e.target.result;t.dendryEngine.setState(JSON.parse(n)),t.hideSaveSlots(),window.alert("Loaded.")},i.readAsText(a)},a.prototype.populateSaveSlots=function(e,t){var n=this;function i(e){var t=document.getElementById("save_info_"+e),i=document.getElementById("save_button_"+e),a=document.getElementById("delete_button_"+e);if(localStorage[n.save_prefix+"_"+e]){var r=localStorage[n.save_prefix+"_timestamp_"+e];t.textContent=r,i.textContent="Load",i.onclick=function(e){return function(t){n.loadSlot(e)}}(e),a.onclick=function(e){return function(t){n.deleteSlot(e)}}(e)}else i.textContent="Save",t.textContent="Empty",i.onclick=function(e){return function(t){n.saveSlot(e)}}(e);try{var o=document.getElementById("export_button_"+e);localStorage[n.save_prefix+"_"+e]&&(o.onclick=function(e){return function(t){n.exportSlot(e)}}(e))}catch(e){}}for(var a=0;a<e;a++)i(a);for(a=0;a<t;a++)i("a"+a)},a.prototype.showSaveSlots=function(){if(this.dendryEngine.state.disableSaves)window.alert("Saving and loading is currently disabled.");else{var e=document.getElementById("save");e.style.display="block",this.populateSaveSlots(this.max_slots,2);var t=this;e.onclick||(e.onclick=function(e){e.target==document.getElementById("save")&&t.hideSaveSlots()})}},a.prototype.hideSaveSlots=function(){document.getElementById("save").style.display="none"},a.prototype.setOption=function(e,t){this[e]=t,this.saveSettings()},a.prototype.populateOptions=function(){var e=this.disable_bg,n=this.animate,i=this.animate_bg;e?t("#backgrounds_no")[0].checked=!0:t("#backgrounds_yes")[0].checked=!0,n?t("#animate_yes")[0].checked=!0:t("#animate_no")[0].checked=!0,i?t("#animate_bg_yes")[0].checked=!0:t("#animate_bg_no")[0].checked=!0},a.prototype.showOptions=function(){var e=document.getElementById("options");this.populateOptions(),e.style.display="block",e.onclick||(e.onclick=function(e){e.target==document.getElementById("options")&&this.hideOptions()})},a.prototype.getGameOverMsg=function(){return"Game Over (reload to read again)"},a.prototype._registerEvents=function(){var e=this;this.$content.on("click","ul.choices li a",(function(n){n.preventDefault(),n.stopPropagation();var i=parseInt(t(this).attr("data-choice"));return e.dendryEngine.choose(i),!1})),this.$content.on("click","ul.choices li",(function(e){return e.preventDefault(),e.stopPropagation(),t("a",this).click(),!1})),this.$content.on("click","ul.decks li a",(function(n){n.preventDefault(),n.stopPropagation();var i=t(this).attr("card-id");return e.dendryEngine.drawCard(i),!1})),this.$content.on("click","ul.hand li a",(function(n){n.preventDefault(),n.stopPropagation();var i=t(this).attr("card-id");return e.dendryEngine.playCard(i),!1})),this.$content.on("click","ul.pinned-cards li a",(function(n){n.preventDefault(),n.stopPropagation();var i=t(this).attr("card-id");return e.dendryEngine.playPinnedCard(i),!1}))};t((function(){i.convertJSONToGame(window.game.compiled,(function(e,n){if(e)throw e;var i=new a(n,t("#content"));if((window.dendryUI=i,void 0!==window.dendryModifyUI)&&window.dendryModifyUI(i))return;i.dendryEngine.beginGame()}))}))}(jQuery)},{"../engine":1,"./content/html":3}],3:[function(e,t,n){!function(){"use strict";var e=function(e){if(void 0===e.type)return"undefined"!=typeof window&&window.displayText&&(e=window.displayText(e)),e;switch(e.type){case"emphasis-1":return"<em>"+n(e.content)+"</em>";case"emphasis-2":return"<strong>"+n(e.content)+"</strong>";case"emphasis-3":return"<code>"+n(e.content)+"</code>";case"hidden":return'<span class="hidden">'+n(e.content)+"</span>";case"line-break":return"<br>";case"magic":return e.content;case"insert":case"conditional":throw new Error(e.type+" should have been evaluated by now.")}},n=function(t){if(Array.isArray(t)){for(var n=[],i=0;i<t.length;++i){var a=t[i];n.push(e(a))}return n.join("")}return e(t)};t.exports={convert:function(e){for(var t=[],i=0;i<e.length;++i){var a=e[i];switch(a.type){case"heading":t.push("<h1>"),t.push(n(a.content)),t.push("</h1>");break;case"paragraph":t.push("<p>"),t.push(n(a.content)),t.push("</p>");break;case"quotation":t.push("<blockquote>"),t.push(n(a.content)),t.push("</blockquote>");break;case"attribution":t.push('<blockquote class="attribution">'),t.push(n(a.content)),t.push("</blockquote>");break;case"magic":t.push(a.content);break;case"hrule":t.push("<hr>")}}return t.join("")},convertLine:n}}()},{}]},{},[2]);